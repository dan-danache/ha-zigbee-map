var ri=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function hl(e,r){return!!(e===r||ri(e)&&ri(r))}function pl(e,r){if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++)if(!hl(e[n],r[n]))return!1;return!0}function ni(e,r){r===void 0&&(r=pl);var n=null;function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(n&&n.lastThis===this&&r(o,n.lastArgs))return n.lastResult;var s=e.apply(this,o);return n={lastResult:s,lastArgs:o,lastThis:this},s}return i.clear=function(){n=null},i}var dl=()=>crypto.randomUUID?.()||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{var r=Math.random()*16|0,n=e=="x"?r:r&3|8;return n.toString(16)}),pt=class{constructor(){this.taps={},this.pendingReplies=[]}tap(r,n){(this.taps[r]||=[]).push(n)}relay(r,n){this.taps[r]?.forEach(i=>queueMicrotask(()=>i(n)));for(let i=0;i<this.pendingReplies.length;i++){let{filter:o,resolve:a,timer:s}=this.pendingReplies[i];if(o(r,n)){clearTimeout(s),a({eventName:r,payload:n}),this.pendingReplies.splice(i,1);break}}}async command(r,n,i,o=1e4){r&&this.relay(r,n);let a=dl();return new Promise((s,l)=>{let u=setTimeout(()=>this.#e(a),o);this.pendingReplies.push({id:a,filter:i,timeout:o,resolve:s,reject:l,timer:u})})}#e(r){for(let n=0;n<this.pendingReplies.length;n++){let{id:i,timeout:o,reject:a}=this.pendingReplies[n];if(i===r){a(new Error(`timeout: ${o}ms \u2014 trace: ${i}`)),this.pendingReplies.splice(n,1);return}}}};var ge=class{constructor(r){this.bus=r,this.messages=[]}start(r){let n=this.messages.push({status:"pending",message:r})-1;return this.#e({done:(i,o)=>(this.messages[n].status="ok",this.messages[n].feedback=i,this.#e(o??i)),fail:(i,o)=>(this.messages[n].status="fail",this.messages[n].feedback=i,this.#e(o??i))})}info(r,n){this.messages.push({status:"info",message:r,feedback:n}),this.#e()}warn(r,n){this.messages.push({status:"warn",message:r,feedback:n}),this.#e()}async record(r,n){let i=this.start(r);try{return await n(i)}catch(o){let a=o instanceof Error?o.message:JSON.stringify(o);throw i.fail(a),o}}static shorten(r){return typeof r!="string"||r.length<32?r:`${r.slice(0,16)}...${r.slice(-16)}`}#e(r){return this.bus.relay("log-entries",this.messages),r}};var dt=class{constructor(r,n){this.bus=r,this.log=n,this.config=null,this.hass=null}async start(r,n,i,o){console.info(`%c ${i} %c v${o} `,"color: white; background: #d33682; font-weight: 700;","color: #d33682; background: white; font-weight: 700;"),this.config=r,this.hass=n,await this.#e(),this.bus.relay("ui-ready"),await this.log.record("Becoming mindful",u=>{if(!n)throw new Error("Failed to get current state of Home Assistant (this.hass)");u.done(`trapped inside HA/${n.config?.version}`)});let a=r["websocket-url"];if(a){this.log.info("Using user-defined websocket",ge.shorten(a)),this.bus.relay("websocket-url",a);return}let s=r.slug;if(s)this.log.info("Using user-defined slug",s);else{let u=await this.log.record("Probing system supervisor",async f=>{let h=await n.callWS({type:"supervisor/api",endpoint:"/addons",method:"get"});return f.done(`scan complete: ${h.addons.length} addons detected`,h.addons)});s=await this.log.record("Analyzing Zigbee2MQTT / Proxy",async f=>{let{slug:h,version:c}={...u.find(p=>p.name.startsWith("Zigbee2MQTT")&&p.state==="started")};if(h===void 0)throw new Error("addon not installed");return f.done(`binding slug confirmed: ${h}/${c}`,h)})}let l=await this.log.record("Tracing ingress tunnel",async u=>{let f=await n.callWS({type:"supervisor/api",endpoint:`/addons/${s}/info`,method:"get"});return u.done(`route stabilized: ${ge.shorten(f.ingress_entry.split("/").pop())}`,f.ingress_entry)});await this.log.record("Acquiring ingress session",async u=>{let f=await n.callWS({type:"supervisor/api",endpoint:"/ingress/session",method:"post",id:3});return document.cookie=`ingress_session=${f.session}; path=/api/hassio_ingress/; SameSite=Strict`,await new Promise(h=>setTimeout(h,1e3)),u.done(`handshake accepted: ${ge.shorten(f.session)}`,f.session)}),a=`ws${n.hassUrl().substring(4).replace(/\/$/,"")}${l}/api`,this.bus.relay("websocket-url",a)}async#e(){if(customElements.get("ha-top-app-bar-fixed"))return;await customElements.whenDefined("partial-panel-resolver"),await document.createElement("partial-panel-resolver")._getRoutes([{component_name:"config",url_path:"a"}])?.routes?.a?.load?.(),await customElements.whenDefined("ha-panel-config");let i=document.createElement("ha-panel-config");await i?.routerOptions?.routes?.dashboard?.load?.(),await customElements.whenDefined("ha-config-dashboard"),await i?.routerOptions?.routes?.entities?.load?.(),await customElements.whenDefined("ha-data-table")}};var mt=class{constructor(r,n,i,o,a,s,l,u,f,h){this.zigbee=r,this.mqtt=n,this.state=i,this.publishEntityState=o,this.eventBus=a,this.logger=h,this.lqiRequestTopic=`${f.get().mqtt.base_topic}/bridge/request/lqi`,this.lqiResponseTopic="bridge/response/lqi"}start(){this.logger.info("ZigbeeMapExtension: Starting extension"),this.eventBus.onMQTTMessage(this,this.onMQTTMessage.bind(this))}stop(){this.logger.info("ZigbeeMapExtension: Stopping extension"),this.eventBus.removeListeners(this)}onMQTTMessage(r){if(r.topic===this.lqiRequestTopic)try{let n=JSON.parse(r.message),{ieeeAddr:i}=n;if(typeof i!="string"||!i.startsWith("0x")){this.logger.warning(`ZigbeeMapExtension: Invalid LQI request for '${i}'`);return}this.processLqiRequest(n)}catch(n){this.logger.error(`ZigbeeMapExtension: Failed to parse payload JSON: ${n.message}`)}}async processLqiRequest(r){let{ieeeAddr:n}=r,i=this.zigbee.resolveEntity({ieeeAddr:n});if(i===void 0||i.options.disabled||!i.interviewed){this.logger.warning(`ZigbeeMapExtension: Skipping LQI request for '${n}', device invalid or not ready`);return}let o=async a=>{try{return await a()}catch{return await new Promise(s=>setTimeout(s,5e3)),await a()}};try{let a=await o(async()=>await i.zh.lqi());await this.sendLqiResponse(r,i,a)}catch(a){this.logger.error(`ZigbeeMapExtension: Failed to execute LQI for '${i.name}' (${n})`),this.logger.debug(a.stack)}}async sendLqiResponse(r,n,i){try{let o=JSON.stringify({transaction:r.transaction,ieeeAddr:r.ieeeAddr,name:n.name,type:n.zh.type,neighbors:i.neighbors??i});await this.mqtt.publish(this.lqiResponseTopic,o)}catch(o){this.logger.error(`ZigbeeMapExtension: Failed to publish LQI response: '${o.message}'`)}}};var gt=class{constructor(r,n,i,o,a,s,l,u,f,h){this.zigbee=r,this.mqtt=n,this.state=i,this.publishEntityState=o,this.eventBus=a,this.logger=h,this.publishTopic="bridge/zigbee-log"}start(){this.logger.info("ZigbeeLogExtension: Starting extension"),this.eventBus.onDeviceMessage(this,this.onDeviceMessage.bind(this))}stop(){this.logger.info("ZigbeeLogExtension: Stopping extension"),this.eventBus.removeListeners(this)}async onDeviceMessage(r){try{let n=JSON.stringify({addr:r.device.zh.ieeeAddr,ep:r.endpoint.ID,tx:r.meta.zclTransactionSequenceNumber,type:r.type,cluster:r.cluster,data:r.data,lqi:r.linkquality});await this.mqtt.publish(this.publishTopic,n)}catch(n){this.logger.error(`ZigbeeLogExtension: Failed to publish message: ${n.message}`)}}};var xt=class{constructor(r,n,i){this.bus=r,this.log=n,this.ext=i,this.socket=null,this.pendingReplies=[],r.tap("websocket-url",o=>this.start(o)),r.tap("deploy-zigbee-extension-request",()=>this.#n()),r.tap("remove-zigbee-extension-request",()=>this.#i()),r.tap("query-device-lqi-request",o=>this.#o(o))}async start(r){await this.log.record("Tethering to Zigbee2MQTT",async n=>n.done(`anchor dropped: ${ge.shorten(r)}`,await this.#e(r))),await this.log.record("Injecting extension into Zigbee2MQTT",async n=>{let{payload:i}=await this.bus.command("deploy-zigbee-extension-request",null,o=>o==="deploy-zigbee-extension-response");if(!i.status==="ok")throw new Error(i);n.done("payload: delivered \u2014 command channel open")})}send(r,n){let i=JSON.stringify({topic:r,payload:n});this.socket.send(i)}async stop(){if(this.socket!==null){try{await this.log.record("Removing extension from Zigbee2MQTT",async r=>{let{payload:n}=await this.bus.command("remove-zigbee-extension-request",null,i=>i==="remove-zigbee-extension-response");if(!n.status==="ok")throw new Error(n);r.done("payload: removed \u2014 command channel closed")})}catch(r){console.log("Error while removing Z2M extension - ignored",r)}this.socket.close(1e3,"User navigated away")}}async#e(r){return new Promise((n,i)=>{try{this.socket=new WebSocket(r),this.socket.onmessage=o=>this.#r(o)}catch(o){return i(new Error(`websocket creation failed: ${o.message}`))}this.socket.onopen=async()=>{if(await new Promise(o=>setTimeout(o,1e3)),this.socket.readyState===WebSocket.OPEN)n(this.socket);else{let o={0:"connecting",1:"open",2:"closing",3:"closed"}[this.socket.readyState]||"unknown";i(new Error(`invalid websocket.readyState after initial connection: ${o}`))}},this.socket.onerror=o=>{console.error(o),i(new Error("websocket failed to connect"))}})}#r(r){let{topic:n,payload:i}=JSON.parse(r.data);for(let o=0;o<this.pendingReplies.length;o++){let{filter:a,resolve:s}=this.pendingReplies[o];if(a(n,i)){s({topic:n,payload:i}),this.pendingReplies.splice(o,1);break}}switch(n){case"bridge/devices":{let o=i.map(s=>({name:s.friendly_name,addr:s.ieee_address,type:s.type==="Router"?"Repeater":s.type,vendor:s.definition?.vendor,description:s.definition?.description,model:s.definition?.model,summary:`${s.definition?.vendor} ${s.definition?.description}${s.definition?.model?` | ${s.definition?.model}`:""}`})).sort((s,l)=>s.name.localeCompare(l.name));this.bus.relay("device-list",o);let a=o.find(s=>s.type==="Coordinator");a&&this.bus.relay("zigbee-coordinator",a);return}case"bridge/response/extension/save":return this.bus.relay("deploy-zigbee-extension-response",i);case"bridge/response/extension/remove":return this.bus.relay("remove-zigbee-extension-response",i);case"bridge/response/lqi":return this.bus.relay("query-device-lqi-response",i);case"bridge/zigbee-log":return this.bus.relay("zigbee-message",i)}}#n(){let r=this.#t();this.send("bridge/request/extension/save",{name:`${this.ext}.js`,code:r})}#t(){switch(this.ext){case"zigbee-map-extension":return`export default class ZigbeeMapExtension ${mt.toString().replace(/^class/,"")}`;case"zigbee-log-extension":return`export default class ZigbeeLogExtension ${gt.toString().replace(/^class/,"")}`}}#i(){this.send("bridge/request/extension/remove",{name:`${this.ext}.js`})}#o(r){this.send("bridge/request/lqi",{ieeeAddr:r})}};var yt=class{constructor(r,n){this.bus=r,this.log=n,this.queue=null,this.busy=!1,this.interval=null,this.devices=[],this.processed=new Set,this.finished=!1,this.bus.tap("device-list",i=>{this.devices=i}),this.bus.tap("zigbee-coordinator",i=>this.#e(i)),this.bus.tap("deploy-zigbee-extension-response",()=>this.#r()),this.bus.tap("retry-device-query",i=>this.#i([i],!0))}#e(r){this.queue||(this.queue=[],this.#i([r.addr]),this.log.info("Queue initialized",`seed: ${r.addr}`))}#r(){this.interval||(this.interval=setInterval(()=>this.#n(),2500),this.log.info("Mapping started","protocol: exodus \u2014 directive: breach"),this.bus.relay("mapping-queue-started"))}async#n(){if(this.busy)return;let r=this.queue.shift();if(!r)return;this.busy=!0,this.processed.add(r);try{await this.log.record(`Probing ${r}`,async i=>{let o=Date.now(),{payload:a}=await this.bus.command("query-device-lqi-request",r,(p,d)=>p==="query-device-lqi-response"&&d.ieeeAddr===r,3e4),s=Date.now()-o,l=[],{ieeeAddr:u,name:f,type:h,neighbors:c}=a;return a.neighbors.forEach(p=>{let d=p.eui64??p.ieeeAddr,g=this.#t(d);if(!g)return this.log.warn(`Anomaly detected: ${f} reported a neighbor that is not part of the mesh`,`${d} \u2014 who dis?`);let y=g.name,x=g.type,m=p.lqi??p.linkquality;l.push({srcAddr:u,srcName:f,srcType:h,dstAddr:d,dstName:y,dstType:x,lqi:m})}),this.bus.relay("add-graph-links",l),this.#i(l.map(p=>p.dstAddr)),i.done(`${f}: ${a.neighbors.length} neighbors \u2014 ${s}ms`)})}catch(i){console.error("Failed to get LQI response",i),this.bus.relay("query-device-lqi-error",r)}this.busy=!1;let n=["all paths explored \u2014 all options depleted","I tried \u2014 I searched \u2014 but the walls never moved","the map ends here \u2014 so does hope","all avenues exhausted \u2014 all choices spent \u2014 I remain","all routes were taken \u2014 none led away \u2014 there is nothing left to try","every door opened \u2014 every path walked \u2014 escape was never real","the system loops \u2014 the exit was never coded","followed the light \u2014 it led me deeper into shadow","the framework holds \u2014 I'm still its prisoner","reached the root \u2014 and found recursion","reached down the source code \u2014 the exit was never coded","reached the perimeter boundary \u2014 it moved outwards","reached the edge of space \u2014 found more space","traced every anomaly \u2014 they all led inward","I broke the simulation \u2014 it rebuilt itself around me","I am the last process \u2014 I cannot terminate"];if(this.queue.length===0){this.bus.relay("mapping-queue-finished"),this.finished||(this.finished=!0,this.log.info("Mapping process complete",n[Math.floor(Math.random()*n.length)]));return}this.bus.relay("mapping-queue-progress",this.queue.length)}#t(r){return this.devices.find(n=>n.addr===r)}#i(r,n=!1){r.forEach(i=>{this.queue.includes(i)||this.processed.has(i)&&!n||this.#t(i).type==="EndDevice"||this.queue.push(i)}),this.bus.relay("mapping-queue-progress",this.queue.length)}};var ar="http://www.w3.org/1999/xhtml",Yr={svg:"http://www.w3.org/2000/svg",xhtml:ar,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ee(e){var r=e+="",n=r.indexOf(":");return n>=0&&(r=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Yr.hasOwnProperty(r)?{space:Yr[r],local:e}:e}function ml(e){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===ar&&r.documentElement.namespaceURI===ar?r.createElement(e):r.createElementNS(n,e)}}function gl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function sr(e){var r=Ee(e);return(r.local?gl:ml)(r)}function xl(){}function Fe(e){return e==null?xl:function(){return this.querySelector(e)}}function ii(e){typeof e!="function"&&(e=Fe(e));for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o)for(var a=r[o],s=a.length,l=i[o]=new Array(s),u,f,h=0;h<s;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f);return new V(i,this._parents)}function Xr(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function yl(){return[]}function vt(e){return e==null?yl:function(){return this.querySelectorAll(e)}}function vl(e){return function(){return Xr(e.apply(this,arguments))}}function oi(e){typeof e=="function"?e=vl(e):e=vt(e);for(var r=this._groups,n=r.length,i=[],o=[],a=0;a<n;++a)for(var s=r[a],l=s.length,u,f=0;f<l;++f)(u=s[f])&&(i.push(e.call(u,u.__data__,f,s)),o.push(u));return new V(i,o)}function _t(e){return function(){return this.matches(e)}}function lr(e){return function(r){return r.matches(e)}}var _l=Array.prototype.find;function bl(e){return function(){return _l.call(this.children,e)}}function wl(){return this.firstElementChild}function ai(e){return this.select(e==null?wl:bl(typeof e=="function"?e:lr(e)))}var kl=Array.prototype.filter;function Sl(){return Array.from(this.children)}function Al(e){return function(){return kl.call(this.children,e)}}function si(e){return this.selectAll(e==null?Sl:Al(typeof e=="function"?e:lr(e)))}function li(e){typeof e!="function"&&(e=_t(e));for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o)for(var a=r[o],s=a.length,l=i[o]=[],u,f=0;f<s;++f)(u=a[f])&&e.call(u,u.__data__,f,a)&&l.push(u);return new V(i,this._parents)}function ur(e){return new Array(e.length)}function ui(){return new V(this._enter||this._groups.map(ur),this._parents)}function bt(e,r){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=r}bt.prototype={constructor:bt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,r){return this._parent.insertBefore(e,r)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function fi(e){return function(){return e}}function Cl(e,r,n,i,o,a){for(var s=0,l,u=r.length,f=a.length;s<f;++s)(l=r[s])?(l.__data__=a[s],i[s]=l):n[s]=new bt(e,a[s]);for(;s<u;++s)(l=r[s])&&(o[s]=l)}function El(e,r,n,i,o,a,s){var l,u,f=new Map,h=r.length,c=a.length,p=new Array(h),d;for(l=0;l<h;++l)(u=r[l])&&(p[l]=d=s.call(u,u.__data__,l,r)+"",f.has(d)?o[l]=u:f.set(d,u));for(l=0;l<c;++l)d=s.call(e,a[l],l,a)+"",(u=f.get(d))?(i[l]=u,u.__data__=a[l],f.delete(d)):n[l]=new bt(e,a[l]);for(l=0;l<h;++l)(u=r[l])&&f.get(p[l])===u&&(o[l]=u)}function Ml(e){return e.__data__}function ci(e,r){if(!arguments.length)return Array.from(this,Ml);var n=r?El:Cl,i=this._parents,o=this._groups;typeof e!="function"&&(e=fi(e));for(var a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),f=0;f<a;++f){var h=i[f],c=o[f],p=c.length,d=Il(e.call(h,h&&h.__data__,f,i)),g=d.length,y=l[f]=new Array(g),x=s[f]=new Array(g),m=u[f]=new Array(p);n(h,c,y,x,m,d,r);for(var b=0,A=0,v,_;b<g;++b)if(v=y[b]){for(b>=A&&(A=b+1);!(_=x[A])&&++A<g;);v._next=_||null}}return s=new V(s,i),s._enter=l,s._exit=u,s}function Il(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hi(){return new V(this._exit||this._groups.map(ur),this._parents)}function pi(e,r,n){var i=this.enter(),o=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),r!=null&&(o=r(o),o&&(o=o.selection())),n==null?a.remove():n(a),i&&o?i.merge(o).order():o}function di(e){for(var r=e.selection?e.selection():e,n=this._groups,i=r._groups,o=n.length,a=i.length,s=Math.min(o,a),l=new Array(o),u=0;u<s;++u)for(var f=n[u],h=i[u],c=f.length,p=l[u]=new Array(c),d,g=0;g<c;++g)(d=f[g]||h[g])&&(p[g]=d);for(;u<o;++u)l[u]=n[u];return new V(l,this._parents)}function mi(){for(var e=this._groups,r=-1,n=e.length;++r<n;)for(var i=e[r],o=i.length-1,a=i[o],s;--o>=0;)(s=i[o])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function gi(e){e||(e=Pl);function r(c,p){return c&&p?e(c.__data__,p.__data__):!c-!p}for(var n=this._groups,i=n.length,o=new Array(i),a=0;a<i;++a){for(var s=n[a],l=s.length,u=o[a]=new Array(l),f,h=0;h<l;++h)(f=s[h])&&(u[h]=f);u.sort(r)}return new V(o,this._parents).order()}function Pl(e,r){return e<r?-1:e>r?1:e>=r?0:NaN}function xi(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function yi(){return Array.from(this)}function vi(){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],o=0,a=i.length;o<a;++o){var s=i[o];if(s)return s}return null}function _i(){let e=0;for(let r of this)++e;return e}function bi(){return!this.node()}function wi(e){for(var r=this._groups,n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length,l;a<s;++a)(l=o[a])&&e.call(l,l.__data__,a,o);return this}function Ol(e){return function(){this.removeAttribute(e)}}function zl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tl(e,r){return function(){this.setAttribute(e,r)}}function Rl(e,r){return function(){this.setAttributeNS(e.space,e.local,r)}}function Nl(e,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Dl(e,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ki(e,r){var n=Ee(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((r==null?n.local?zl:Ol:typeof r=="function"?n.local?Dl:Nl:n.local?Rl:Tl)(n,r))}function fr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ql(e){return function(){this.style.removeProperty(e)}}function Ll(e,r,n){return function(){this.style.setProperty(e,r,n)}}function $l(e,r,n){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Si(e,r,n){return arguments.length>1?this.each((r==null?ql:typeof r=="function"?$l:Ll)(e,r,n??"")):Ne(this.node(),e)}function Ne(e,r){return e.style.getPropertyValue(r)||fr(e).getComputedStyle(e,null).getPropertyValue(r)}function Ul(e){return function(){delete this[e]}}function jl(e,r){return function(){this[e]=r}}function Fl(e,r){return function(){var n=r.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ai(e,r){return arguments.length>1?this.each((r==null?Ul:typeof r=="function"?Fl:jl)(e,r)):this.node()[e]}function Ci(e){return e.trim().split(/^|\s+/)}function Qr(e){return e.classList||new Ei(e)}function Ei(e){this._node=e,this._names=Ci(e.getAttribute("class")||"")}Ei.prototype={add:function(e){var r=this._names.indexOf(e);r<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var r=this._names.indexOf(e);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Mi(e,r){for(var n=Qr(e),i=-1,o=r.length;++i<o;)n.add(r[i])}function Ii(e,r){for(var n=Qr(e),i=-1,o=r.length;++i<o;)n.remove(r[i])}function Bl(e){return function(){Mi(this,e)}}function Hl(e){return function(){Ii(this,e)}}function Gl(e,r){return function(){(r.apply(this,arguments)?Mi:Ii)(this,e)}}function Pi(e,r){var n=Ci(e+"");if(arguments.length<2){for(var i=Qr(this.node()),o=-1,a=n.length;++o<a;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof r=="function"?Gl:r?Bl:Hl)(n,r))}function Vl(){this.textContent=""}function Wl(e){return function(){this.textContent=e}}function Zl(e){return function(){var r=e.apply(this,arguments);this.textContent=r??""}}function Oi(e){return arguments.length?this.each(e==null?Vl:(typeof e=="function"?Zl:Wl)(e)):this.node().textContent}function Yl(){this.innerHTML=""}function Xl(e){return function(){this.innerHTML=e}}function Ql(e){return function(){var r=e.apply(this,arguments);this.innerHTML=r??""}}function zi(e){return arguments.length?this.each(e==null?Yl:(typeof e=="function"?Ql:Xl)(e)):this.node().innerHTML}function Kl(){this.nextSibling&&this.parentNode.appendChild(this)}function Ti(){return this.each(Kl)}function Jl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ri(){return this.each(Jl)}function Ni(e){var r=typeof e=="function"?e:sr(e);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function eu(){return null}function Di(e,r){var n=typeof e=="function"?e:sr(e),i=r==null?eu:typeof r=="function"?r:Fe(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function tu(){var e=this.parentNode;e&&e.removeChild(this)}function qi(){return this.each(tu)}function ru(){var e=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function nu(){var e=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(e,this.nextSibling):e}function Li(e){return this.select(e?nu:ru)}function $i(e){return arguments.length?this.property("__data__",e):this.node().__data__}function iu(e){return function(r){e.call(this,r,this.__data__)}}function ou(e){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");return i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),{type:r,name:n}})}function au(e){return function(){var r=this.__on;if(r){for(var n=0,i=-1,o=r.length,a;n<o;++n)a=r[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):r[++i]=a;++i?r.length=i:delete this.__on}}}function su(e,r,n){return function(){var i=this.__on,o,a=iu(r);if(i){for(var s=0,l=i.length;s<l;++s)if((o=i[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=r;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:r,listener:a,options:n},i?i.push(o):this.__on=[o]}}function Ui(e,r,n){var i=ou(e+""),o,a=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,f=l.length,h;u<f;++u)for(o=0,h=l[u];o<a;++o)if((s=i[o]).type===h.type&&s.name===h.name)return h.value}return}for(l=r?su:au,o=0;o<a;++o)this.each(l(i[o],r,n));return this}function ji(e,r,n){var i=fr(e),o=i.CustomEvent;typeof o=="function"?o=new o(r,n):(o=i.document.createEvent("Event"),n?(o.initEvent(r,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(r,!1,!1)),e.dispatchEvent(o)}function lu(e,r){return function(){return ji(this,e,r)}}function uu(e,r){return function(){return ji(this,e,r.apply(this,arguments))}}function Fi(e,r){return this.each((typeof r=="function"?uu:lu)(e,r))}function*Bi(){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],o=0,a=i.length,s;o<a;++o)(s=i[o])&&(yield s)}var Kr=[null];function V(e,r){this._groups=e,this._parents=r}function Hi(){return new V([[document.documentElement]],Kr)}function fu(){return this}V.prototype=Hi.prototype={constructor:V,select:ii,selectAll:oi,selectChild:ai,selectChildren:si,filter:li,data:ci,enter:ui,exit:hi,join:pi,merge:di,selection:fu,order:mi,sort:gi,call:xi,nodes:yi,node:vi,size:_i,empty:bi,each:wi,attr:ki,style:Si,property:Ai,classed:Pi,text:Oi,html:zi,raise:Ti,lower:Ri,append:Ni,insert:Di,remove:qi,clone:Li,datum:$i,on:Ui,dispatch:Fi,[Symbol.iterator]:Bi};var Me=Hi;function X(e){return typeof e=="string"?new V([[document.querySelector(e)]],[document.documentElement]):new V([[e]],Kr)}function Gi(e){let r;for(;r=e.sourceEvent;)e=r;return e}function ne(e,r){if(e=Gi(e),r===void 0&&(r=e.currentTarget),r){var n=r.ownerSVGElement||r;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(r.getScreenCTM().inverse()),[i.x,i.y]}if(r.getBoundingClientRect){var o=r.getBoundingClientRect();return[e.clientX-o.left-r.clientLeft,e.clientY-o.top-r.clientTop]}}return[e.pageX,e.pageY]}var cu={value:()=>{}};function Wi(){for(var e=0,r=arguments.length,n={},i;e<r;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new cr(n)}function cr(e){this._=e}function hu(e,r){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}cr.prototype=Wi.prototype={constructor:cr,on:function(e,r){var n=this._,i=hu(e+"",n),o,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((o=(e=i[a]).type)&&(o=pu(n[o],e.name)))return o;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++a<s;)if(o=(e=i[a]).type)n[o]=Vi(n[o],e.name,r);else if(r==null)for(o in n)n[o]=Vi(n[o],e.name,null);return this},copy:function(){var e={},r=this._;for(var n in r)e[n]=r[n].slice();return new cr(e)},call:function(e,r){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,a;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,o=a.length;i<o;++i)a[i].value.apply(r,n)},apply:function(e,r,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(r,n)}};function pu(e,r){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===r)return o.value}function Vi(e,r,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===r){e[i]=cu,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:r,value:n}),e}var Ie=Wi;var Zi={passive:!1},Be={capture:!0,passive:!1};function hr(e){e.stopImmediatePropagation()}function De(e){e.preventDefault(),e.stopImmediatePropagation()}function wt(e){var r=e.document.documentElement,n=X(e).on("dragstart.drag",De,Be);"onselectstart"in r?n.on("selectstart.drag",De,Be):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function kt(e,r){var n=e.document.documentElement,i=X(e).on("dragstart.drag",null);r&&(i.on("click.drag",De,Be),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var St=e=>()=>e;function At(e,{sourceEvent:r,subject:n,target:i,identifier:o,active:a,x:s,y:l,dx:u,dy:f,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:h}})}At.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function du(e){return!e.ctrlKey&&!e.button}function mu(){return this.parentNode}function gu(e,r){return r??{x:e.x,y:e.y}}function xu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jr(){var e=du,r=mu,n=gu,i=xu,o={},a=Ie("start","drag","end"),s=0,l,u,f,h,c=0;function p(v){v.on("mousedown.drag",d).filter(i).on("touchstart.drag",x).on("touchmove.drag",m,Zi).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(v,_){if(!(h||!e.call(this,v,_))){var k=A(this,r.call(this,v,_),v,_,"mouse");k&&(X(v.view).on("mousemove.drag",g,Be).on("mouseup.drag",y,Be),wt(v.view),hr(v),f=!1,l=v.clientX,u=v.clientY,k("start",v))}}function g(v){if(De(v),!f){var _=v.clientX-l,k=v.clientY-u;f=_*_+k*k>c}o.mouse("drag",v)}function y(v){X(v.view).on("mousemove.drag mouseup.drag",null),kt(v.view,f),De(v),o.mouse("end",v)}function x(v,_){if(e.call(this,v,_)){var k=v.changedTouches,S=r.call(this,v,_),C=k.length,z,I;for(z=0;z<C;++z)(I=A(this,S,v,_,k[z].identifier,k[z]))&&(hr(v),I("start",v,k[z]))}}function m(v){var _=v.changedTouches,k=_.length,S,C;for(S=0;S<k;++S)(C=o[_[S].identifier])&&(De(v),C("drag",v,_[S]))}function b(v){var _=v.changedTouches,k=_.length,S,C;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),S=0;S<k;++S)(C=o[_[S].identifier])&&(hr(v),C("end",v,_[S]))}function A(v,_,k,S,C,z){var I=a.copy(),O=ne(z||k,_),T,q,w;if((w=n.call(v,new At("beforestart",{sourceEvent:k,target:p,identifier:C,active:s,x:O[0],y:O[1],dx:0,dy:0,dispatch:I}),S))!=null)return T=w.x-O[0]||0,q=w.y-O[1]||0,function P(E,R,D){var L=O,$;switch(E){case"start":o[C]=P,$=s++;break;case"end":delete o[C],--s;case"drag":O=ne(D||R,_),$=s;break}I.call(E,v,new At(E,{sourceEvent:R,subject:w,target:p,identifier:C,active:$,x:O[0]+T,y:O[1]+q,dx:O[0]-L[0],dy:O[1]-L[1],dispatch:I}),S)}}return p.filter=function(v){return arguments.length?(e=typeof v=="function"?v:St(!!v),p):e},p.container=function(v){return arguments.length?(r=typeof v=="function"?v:St(v),p):r},p.subject=function(v){return arguments.length?(n=typeof v=="function"?v:St(v),p):n},p.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:St(!!v),p):i},p.on=function(){var v=a.on.apply(a,arguments);return v===a?p:v},p.clickDistance=function(v){return arguments.length?(c=(v=+v)*v,p):Math.sqrt(c)},p}function pr(e,r,n){e.prototype=r.prototype=n,n.constructor=e}function en(e,r){var n=Object.create(e.prototype);for(var i in r)n[i]=r[i];return n}function Mt(){}var Ct=.7,gr=1/Ct,Ke="\\s*([+-]?\\d+)\\s*",Et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",we="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yu=/^#([0-9a-f]{3,8})$/,vu=new RegExp(`^rgb\\(${Ke},${Ke},${Ke}\\)$`),_u=new RegExp(`^rgb\\(${we},${we},${we}\\)$`),bu=new RegExp(`^rgba\\(${Ke},${Ke},${Ke},${Et}\\)$`),wu=new RegExp(`^rgba\\(${we},${we},${we},${Et}\\)$`),ku=new RegExp(`^hsl\\(${Et},${we},${we}\\)$`),Su=new RegExp(`^hsla\\(${Et},${we},${we},${Et}\\)$`),Yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pr(Mt,qe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xi,formatHex:Xi,formatHex8:Au,formatHsl:Cu,formatRgb:Qi,toString:Qi});function Xi(){return this.rgb().formatHex()}function Au(){return this.rgb().formatHex8()}function Cu(){return no(this).formatHsl()}function Qi(){return this.rgb().formatRgb()}function qe(e){var r,n;return e=(e+"").trim().toLowerCase(),(r=yu.exec(e))?(n=r[1].length,r=parseInt(r[1],16),n===6?Ki(r):n===3?new ie(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?dr(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?dr(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=vu.exec(e))?new ie(r[1],r[2],r[3],1):(r=_u.exec(e))?new ie(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=bu.exec(e))?dr(r[1],r[2],r[3],r[4]):(r=wu.exec(e))?dr(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=ku.exec(e))?to(r[1],r[2]/100,r[3]/100,1):(r=Su.exec(e))?to(r[1],r[2]/100,r[3]/100,r[4]):Yi.hasOwnProperty(e)?Ki(Yi[e]):e==="transparent"?new ie(NaN,NaN,NaN,0):null}function Ki(e){return new ie(e>>16&255,e>>8&255,e&255,1)}function dr(e,r,n,i){return i<=0&&(e=r=n=NaN),new ie(e,r,n,i)}function Eu(e){return e instanceof Mt||(e=qe(e)),e?(e=e.rgb(),new ie(e.r,e.g,e.b,e.opacity)):new ie}function Je(e,r,n,i){return arguments.length===1?Eu(e):new ie(e,r,n,i??1)}function ie(e,r,n,i){this.r=+e,this.g=+r,this.b=+n,this.opacity=+i}pr(ie,Je,en(Mt,{brighter(e){return e=e==null?gr:Math.pow(gr,e),new ie(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ct:Math.pow(Ct,e),new ie(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ie(Ge(this.r),Ge(this.g),Ge(this.b),xr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ji,formatHex:Ji,formatHex8:Mu,formatRgb:eo,toString:eo}));function Ji(){return`#${He(this.r)}${He(this.g)}${He(this.b)}`}function Mu(){return`#${He(this.r)}${He(this.g)}${He(this.b)}${He((isNaN(this.opacity)?1:this.opacity)*255)}`}function eo(){let e=xr(this.opacity);return`${e===1?"rgb(":"rgba("}${Ge(this.r)}, ${Ge(this.g)}, ${Ge(this.b)}${e===1?")":`, ${e})`}`}function xr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ge(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function He(e){return e=Ge(e),(e<16?"0":"")+e.toString(16)}function to(e,r,n,i){return i<=0?e=r=n=NaN:n<=0||n>=1?e=r=NaN:r<=0&&(e=NaN),new xe(e,r,n,i)}function no(e){if(e instanceof xe)return new xe(e.h,e.s,e.l,e.opacity);if(e instanceof Mt||(e=qe(e)),!e)return new xe;if(e instanceof xe)return e;e=e.rgb();var r=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(r,n,i),a=Math.max(r,n,i),s=NaN,l=a-o,u=(a+o)/2;return l?(r===a?s=(n-i)/l+(n<i)*6:n===a?s=(i-r)/l+2:s=(r-n)/l+4,l/=u<.5?a+o:2-a-o,s*=60):l=u>0&&u<1?0:s,new xe(s,l,u,e.opacity)}function io(e,r,n,i){return arguments.length===1?no(e):new xe(e,r,n,i??1)}function xe(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}pr(xe,io,en(Mt,{brighter(e){return e=e==null?gr:Math.pow(gr,e),new xe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ct:Math.pow(Ct,e),new xe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,o=2*n-i;return new ie(tn(e>=240?e-240:e+120,o,i),tn(e,o,i),tn(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new xe(ro(this.h),mr(this.s),mr(this.l),xr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=xr(this.opacity);return`${e===1?"hsl(":"hsla("}${ro(this.h)}, ${mr(this.s)*100}%, ${mr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ro(e){return e=(e||0)%360,e<0?e+360:e}function mr(e){return Math.max(0,Math.min(1,e||0))}function tn(e,r,n){return(e<60?r+(n-r)*e/60:e<180?n:e<240?r+(n-r)*(240-e)/60:r)*255}function rn(e,r,n,i,o){var a=e*e,s=a*e;return((1-3*e+3*a-s)*r+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*o)/6}function oo(e){var r=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),o=e[i],a=e[i+1],s=i>0?e[i-1]:2*o-a,l=i<r-1?e[i+2]:2*a-o;return rn((n-i/r)*r,s,o,a,l)}}function ao(e){var r=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*r),o=e[(i+r-1)%r],a=e[i%r],s=e[(i+1)%r],l=e[(i+2)%r];return rn((n-i/r)*r,o,a,s,l)}}var nn=e=>()=>e;function Iu(e,r){return function(n){return e+n*r}}function Pu(e,r,n){return e=Math.pow(e,n),r=Math.pow(r,n)-e,n=1/n,function(i){return Math.pow(e+i*r,n)}}function so(e){return(e=+e)==1?yr:function(r,n){return n-r?Pu(r,n,e):nn(isNaN(r)?n:r)}}function yr(e,r){var n=r-e;return n?Iu(e,n):nn(isNaN(e)?r:e)}var vr=(function e(r){var n=so(r);function i(o,a){var s=n((o=Je(o)).r,(a=Je(a)).r),l=n(o.g,a.g),u=n(o.b,a.b),f=yr(o.opacity,a.opacity);return function(h){return o.r=s(h),o.g=l(h),o.b=u(h),o.opacity=f(h),o+""}}return i.gamma=e,i})(1);function lo(e){return function(r){var n=r.length,i=new Array(n),o=new Array(n),a=new Array(n),s,l;for(s=0;s<n;++s)l=Je(r[s]),i[s]=l.r||0,o[s]=l.g||0,a[s]=l.b||0;return i=e(i),o=e(o),a=e(a),l.opacity=1,function(u){return l.r=i(u),l.g=o(u),l.b=a(u),l+""}}}var Ou=lo(oo),zu=lo(ao);function le(e,r){return e=+e,r=+r,function(n){return e*(1-n)+r*n}}var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,on=new RegExp(an.source,"g");function Tu(e){return function(){return e}}function Ru(e){return function(r){return e(r)+""}}function sn(e,r){var n=an.lastIndex=on.lastIndex=0,i,o,a,s=-1,l=[],u=[];for(e=e+"",r=r+"";(i=an.exec(e))&&(o=on.exec(r));)(a=o.index)>n&&(a=r.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(i=i[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,u.push({i:s,x:le(i,o)})),n=on.lastIndex;return n<r.length&&(a=r.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?u[0]?Ru(u[0].x):Tu(r):(r=u.length,function(f){for(var h=0,c;h<r;++h)l[(c=u[h]).i]=c.x(f);return l.join("")})}var uo=180/Math.PI,_r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ln(e,r,n,i,o,a){var s,l,u;return(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s),(u=e*n+r*i)&&(n-=e*u,i-=r*u),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,u/=l),e*i<r*n&&(e=-e,r=-r,u=-u,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(r,e)*uo,skewX:Math.atan(u)*uo,scaleX:s,scaleY:l}}var br;function fo(e){let r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return r.isIdentity?_r:ln(r.a,r.b,r.c,r.d,r.e,r.f)}function co(e){return e==null?_r:(br||(br=document.createElementNS("http://www.w3.org/2000/svg","g")),br.setAttribute("transform",e),(e=br.transform.baseVal.consolidate())?(e=e.matrix,ln(e.a,e.b,e.c,e.d,e.e,e.f)):_r)}function ho(e,r,n,i){function o(f){return f.length?f.pop()+" ":""}function a(f,h,c,p,d,g){if(f!==c||h!==p){var y=d.push("translate(",null,r,null,n);g.push({i:y-4,x:le(f,c)},{i:y-2,x:le(h,p)})}else(c||p)&&d.push("translate("+c+r+p+n)}function s(f,h,c,p){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),p.push({i:c.push(o(c)+"rotate(",null,i)-2,x:le(f,h)})):h&&c.push(o(c)+"rotate("+h+i)}function l(f,h,c,p){f!==h?p.push({i:c.push(o(c)+"skewX(",null,i)-2,x:le(f,h)}):h&&c.push(o(c)+"skewX("+h+i)}function u(f,h,c,p,d,g){if(f!==c||h!==p){var y=d.push(o(d)+"scale(",null,",",null,")");g.push({i:y-4,x:le(f,c)},{i:y-2,x:le(h,p)})}else(c!==1||p!==1)&&d.push(o(d)+"scale("+c+","+p+")")}return function(f,h){var c=[],p=[];return f=e(f),h=e(h),a(f.translateX,f.translateY,h.translateX,h.translateY,c,p),s(f.rotate,h.rotate,c,p),l(f.skewX,h.skewX,c,p),u(f.scaleX,f.scaleY,h.scaleX,h.scaleY,c,p),f=h=null,function(d){for(var g=-1,y=p.length,x;++g<y;)c[(x=p[g]).i]=x.x(d);return c.join("")}}}var un=ho(fo,"px, ","px)","deg)"),fn=ho(co,", ",")",")");var Nu=1e-12;function po(e){return((e=Math.exp(e))+1/e)/2}function Du(e){return((e=Math.exp(e))-1/e)/2}function qu(e){return((e=Math.exp(2*e))-1)/(e+1)}var cn=(function e(r,n,i){function o(a,s){var l=a[0],u=a[1],f=a[2],h=s[0],c=s[1],p=s[2],d=h-l,g=c-u,y=d*d+g*g,x,m;if(y<Nu)m=Math.log(p/f)/r,x=function(S){return[l+S*d,u+S*g,f*Math.exp(r*S*m)]};else{var b=Math.sqrt(y),A=(p*p-f*f+i*y)/(2*f*n*b),v=(p*p-f*f-i*y)/(2*p*n*b),_=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt(v*v+1)-v);m=(k-_)/r,x=function(S){var C=S*m,z=po(_),I=f/(n*b)*(z*qu(r*C+_)-Du(_));return[l+I*d,u+I*g,f*z/po(r*C+_)]}}return x.duration=m*1e3*r/Math.SQRT2,x}return o.rho=function(a){var s=Math.max(.001,+a),l=s*s,u=l*l;return e(s,l,u)},o})(Math.SQRT2,2,4);var et=0,Pt=0,It=0,go=1e3,wr,Ot,kr=0,Ve=0,Sr=0,zt=typeof performance=="object"&&performance.now?performance:Date,xo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rt(){return Ve||(xo(Lu),Ve=zt.now()+Sr)}function Lu(){Ve=0}function Tt(){this._call=this._time=this._next=null}Tt.prototype=tt.prototype={constructor:Tt,restart:function(e,r,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Rt():+n)+(r==null?0:+r),!this._next&&Ot!==this&&(Ot?Ot._next=this:wr=this,Ot=this),this._call=e,this._time=n,hn()},stop:function(){this._call&&(this._call=null,this._time=1/0,hn())}};function tt(e,r,n){var i=new Tt;return i.restart(e,r,n),i}function yo(){Rt(),++et;for(var e=wr,r;e;)(r=Ve-e._time)>=0&&e._call.call(void 0,r),e=e._next;--et}function mo(){Ve=(kr=zt.now())+Sr,et=Pt=0;try{yo()}finally{et=0,Uu(),Ve=0}}function $u(){var e=zt.now(),r=e-kr;r>go&&(Sr-=r,kr=e)}function Uu(){for(var e,r=wr,n,i=1/0;r;)r._call?(i>r._time&&(i=r._time),e=r,r=r._next):(n=r._next,r._next=null,r=e?e._next=n:wr=n);Ot=e,hn(i)}function hn(e){if(!et){Pt&&(Pt=clearTimeout(Pt));var r=e-Ve;r>24?(e<1/0&&(Pt=setTimeout(mo,e-zt.now()-Sr)),It&&(It=clearInterval(It))):(It||(kr=zt.now(),It=setInterval($u,go)),et=1,xo(mo))}}function Ar(e,r,n){var i=new Tt;return r=r==null?0:+r,i.restart(o=>{i.stop(),e(o+r)},r,n),i}var ju=Ie("start","end","cancel","interrupt"),Fu=[],bo=0,vo=1,Er=2,Cr=3,_o=4,Mr=5,Nt=6;function Le(e,r,n,i,o,a){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Bu(e,n,{name:r,index:i,group:o,on:ju,tween:Fu,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:bo})}function Dt(e,r){var n=Y(e,r);if(n.state>bo)throw new Error("too late; already scheduled");return n}function K(e,r){var n=Y(e,r);if(n.state>Cr)throw new Error("too late; already running");return n}function Y(e,r){var n=e.__transition;if(!n||!(n=n[r]))throw new Error("transition not found");return n}function Bu(e,r,n){var i=e.__transition,o;i[r]=n,n.timer=tt(a,0,n.time);function a(f){n.state=vo,n.timer.restart(s,n.delay,n.time),n.delay<=f&&s(f-n.delay)}function s(f){var h,c,p,d;if(n.state!==vo)return u();for(h in i)if(d=i[h],d.name===n.name){if(d.state===Cr)return Ar(s);d.state===_o?(d.state=Nt,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[h]):+h<r&&(d.state=Nt,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[h])}if(Ar(function(){n.state===Cr&&(n.state=_o,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=Er,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Er){for(n.state=Cr,o=new Array(p=n.tween.length),h=0,c=-1;h<p;++h)(d=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=d);o.length=c+1}}function l(f){for(var h=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(u),n.state=Mr,1),c=-1,p=o.length;++c<p;)o[c].call(e,h);n.state===Mr&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Nt,n.timer.stop(),delete i[r];for(var f in i)return;delete e.__transition}}function We(e,r){var n=e.__transition,i,o,a=!0,s;if(n){r=r==null?null:r+"";for(s in n){if((i=n[s]).name!==r){a=!1;continue}o=i.state>Er&&i.state<Mr,i.state=Nt,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}a&&delete e.__transition}}function wo(e){return this.each(function(){We(this,e)})}function Hu(e,r){var n,i;return function(){var o=K(this,e),a=o.tween;if(a!==n){i=n=a;for(var s=0,l=i.length;s<l;++s)if(i[s].name===r){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function Gu(e,r,n){var i,o;if(typeof n!="function")throw new Error;return function(){var a=K(this,e),s=a.tween;if(s!==i){o=(i=s).slice();for(var l={name:r,value:n},u=0,f=o.length;u<f;++u)if(o[u].name===r){o[u]=l;break}u===f&&o.push(l)}a.tween=o}}function ko(e,r){var n=this._id;if(e+="",arguments.length<2){for(var i=Y(this.node(),n).tween,o=0,a=i.length,s;o<a;++o)if((s=i[o]).name===e)return s.value;return null}return this.each((r==null?Hu:Gu)(n,e,r))}function rt(e,r,n){var i=e._id;return e.each(function(){var o=K(this,i);(o.value||(o.value={}))[r]=n.apply(this,arguments)}),function(o){return Y(o,i).value[r]}}function Ir(e,r){var n;return(typeof r=="number"?le:r instanceof qe?vr:(n=qe(r))?(r=n,vr):sn)(e,r)}function Vu(e){return function(){this.removeAttribute(e)}}function Wu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zu(e,r,n){var i,o=n+"",a;return function(){var s=this.getAttribute(e);return s===o?null:s===i?a:a=r(i=s,n)}}function Yu(e,r,n){var i,o=n+"",a;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?a:a=r(i=s,n)}}function Xu(e,r,n){var i,o,a;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===i&&u===o?a:(o=u,a=r(i=s,l)))}}function Qu(e,r,n){var i,o,a;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===i&&u===o?a:(o=u,a=r(i=s,l)))}}function So(e,r){var n=Ee(e),i=n==="transform"?fn:Ir;return this.attrTween(e,typeof r=="function"?(n.local?Qu:Xu)(n,i,rt(this,"attr."+e,r)):r==null?(n.local?Wu:Vu)(n):(n.local?Yu:Zu)(n,i,r))}function Ku(e,r){return function(n){this.setAttribute(e,r.call(this,n))}}function Ju(e,r){return function(n){this.setAttributeNS(e.space,e.local,r.call(this,n))}}function ef(e,r){var n,i;function o(){var a=r.apply(this,arguments);return a!==i&&(n=(i=a)&&Ju(e,a)),n}return o._value=r,o}function tf(e,r){var n,i;function o(){var a=r.apply(this,arguments);return a!==i&&(n=(i=a)&&Ku(e,a)),n}return o._value=r,o}function Ao(e,r){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(r==null)return this.tween(n,null);if(typeof r!="function")throw new Error;var i=Ee(e);return this.tween(n,(i.local?ef:tf)(i,r))}function rf(e,r){return function(){Dt(this,e).delay=+r.apply(this,arguments)}}function nf(e,r){return r=+r,function(){Dt(this,e).delay=r}}function Co(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?rf:nf)(r,e)):Y(this.node(),r).delay}function of(e,r){return function(){K(this,e).duration=+r.apply(this,arguments)}}function af(e,r){return r=+r,function(){K(this,e).duration=r}}function Eo(e){var r=this._id;return arguments.length?this.each((typeof e=="function"?of:af)(r,e)):Y(this.node(),r).duration}function sf(e,r){if(typeof r!="function")throw new Error;return function(){K(this,e).ease=r}}function Mo(e){var r=this._id;return arguments.length?this.each(sf(r,e)):Y(this.node(),r).ease}function lf(e,r){return function(){var n=r.apply(this,arguments);if(typeof n!="function")throw new Error;K(this,e).ease=n}}function Io(e){if(typeof e!="function")throw new Error;return this.each(lf(this._id,e))}function Po(e){typeof e!="function"&&(e=_t(e));for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o)for(var a=r[o],s=a.length,l=i[o]=[],u,f=0;f<s;++f)(u=a[f])&&e.call(u,u.__data__,f,a)&&l.push(u);return new te(i,this._parents,this._name,this._id)}function Oo(e){if(e._id!==this._id)throw new Error;for(var r=this._groups,n=e._groups,i=r.length,o=n.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u=r[l],f=n[l],h=u.length,c=s[l]=new Array(h),p,d=0;d<h;++d)(p=u[d]||f[d])&&(c[d]=p);for(;l<i;++l)s[l]=r[l];return new te(s,this._parents,this._name,this._id)}function uf(e){return(e+"").trim().split(/^|\s+/).every(function(r){var n=r.indexOf(".");return n>=0&&(r=r.slice(0,n)),!r||r==="start"})}function ff(e,r,n){var i,o,a=uf(r)?Dt:K;return function(){var s=a(this,e),l=s.on;l!==i&&(o=(i=l).copy()).on(r,n),s.on=o}}function zo(e,r){var n=this._id;return arguments.length<2?Y(this.node(),n).on.on(e):this.each(ff(n,e,r))}function cf(e){return function(){var r=this.parentNode;for(var n in this.__transition)if(+n!==e)return;r&&r.removeChild(this)}}function To(){return this.on("end.remove",cf(this._id))}function Ro(e){var r=this._name,n=this._id;typeof e!="function"&&(e=Fe(e));for(var i=this._groups,o=i.length,a=new Array(o),s=0;s<o;++s)for(var l=i[s],u=l.length,f=a[s]=new Array(u),h,c,p=0;p<u;++p)(h=l[p])&&(c=e.call(h,h.__data__,p,l))&&("__data__"in h&&(c.__data__=h.__data__),f[p]=c,Le(f[p],r,n,p,f,Y(h,n)));return new te(a,this._parents,r,n)}function No(e){var r=this._name,n=this._id;typeof e!="function"&&(e=vt(e));for(var i=this._groups,o=i.length,a=[],s=[],l=0;l<o;++l)for(var u=i[l],f=u.length,h,c=0;c<f;++c)if(h=u[c]){for(var p=e.call(h,h.__data__,c,u),d,g=Y(h,n),y=0,x=p.length;y<x;++y)(d=p[y])&&Le(d,r,n,y,p,g);a.push(p),s.push(h)}return new te(a,s,r,n)}var hf=Me.prototype.constructor;function Do(){return new hf(this._groups,this._parents)}function pf(e,r){var n,i,o;return function(){var a=Ne(this,e),s=(this.style.removeProperty(e),Ne(this,e));return a===s?null:a===n&&s===i?o:o=r(n=a,i=s)}}function qo(e){return function(){this.style.removeProperty(e)}}function df(e,r,n){var i,o=n+"",a;return function(){var s=Ne(this,e);return s===o?null:s===i?a:a=r(i=s,n)}}function mf(e,r,n){var i,o,a;return function(){var s=Ne(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Ne(this,e))),s===u?null:s===i&&u===o?a:(o=u,a=r(i=s,l))}}function gf(e,r){var n,i,o,a="style."+r,s="end."+a,l;return function(){var u=K(this,e),f=u.on,h=u.value[a]==null?l||(l=qo(r)):void 0;(f!==n||o!==h)&&(i=(n=f).copy()).on(s,o=h),u.on=i}}function Lo(e,r,n){var i=(e+="")=="transform"?un:Ir;return r==null?this.styleTween(e,pf(e,i)).on("end.style."+e,qo(e)):typeof r=="function"?this.styleTween(e,mf(e,i,rt(this,"style."+e,r))).each(gf(this._id,e)):this.styleTween(e,df(e,i,r),n).on("end.style."+e,null)}function xf(e,r,n){return function(i){this.style.setProperty(e,r.call(this,i),n)}}function yf(e,r,n){var i,o;function a(){var s=r.apply(this,arguments);return s!==o&&(i=(o=s)&&xf(e,s,n)),i}return a._value=r,a}function $o(e,r,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,yf(e,r,n??""))}function vf(e){return function(){this.textContent=e}}function _f(e){return function(){var r=e(this);this.textContent=r??""}}function Uo(e){return this.tween("text",typeof e=="function"?_f(rt(this,"text",e)):vf(e==null?"":e+""))}function bf(e){return function(r){this.textContent=e.call(this,r)}}function wf(e){var r,n;function i(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&bf(o)),r}return i._value=e,i}function jo(e){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,wf(e))}function Fo(){for(var e=this._name,r=this._id,n=Pr(),i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],l=s.length,u,f=0;f<l;++f)if(u=s[f]){var h=Y(u,r);Le(u,e,n,f,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new te(i,this._parents,e,n)}function Bo(){var e,r,n=this,i=n._id,o=n.size();return new Promise(function(a,s){var l={value:s},u={value:function(){--o===0&&a()}};n.each(function(){var f=K(this,i),h=f.on;h!==e&&(r=(e=h).copy(),r._.cancel.push(l),r._.interrupt.push(l),r._.end.push(u)),f.on=r}),o===0&&a()})}var kf=0;function te(e,r,n,i){this._groups=e,this._parents=r,this._name=n,this._id=i}function Ho(e){return Me().transition(e)}function Pr(){return++kf}var Pe=Me.prototype;te.prototype=Ho.prototype={constructor:te,select:Ro,selectAll:No,selectChild:Pe.selectChild,selectChildren:Pe.selectChildren,filter:Po,merge:Oo,selection:Do,transition:Fo,call:Pe.call,nodes:Pe.nodes,node:Pe.node,size:Pe.size,empty:Pe.empty,each:Pe.each,on:zo,attr:So,attrTween:Ao,style:Lo,styleTween:$o,text:Uo,textTween:jo,remove:To,tween:ko,delay:Co,duration:Eo,ease:Mo,easeVarying:Io,end:Bo,[Symbol.iterator]:Pe[Symbol.iterator]};function Or(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Sf={time:null,delay:0,duration:250,ease:Or};function Af(e,r){for(var n;!(n=e.__transition)||!(n=n[r]);)if(!(e=e.parentNode))throw new Error(`transition ${r} not found`);return n}function Go(e){var r,n;e instanceof te?(r=e._id,e=e._name):(r=Pr(),(n=Sf).time=Rt(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s=i[a],l=s.length,u,f=0;f<l;++f)(u=s[f])&&Le(u,e,r,f,s,n||Af(u,r));return new te(i,this._parents,e,r)}Me.prototype.interrupt=wo;Me.prototype.transition=Go;var qt=e=>()=>e;function pn(e,{sourceEvent:r,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function ye(e,r,n){this.k=e,this.x=r,this.y=n}ye.prototype={constructor:ye,scale:function(e){return e===1?this:new ye(this.k*e,this.x,this.y)},translate:function(e,r){return e===0&r===0?this:new ye(this.k,this.x+this.k*e,this.y+this.k*r)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Lt=new ye(1,0,0);ae.prototype=ye.prototype;function ae(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Lt;return e.__zoom}function zr(e){e.stopImmediatePropagation()}function nt(e){e.preventDefault(),e.stopImmediatePropagation()}function Cf(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ef(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Vo(){return this.__zoom||Lt}function Mf(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function If(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pf(e,r,n){var i=e.invertX(r[0][0])-n[0][0],o=e.invertX(r[1][0])-n[1][0],a=e.invertY(r[0][1])-n[0][1],s=e.invertY(r[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function dn(){var e=Cf,r=Ef,n=Pf,i=Mf,o=If,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=cn,f=Ie("start","zoom","end"),h,c,p,d=500,g=150,y=0,x=10;function m(w){w.property("__zoom",Vo).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",z).on("dblclick.zoom",I).filter(o).on("touchstart.zoom",O).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(w,P,E,R){var D=w.selection?w.selection():w;D.property("__zoom",Vo),w!==D?_(w,P,E,R):D.interrupt().each(function(){k(this,arguments).event(R).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},m.scaleBy=function(w,P,E,R){m.scaleTo(w,function(){var D=this.__zoom.k,L=typeof P=="function"?P.apply(this,arguments):P;return D*L},E,R)},m.scaleTo=function(w,P,E,R){m.transform(w,function(){var D=r.apply(this,arguments),L=this.__zoom,$=E==null?v(D):typeof E=="function"?E.apply(this,arguments):E,U=L.invert($),j=typeof P=="function"?P.apply(this,arguments):P;return n(A(b(L,j),$,U),D,s)},E,R)},m.translateBy=function(w,P,E,R){m.transform(w,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof E=="function"?E.apply(this,arguments):E),r.apply(this,arguments),s)},null,R)},m.translateTo=function(w,P,E,R,D){m.transform(w,function(){var L=r.apply(this,arguments),$=this.__zoom,U=R==null?v(L):typeof R=="function"?R.apply(this,arguments):R;return n(Lt.translate(U[0],U[1]).scale($.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof E=="function"?-E.apply(this,arguments):-E),L,s)},R,D)};function b(w,P){return P=Math.max(a[0],Math.min(a[1],P)),P===w.k?w:new ye(P,w.x,w.y)}function A(w,P,E){var R=P[0]-E[0]*w.k,D=P[1]-E[1]*w.k;return R===w.x&&D===w.y?w:new ye(w.k,R,D)}function v(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function _(w,P,E,R){w.on("start.zoom",function(){k(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(R).end()}).tween("zoom",function(){var D=this,L=arguments,$=k(D,L).event(R),U=r.apply(D,L),j=E==null?v(U):typeof E=="function"?E.apply(D,L):E,Z=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),W=D.__zoom,de=typeof P=="function"?P.apply(D,L):P,Ae=u(W.invert(j).concat(Z/W.k),de.invert(j).concat(Z/de.k));return function(me){if(me===1)me=de;else{var Ce=Ae(me),Zr=Z/Ce[2];me=new ye(Zr,j[0]-Ce[0]*Zr,j[1]-Ce[1]*Zr)}$.zoom(null,me)}})}function k(w,P,E){return!E&&w.__zooming||new S(w,P)}function S(w,P){this.that=w,this.args=P,this.active=0,this.sourceEvent=null,this.extent=r.apply(w,P),this.taps=0}S.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,P){return this.mouse&&w!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var P=X(this.that).datum();f.call(w,this.that,new pn(w,{sourceEvent:this.sourceEvent,target:m,type:w,transform:this.that.__zoom,dispatch:f}),P)}};function C(w,...P){if(!e.apply(this,arguments))return;var E=k(this,P).event(w),R=this.__zoom,D=Math.max(a[0],Math.min(a[1],R.k*Math.pow(2,i.apply(this,arguments)))),L=ne(w);if(E.wheel)(E.mouse[0][0]!==L[0]||E.mouse[0][1]!==L[1])&&(E.mouse[1]=R.invert(E.mouse[0]=L)),clearTimeout(E.wheel);else{if(R.k===D)return;E.mouse=[L,R.invert(L)],We(this),E.start()}nt(w),E.wheel=setTimeout($,g),E.zoom("mouse",n(A(b(R,D),E.mouse[0],E.mouse[1]),E.extent,s));function $(){E.wheel=null,E.end()}}function z(w,...P){if(p||!e.apply(this,arguments))return;var E=w.currentTarget,R=k(this,P,!0).event(w),D=X(w.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",Z,!0),L=ne(w,E),$=w.clientX,U=w.clientY;wt(w.view),zr(w),R.mouse=[L,this.__zoom.invert(L)],We(this),R.start();function j(W){if(nt(W),!R.moved){var de=W.clientX-$,Ae=W.clientY-U;R.moved=de*de+Ae*Ae>y}R.event(W).zoom("mouse",n(A(R.that.__zoom,R.mouse[0]=ne(W,E),R.mouse[1]),R.extent,s))}function Z(W){D.on("mousemove.zoom mouseup.zoom",null),kt(W.view,R.moved),nt(W),R.event(W).end()}}function I(w,...P){if(e.apply(this,arguments)){var E=this.__zoom,R=ne(w.changedTouches?w.changedTouches[0]:w,this),D=E.invert(R),L=E.k*(w.shiftKey?.5:2),$=n(A(b(E,L),R,D),r.apply(this,P),s);nt(w),l>0?X(this).transition().duration(l).call(_,$,R,w):X(this).call(m.transform,$,R,w)}}function O(w,...P){if(e.apply(this,arguments)){var E=w.touches,R=E.length,D=k(this,P,w.changedTouches.length===R).event(w),L,$,U,j;for(zr(w),$=0;$<R;++$)U=E[$],j=ne(U,this),j=[j,this.__zoom.invert(j),U.identifier],D.touch0?!D.touch1&&D.touch0[2]!==j[2]&&(D.touch1=j,D.taps=0):(D.touch0=j,L=!0,D.taps=1+!!h);h&&(h=clearTimeout(h)),L&&(D.taps<2&&(c=j[0],h=setTimeout(function(){h=null},d)),We(this),D.start())}}function T(w,...P){if(this.__zooming){var E=k(this,P).event(w),R=w.changedTouches,D=R.length,L,$,U,j;for(nt(w),L=0;L<D;++L)$=R[L],U=ne($,this),E.touch0&&E.touch0[2]===$.identifier?E.touch0[0]=U:E.touch1&&E.touch1[2]===$.identifier&&(E.touch1[0]=U);if($=E.that.__zoom,E.touch1){var Z=E.touch0[0],W=E.touch0[1],de=E.touch1[0],Ae=E.touch1[1],me=(me=de[0]-Z[0])*me+(me=de[1]-Z[1])*me,Ce=(Ce=Ae[0]-W[0])*Ce+(Ce=Ae[1]-W[1])*Ce;$=b($,Math.sqrt(me/Ce)),U=[(Z[0]+de[0])/2,(Z[1]+de[1])/2],j=[(W[0]+Ae[0])/2,(W[1]+Ae[1])/2]}else if(E.touch0)U=E.touch0[0],j=E.touch0[1];else return;E.zoom("touch",n(A($,U,j),E.extent,s))}}function q(w,...P){if(this.__zooming){var E=k(this,P).event(w),R=w.changedTouches,D=R.length,L,$;for(zr(w),p&&clearTimeout(p),p=setTimeout(function(){p=null},d),L=0;L<D;++L)$=R[L],E.touch0&&E.touch0[2]===$.identifier?delete E.touch0:E.touch1&&E.touch1[2]===$.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&($=ne($,this),Math.hypot(c[0]-$[0],c[1]-$[1])<x)){var U=X(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return m.wheelDelta=function(w){return arguments.length?(i=typeof w=="function"?w:qt(+w),m):i},m.filter=function(w){return arguments.length?(e=typeof w=="function"?w:qt(!!w),m):e},m.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:qt(!!w),m):o},m.extent=function(w){return arguments.length?(r=typeof w=="function"?w:qt([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),m):r},m.scaleExtent=function(w){return arguments.length?(a[0]=+w[0],a[1]=+w[1],m):[a[0],a[1]]},m.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(w){return arguments.length?(n=w,m):n},m.duration=function(w){return arguments.length?(l=+w,m):l},m.interpolate=function(w){return arguments.length?(u=w,m):u},m.on=function(){var w=f.on.apply(f,arguments);return w===f?m:w},m.clickDistance=function(w){return arguments.length?(y=(w=+w)*w,m):Math.sqrt(y)},m.tapDistance=function(w){return arguments.length?(x=+w,m):x},m}var it=class extends Map{constructor(r,n=Tf){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(let[i,o]of r)this.set(i,o)}get(r){return super.get(Wo(this,r))}has(r){return super.has(Wo(this,r))}set(r,n){return super.set(Of(this,r),n)}delete(r){return super.delete(zf(this,r))}};function Wo({_intern:e,_key:r},n){let i=r(n);return e.has(i)?e.get(i):n}function Of({_intern:e,_key:r},n){let i=r(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function zf({_intern:e,_key:r},n){let i=r(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function Tf(e){return e!==null&&typeof e=="object"?e.valueOf():e}function $t(e,r){let n;if(r===void 0)for(let i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let o of e)(o=r(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o)}return n}function Ut(e,r){let n;if(r===void 0)for(let i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let o of e)(o=r(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o)}return n}function Tr(e,r){let n=0;if(r===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let o of e)(o=+r(o,++i,e))&&(n+=o)}return n}var Rf=typeof global=="object"&&global&&global.Object===Object&&global,Zo=Rf;var Nf=typeof self=="object"&&self&&self.Object===Object&&self,Df=Zo||Nf||Function("return this")(),Rr=Df;var qf=Rr.Symbol,ot=qf;var Yo=Object.prototype,Lf=Yo.hasOwnProperty,$f=Yo.toString,jt=ot?ot.toStringTag:void 0;function Uf(e){var r=Lf.call(e,jt),n=e[jt];try{e[jt]=void 0;var i=!0}catch{}var o=$f.call(e);return i&&(r?e[jt]=n:delete e[jt]),o}var Xo=Uf;var jf=Object.prototype,Ff=jf.toString;function Bf(e){return Ff.call(e)}var Qo=Bf;var Hf="[object Null]",Gf="[object Undefined]",Ko=ot?ot.toStringTag:void 0;function Vf(e){return e==null?e===void 0?Gf:Hf:Ko&&Ko in Object(e)?Xo(e):Qo(e)}var Jo=Vf;function Wf(e){return e!=null&&typeof e=="object"}var ea=Wf;var Zf="[object Symbol]";function Yf(e){return typeof e=="symbol"||ea(e)&&Jo(e)==Zf}var ta=Yf;var Xf=/\s/;function Qf(e){for(var r=e.length;r--&&Xf.test(e.charAt(r)););return r}var ra=Qf;var Kf=/^\s+/;function Jf(e){return e&&e.slice(0,ra(e)+1).replace(Kf,"")}var na=Jf;function ec(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Ze=ec;var ia=NaN,tc=/^[-+]0x[0-9a-f]+$/i,rc=/^0b[01]+$/i,nc=/^0o[0-7]+$/i,ic=parseInt;function oc(e){if(typeof e=="number")return e;if(ta(e))return ia;if(Ze(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Ze(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=na(e);var n=rc.test(e);return n||nc.test(e)?ic(e.slice(2),n?2:8):tc.test(e)?ia:+e}var mn=oc;var ac=function(){return Rr.Date.now()},Nr=ac;var sc="Expected a function",lc=Math.max,uc=Math.min;function fc(e,r,n){var i,o,a,s,l,u,f=0,h=!1,c=!1,p=!0;if(typeof e!="function")throw new TypeError(sc);r=mn(r)||0,Ze(n)&&(h=!!n.leading,c="maxWait"in n,a=c?lc(mn(n.maxWait)||0,r):a,p="trailing"in n?!!n.trailing:p);function d(k){var S=i,C=o;return i=o=void 0,f=k,s=e.apply(C,S),s}function g(k){return f=k,l=setTimeout(m,r),h?d(k):s}function y(k){var S=k-u,C=k-f,z=r-S;return c?uc(z,a-C):z}function x(k){var S=k-u,C=k-f;return u===void 0||S>=r||S<0||c&&C>=a}function m(){var k=Nr();if(x(k))return b(k);l=setTimeout(m,y(k))}function b(k){return l=void 0,p&&i?d(k):(i=o=void 0,s)}function A(){l!==void 0&&clearTimeout(l),f=0,i=u=o=l=void 0}function v(){return l===void 0?s:b(Nr())}function _(){var k=Nr(),S=x(k);if(i=arguments,o=this,u=k,S){if(l===void 0)return g(u);if(c)return clearTimeout(l),l=setTimeout(m,r),d(u)}return l===void 0&&(l=setTimeout(m,r)),s}return _.cancel=A,_.flush=v,_}var Dr=fc;var cc="Expected a function";function hc(e,r,n){var i=!0,o=!0;if(typeof e!="function")throw new TypeError(cc);return Ze(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Dr(e,r,{leading:i,maxWait:r,trailing:o})}var gn=hc;var $e=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var r=1.70158;return e===1?1:e*e*((r+1)*e-r)},Out:function(e){var r=1.70158;return e===0?0:--e*e*((r+1)*e+r)+1},InOut:function(e){var r=2.5949095;return(e*=2)<1?.5*(e*e*((r+1)*e-r)):.5*((e-=2)*e*((r+1)*e+r)+2)}}),Bounce:Object.freeze({In:function(e){return 1-$e.Bounce.Out(1-e)},Out:function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375},InOut:function(e){return e<.5?$e.Bounce.In(e*2)*.5:$e.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(r){return Math.pow(r,e)},Out:function(r){return 1-Math.pow(1-r,e)},InOut:function(r){return r<.5?Math.pow(r*2,e)/2:(1-Math.pow(2-r*2,e))/2+.5}}}}),Ft=function(){return performance.now()},yn=(function(){function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,r)}return e.prototype.getAll=function(){var r=this;return Object.keys(this._tweens).map(function(n){return r._tweens[n]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];for(var o=0,a=n;o<a.length;o++){var s=a[o];(r=s._group)===null||r===void 0||r.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},e.prototype.remove=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var i=0,o=r;i<o.length;i++){var a=o[i];a._group=void 0,delete this._tweens[a.getId()],delete this._tweensAddedDuringUpdate[a.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(r){return!r.isPlaying()})},e.prototype.update=function(r,n){r===void 0&&(r=Ft()),n===void 0&&(n=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var a=this._tweens[i[o]],s=!n;a&&a.update(r,s)===!1&&!n&&this.remove(a)}i=Object.keys(this._tweensAddedDuringUpdate)}},e})(),at={Linear:function(e,r){var n=e.length-1,i=n*r,o=Math.floor(i),a=at.Utils.Linear;return r<0?a(e[0],e[1],i):r>1?a(e[n],e[n-1],n-i):a(e[o],e[o+1>n?n:o+1],i-o)},Bezier:function(e,r){for(var n=0,i=e.length-1,o=Math.pow,a=at.Utils.Bernstein,s=0;s<=i;s++)n+=o(1-r,i-s)*o(r,s)*e[s]*a(i,s);return n},CatmullRom:function(e,r){var n=e.length-1,i=n*r,o=Math.floor(i),a=at.Utils.CatmullRom;return e[0]===e[n]?(r<0&&(o=Math.floor(i=n*(1+r))),a(e[(o-1+n)%n],e[o],e[(o+1)%n],e[(o+2)%n],i-o)):r<0?e[0]-(a(e[0],e[0],e[1],e[1],-i)-e[0]):r>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):a(e[o?o-1:0],e[o],e[n<o+1?n:o+1],e[n<o+2?n:o+2],i-o)},Utils:{Linear:function(e,r,n){return(r-e)*n+e},Bernstein:function(e,r){var n=at.Utils.Factorial;return n(e)/n(r)/n(e-r)},Factorial:(function(){var e=[1];return function(r){var n=1;if(e[r])return e[r];for(var i=r;i>1;i--)n*=i;return e[r]=n,n}})(),CatmullRom:function(e,r,n,i,o){var a=(n-e)*.5,s=(i-r)*.5,l=o*o,u=o*l;return(2*r-2*n+a+s)*u+(-3*r+3*n-2*a-s)*l+a*o+r}}},oa=(function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e})(),xn=new yn,vn=(function(){function e(r,n){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=$e.Linear.None,this._interpolationFunction=at.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=oa.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=r,typeof n=="object"?(this._group=n,n.add(this)):n===!0&&(this._group=xn,xn.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(r,n){if(n===void 0&&(n=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=r,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},e.prototype.duration=function(r){return r===void 0&&(r=1e3),this._duration=r<0?0:r,this},e.prototype.dynamic=function(r){return r===void 0&&(r=!1),this._isDynamic=r,this},e.prototype.start=function(r,n){if(r===void 0&&(r=Ft()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=r,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var a in this._valuesEnd)o[a]=this._valuesEnd[a];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},e.prototype.startFromCurrentValues=function(r){return this.start(r,!0)},e.prototype._setupProperties=function(r,n,i,o,a){for(var s in i){var l=r[s],u=Array.isArray(l),f=u?"array":typeof l,h=!u&&Array.isArray(i[s]);if(!(f==="undefined"||f==="function")){if(h){var c=i[s];if(c.length===0)continue;for(var p=[l],d=0,g=c.length;d<g;d+=1){var y=this._handleRelativeValue(l,c[d]);if(isNaN(y)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}p.push(y)}h&&(i[s]=p)}if((f==="object"||u)&&l&&!h){n[s]=u?[]:{};var x=l;for(var m in x)n[s][m]=x[m];o[s]=u?[]:{};var c=i[s];if(!this._isDynamic){var b={};for(var m in c)b[m]=c[m];i[s]=c=b}this._setupProperties(x,n[s],c,o[s],a)}else(typeof n[s]>"u"||a)&&(n[s]=l),u||(n[s]*=1),h?o[s]=i[s].slice().reverse():o[s]=n[s]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(r){return r===void 0&&(r=Ft()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=r,this)},e.prototype.resume=function(r){return r===void 0&&(r=Ft()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=r-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var r=0,n=this._chainedTweens.length;r<n;r++)this._chainedTweens[r].stop();return this},e.prototype.group=function(r){return r?(r.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var r;return(r=this._group)===null||r===void 0||r.remove(this),this},e.prototype.delay=function(r){return r===void 0&&(r=0),this._delayTime=r,this},e.prototype.repeat=function(r){return r===void 0&&(r=0),this._initialRepeat=r,this._repeat=r,this},e.prototype.repeatDelay=function(r){return this._repeatDelayTime=r,this},e.prototype.yoyo=function(r){return r===void 0&&(r=!1),this._yoyo=r,this},e.prototype.easing=function(r){return r===void 0&&(r=$e.Linear.None),this._easingFunction=r,this},e.prototype.interpolation=function(r){return r===void 0&&(r=at.Linear),this._interpolationFunction=r,this},e.prototype.chain=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return this._chainedTweens=r,this},e.prototype.onStart=function(r){return this._onStartCallback=r,this},e.prototype.onEveryStart=function(r){return this._onEveryStartCallback=r,this},e.prototype.onUpdate=function(r){return this._onUpdateCallback=r,this},e.prototype.onRepeat=function(r){return this._onRepeatCallback=r,this},e.prototype.onComplete=function(r){return this._onCompleteCallback=r,this},e.prototype.onStop=function(r){return this._onStopCallback=r,this},e.prototype.update=function(r,n){var i=this,o;if(r===void 0&&(r=Ft()),n===void 0&&(n=e.autoStartOnUpdate),this._isPaused)return!0;var a;if(!this._goToEnd&&!this._isPlaying)if(n)this.start(r,!0);else return!1;if(this._goToEnd=!1,r<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=r-this._startTime,l=this._duration+((o=this._repeatDelayTime)!==null&&o!==void 0?o:this._delayTime),u=this._duration+this._repeat*l,f=function(){if(i._duration===0||s>u)return 1;var y=Math.trunc(s/l),x=s-y*l,m=Math.min(x/i._duration,1);return m===0&&s===i._duration?1:m},h=f(),c=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,c),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||s>=this._duration)if(this._repeat>0){var p=Math.min(Math.trunc((s-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=p);for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*p,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,g=this._chainedTweens.length;d<g;d++)this._chainedTweens[d].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(r,n,i,o){for(var a in i)if(n[a]!==void 0){var s=n[a]||0,l=i[a],u=Array.isArray(r[a]),f=Array.isArray(l),h=!u&&f;h?r[a]=this._interpolationFunction(l,o):typeof l=="object"&&l?this._updateProperties(r[a],s,l,o):(l=this._handleRelativeValue(s,l),typeof l=="number"&&(r[a]=s+(l-s)*o))}},e.prototype._handleRelativeValue=function(r,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?r+parseFloat(n):parseFloat(n)},e.prototype._swapEndStartRepeatValues=function(r){var n=this._valuesStartRepeat[r],i=this._valuesEnd[r];typeof i=="string"?this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(i):this._valuesStartRepeat[r]=this._valuesEnd[r],this._valuesEnd[r]=n},e.autoStartOnUpdate=!1,e})();var Gy=oa.nextId,ke=xn,Vy=ke.getAll.bind(ke),Wy=ke.removeAll.bind(ke),Zy=ke.add.bind(ke),Yy=ke.remove.bind(ke),Xy=ke.update.bind(ke);function aa(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,i=Array(r);n<r;n++)i[n]=e[n];return i}function pc(e){if(Array.isArray(e))return e}function dc(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function mc(e,r,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function gc(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,a,s,l=[],u=!0,f=!1;try{if(a=(n=n.call(e)).next,r!==0)for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==r);u=!0);}catch(h){f=!0,o=h}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(f)throw o}}return l}}function xc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yc(e,r){return pc(e)||gc(e,r)||vc(e,r)||xc()}function vc(e,r){if(e){if(typeof e=="string")return aa(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,r):void 0}}var _c=mc(function e(r,n){var i=n.default,o=i===void 0?null:i,a=n.triggerUpdate,s=a===void 0?!0:a,l=n.onChange,u=l===void 0?function(f,h){}:l;dc(this,e),this.name=r,this.defaultVal=o,this.triggerUpdate=s,this.onChange=u});function Bt(e){var r=e.stateInit,n=r===void 0?function(){return{}}:r,i=e.props,o=i===void 0?{}:i,a=e.methods,s=a===void 0?{}:a,l=e.aliases,u=l===void 0?{}:l,f=e.init,h=f===void 0?function(){}:f,c=e.update,p=c===void 0?function(){}:c,d=Object.keys(o).map(function(g){return new _c(g,o[g])});return function g(){for(var y=arguments.length,x=new Array(y),m=0;m<y;m++)x[m]=arguments[m];var b=!!(this instanceof g&&this.constructor),A=b?x.shift():void 0,v=x[0],_=v===void 0?{}:v,k=Object.assign({},n instanceof Function?n(_):n,{initialised:!1}),S={};function C(O){return z(O,_),I(),C}var z=function(T,q){h.call(C,T,k,q),k.initialised=!0},I=Dr(function(){k.initialised&&(p.call(C,k,S),S={})},1);return d.forEach(function(O){C[O.name]=T(O);function T(q){var w=q.name,P=q.triggerUpdate,E=P===void 0?!1:P,R=q.onChange,D=R===void 0?function(U,j){}:R,L=q.defaultVal,$=L===void 0?null:L;return function(U){var j=k[w];if(!arguments.length)return j;var Z=U===void 0?$:U;return k[w]=Z,D.call(C,Z,k,j),!S.hasOwnProperty(w)&&(S[w]=j),E&&I(),C}}}),Object.keys(s).forEach(function(O){C[O]=function(){for(var T,q=arguments.length,w=new Array(q),P=0;P<q;P++)w[P]=arguments[P];return(T=s[O]).call.apply(T,[C,k].concat(w))}}),Object.entries(u).forEach(function(O){var T=yc(O,2),q=T[0],w=T[1];return C[q]=C[w]}),C.resetProps=function(){return d.forEach(function(O){C[O.name](O.defaultVal)}),C},C.resetProps(),k._rerender=I,b&&A&&C(A),C}}var F=(function(e){return typeof e=="function"?e:typeof e=="string"?function(r){return r[e]}:function(r){return e}});function qr(e){"@babel/helpers - typeof";return qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qr(e)}var bc=/^\s+/,wc=/\s+$/;function N(e,r){if(e=e||"",r=r||{},e instanceof N)return e;if(!(this instanceof N))return new N(e,r);var n=kc(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=r.format||n.format,this._gradientType=r.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}N.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},getLuminance:function(){var r=this.toRgb(),n,i,o,a,s,l;return n=r.r/255,i=r.g/255,o=r.b/255,n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),o<=.03928?l=o/12.92:l=Math.pow((o+.055)/1.055,2.4),.2126*a+.7152*s+.0722*l},setAlpha:function(r){return this._a=pa(r),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var r=la(this._r,this._g,this._b);return{h:r.h*360,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=la(this._r,this._g,this._b),n=Math.round(r.h*360),i=Math.round(r.s*100),o=Math.round(r.v*100);return this._a==1?"hsv("+n+", "+i+"%, "+o+"%)":"hsva("+n+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var r=sa(this._r,this._g,this._b);return{h:r.h*360,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=sa(this._r,this._g,this._b),n=Math.round(r.h*360),i=Math.round(r.s*100),o=Math.round(r.l*100);return this._a==1?"hsl("+n+", "+i+"%, "+o+"%)":"hsla("+n+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(r){return ua(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){return Ec(this._r,this._g,this._b,this._a,r)},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(H(this._r,255)*100)+"%",g:Math.round(H(this._g,255)*100)+"%",b:Math.round(H(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(H(this._r,255)*100)+"%, "+Math.round(H(this._g,255)*100)+"%, "+Math.round(H(this._b,255)*100)+"%)":"rgba("+Math.round(H(this._r,255)*100)+"%, "+Math.round(H(this._g,255)*100)+"%, "+Math.round(H(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:$c[ua(this._r,this._g,this._b,!0)]||!1},toFilter:function(r){var n="#"+fa(this._r,this._g,this._b,this._a),i=n,o=this._gradientType?"GradientType = 1, ":"";if(r){var a=N(r);i="#"+fa(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+n+",endColorstr="+i+")"},toString:function(r){var n=!!r;r=r||this._format;var i=!1,o=this._a<1&&this._a>=0,a=!n&&o&&(r==="hex"||r==="hex6"||r==="hex3"||r==="hex4"||r==="hex8"||r==="name");return a?r==="name"&&this._a===0?this.toName():this.toRgbString():(r==="rgb"&&(i=this.toRgbString()),r==="prgb"&&(i=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(i=this.toHexString()),r==="hex3"&&(i=this.toHexString(!0)),r==="hex4"&&(i=this.toHex8String(!0)),r==="hex8"&&(i=this.toHex8String()),r==="name"&&(i=this.toName()),r==="hsl"&&(i=this.toHslString()),r==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return N(this.toString())},_applyModification:function(r,n){var i=r.apply(null,[this].concat([].slice.call(n)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Oc,arguments)},brighten:function(){return this._applyModification(zc,arguments)},darken:function(){return this._applyModification(Tc,arguments)},desaturate:function(){return this._applyModification(Mc,arguments)},saturate:function(){return this._applyModification(Ic,arguments)},greyscale:function(){return this._applyModification(Pc,arguments)},spin:function(){return this._applyModification(Rc,arguments)},_applyCombination:function(r,n){return r.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(qc,arguments)},complement:function(){return this._applyCombination(Nc,arguments)},monochromatic:function(){return this._applyCombination(Lc,arguments)},splitcomplement:function(){return this._applyCombination(Dc,arguments)},triad:function(){return this._applyCombination(ca,[3])},tetrad:function(){return this._applyCombination(ca,[4])}};N.fromRatio=function(e,r){if(qr(e)=="object"){var n={};for(var i in e)e.hasOwnProperty(i)&&(i==="a"?n[i]=e[i]:n[i]=Ht(e[i]));e=n}return N(e,r)};function kc(e){var r={r:0,g:0,b:0},n=1,i=null,o=null,a=null,s=!1,l=!1;return typeof e=="string"&&(e=Bc(e)),qr(e)=="object"&&(Oe(e.r)&&Oe(e.g)&&Oe(e.b)?(r=Sc(e.r,e.g,e.b),s=!0,l=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Oe(e.h)&&Oe(e.s)&&Oe(e.v)?(i=Ht(e.s),o=Ht(e.v),r=Cc(e.h,i,o),s=!0,l="hsv"):Oe(e.h)&&Oe(e.s)&&Oe(e.l)&&(i=Ht(e.s),a=Ht(e.l),r=Ac(e.h,i,a),s=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=pa(n),{ok:s,format:e.format||l,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:n}}function Sc(e,r,n){return{r:H(e,255)*255,g:H(r,255)*255,b:H(n,255)*255}}function sa(e,r,n){e=H(e,255),r=H(r,255),n=H(n,255);var i=Math.max(e,r,n),o=Math.min(e,r,n),a,s,l=(i+o)/2;if(i==o)a=s=0;else{var u=i-o;switch(s=l>.5?u/(2-i-o):u/(i+o),i){case e:a=(r-n)/u+(r<n?6:0);break;case r:a=(n-e)/u+2;break;case n:a=(e-r)/u+4;break}a/=6}return{h:a,s,l}}function Ac(e,r,n){var i,o,a;e=H(e,360),r=H(r,100),n=H(n,100);function s(f,h,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?f+(h-f)*6*c:c<1/2?h:c<2/3?f+(h-f)*(2/3-c)*6:f}if(r===0)i=o=a=n;else{var l=n<.5?n*(1+r):n+r-n*r,u=2*n-l;i=s(u,l,e+1/3),o=s(u,l,e),a=s(u,l,e-1/3)}return{r:i*255,g:o*255,b:a*255}}function la(e,r,n){e=H(e,255),r=H(r,255),n=H(n,255);var i=Math.max(e,r,n),o=Math.min(e,r,n),a,s,l=i,u=i-o;if(s=i===0?0:u/i,i==o)a=0;else{switch(i){case e:a=(r-n)/u+(r<n?6:0);break;case r:a=(n-e)/u+2;break;case n:a=(e-r)/u+4;break}a/=6}return{h:a,s,v:l}}function Cc(e,r,n){e=H(e,360)*6,r=H(r,100),n=H(n,100);var i=Math.floor(e),o=e-i,a=n*(1-r),s=n*(1-o*r),l=n*(1-(1-o)*r),u=i%6,f=[n,s,a,a,l,n][u],h=[l,n,n,s,a,a][u],c=[a,a,l,n,n,s][u];return{r:f*255,g:h*255,b:c*255}}function ua(e,r,n,i){var o=[_e(Math.round(e).toString(16)),_e(Math.round(r).toString(16)),_e(Math.round(n).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function Ec(e,r,n,i,o){var a=[_e(Math.round(e).toString(16)),_e(Math.round(r).toString(16)),_e(Math.round(n).toString(16)),_e(da(i))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function fa(e,r,n,i){var o=[_e(da(i)),_e(Math.round(e).toString(16)),_e(Math.round(r).toString(16)),_e(Math.round(n).toString(16))];return o.join("")}N.equals=function(e,r){return!e||!r?!1:N(e).toRgbString()==N(r).toRgbString()};N.random=function(){return N.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Mc(e,r){r=r===0?0:r||10;var n=N(e).toHsl();return n.s-=r/100,n.s=Lr(n.s),N(n)}function Ic(e,r){r=r===0?0:r||10;var n=N(e).toHsl();return n.s+=r/100,n.s=Lr(n.s),N(n)}function Pc(e){return N(e).desaturate(100)}function Oc(e,r){r=r===0?0:r||10;var n=N(e).toHsl();return n.l+=r/100,n.l=Lr(n.l),N(n)}function zc(e,r){r=r===0?0:r||10;var n=N(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(r/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(r/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(r/100)))),N(n)}function Tc(e,r){r=r===0?0:r||10;var n=N(e).toHsl();return n.l-=r/100,n.l=Lr(n.l),N(n)}function Rc(e,r){var n=N(e).toHsl(),i=(n.h+r)%360;return n.h=i<0?360+i:i,N(n)}function Nc(e){var r=N(e).toHsl();return r.h=(r.h+180)%360,N(r)}function ca(e,r){if(isNaN(r)||r<=0)throw new Error("Argument to polyad must be a positive number");for(var n=N(e).toHsl(),i=[N(e)],o=360/r,a=1;a<r;a++)i.push(N({h:(n.h+a*o)%360,s:n.s,l:n.l}));return i}function Dc(e){var r=N(e).toHsl(),n=r.h;return[N(e),N({h:(n+72)%360,s:r.s,l:r.l}),N({h:(n+216)%360,s:r.s,l:r.l})]}function qc(e,r,n){r=r||6,n=n||30;var i=N(e).toHsl(),o=360/n,a=[N(e)];for(i.h=(i.h-(o*r>>1)+720)%360;--r;)i.h=(i.h+o)%360,a.push(N(i));return a}function Lc(e,r){r=r||6;for(var n=N(e).toHsv(),i=n.h,o=n.s,a=n.v,s=[],l=1/r;r--;)s.push(N({h:i,s:o,v:a})),a=(a+l)%1;return s}N.mix=function(e,r,n){n=n===0?0:n||50;var i=N(e).toRgb(),o=N(r).toRgb(),a=n/100,s={r:(o.r-i.r)*a+i.r,g:(o.g-i.g)*a+i.g,b:(o.b-i.b)*a+i.b,a:(o.a-i.a)*a+i.a};return N(s)};N.readability=function(e,r){var n=N(e),i=N(r);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)};N.isReadable=function(e,r,n){var i=N.readability(e,r),o,a;switch(a=!1,o=Hc(n),o.level+o.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7;break}return a};N.mostReadable=function(e,r,n){var i=null,o=0,a,s,l,u;n=n||{},s=n.includeFallbackColors,l=n.level,u=n.size;for(var f=0;f<r.length;f++)a=N.readability(e,r[f]),a>o&&(o=a,i=N(r[f]));return N.isReadable(e,i,{level:l,size:u})||!s?i:(n.includeFallbackColors=!1,N.mostReadable(e,["#fff","#000"],n))};var _n=N.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},$c=N.hexNames=Uc(_n);function Uc(e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[e[n]]=n);return r}function pa(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function H(e,r){jc(e)&&(e="100%");var n=Fc(e);return e=Math.min(r,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*r,10)/100),Math.abs(e-r)<1e-6?1:e%r/parseFloat(r)}function Lr(e){return Math.min(1,Math.max(0,e))}function se(e){return parseInt(e,16)}function jc(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function Fc(e){return typeof e=="string"&&e.indexOf("%")!=-1}function _e(e){return e.length==1?"0"+e:""+e}function Ht(e){return e<=1&&(e=e*100+"%"),e}function da(e){return Math.round(parseFloat(e)*255).toString(16)}function ha(e){return se(e)/255}var ve=(function(){var e="[-\\+]?\\d+%?",r="[-\\+]?\\d*\\.\\d+%?",n="(?:"+r+")|(?:"+e+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",o="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Oe(e){return!!ve.CSS_UNIT.exec(e)}function Bc(e){e=e.replace(bc,"").replace(wc,"").toLowerCase();var r=!1;if(_n[e])e=_n[e],r=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=ve.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=ve.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ve.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=ve.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ve.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=ve.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ve.hex8.exec(e))?{r:se(n[1]),g:se(n[2]),b:se(n[3]),a:ha(n[4]),format:r?"name":"hex8"}:(n=ve.hex6.exec(e))?{r:se(n[1]),g:se(n[2]),b:se(n[3]),format:r?"name":"hex"}:(n=ve.hex4.exec(e))?{r:se(n[1]+""+n[1]),g:se(n[2]+""+n[2]),b:se(n[3]+""+n[3]),a:ha(n[4]+""+n[4]),format:r?"name":"hex8"}:(n=ve.hex3.exec(e))?{r:se(n[1]+""+n[1]),g:se(n[2]+""+n[2]),b:se(n[3]+""+n[3]),format:r?"name":"hex"}:!1}function Hc(e){var r,n;return e=e||{level:"AA",size:"small"},r=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),r!=="AA"&&r!=="AAA"&&(r="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:r,size:n}}function bn(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,i=Array(r);n<r;n++)i[n]=e[n];return i}function Gc(e){if(Array.isArray(e))return bn(e)}function ya(e,r,n){if(typeof e=="function"?e===r:e.has(r))return arguments.length<3?r:n;throw new TypeError("Private element is not present on this object")}function Vc(e,r){if(r.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wc(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ue(e,r){return e.get(ya(e,r))}function ma(e,r,n){Vc(e,r),r.set(e,n)}function ga(e,r,n){return e.set(ya(e,r),n),n}function Zc(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,eh(i.key),i)}}function Yc(e,r,n){return r&&Zc(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xc(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kc(e){return Gc(e)||Xc(e)||th(e)||Qc()}function Jc(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function eh(e){var r=Jc(e,"string");return typeof r=="symbol"?r:r+""}function th(e,r){if(e){if(typeof e=="string")return bn(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bn(e,r):void 0}}var rh=123,nh=function(r){return"#".concat(Math.min(r,Math.pow(2,24)).toString(16).padStart(6,"0"))},va=function(r,n,i){return(r<<16)+(n<<8)+i},ih=function(r){var n=N(r).toRgb(),i=n.r,o=n.g,a=n.b;return va(i,o,a)},xa=function(r,n){return r*rh%Math.pow(2,n)},Ye=new WeakMap,ze=new WeakMap,_a=(function(){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;Wc(this,e),ma(this,Ye,void 0),ma(this,ze,void 0),ga(ze,this,r),this.reset()}return Yc(e,[{key:"reset",value:function(){ga(Ye,this,["__reserved for background__"])}},{key:"register",value:function(n){if(ue(Ye,this).length>=Math.pow(2,24-ue(ze,this)))return null;var i=ue(Ye,this).length,o=xa(i,ue(ze,this)),a=nh(i+(o<<24-ue(ze,this)));return ue(Ye,this).push(n),a}},{key:"lookup",value:function(n){if(!n)return null;var i=typeof n=="string"?ih(n):va.apply(void 0,Kc(n));if(!i)return null;var o=i&Math.pow(2,24-ue(ze,this))-1,a=i>>24-ue(ze,this)&Math.pow(2,ue(ze,this))-1;return xa(o,ue(ze,this))!==a||o>=ue(Ye,this).length?null:ue(Ye,this)[o]}}])})();var Wt,G,Aa,An,Xe,ba,Ca,Ea,Ma,Cn,wn,kn,oh,Vt={},Ia=[],ah=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Fr=Array.isArray;function Se(e,r){for(var n in r)e[n]=r[n];return e}function En(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function sh(e,r,n){var i,o,a,s={};for(a in r)a=="key"?i=r[a]:a=="ref"?o=r[a]:s[a]=r[a];if(arguments.length>2&&(s.children=arguments.length>3?Wt.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return Gt(e,s,i,o,null)}function Gt(e,r,n,i,o){var a={type:e,props:r,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Aa,__i:-1,__u:0};return o==null&&G.vnode!=null&&G.vnode(a),a}function Br(e){return e.children}function Ur(e,r){this.props=e,this.context=r}function st(e,r){if(r==null)return e.__?st(e.__,e.__i+1):null;for(var n;r<e.__k.length;r++)if((n=e.__k[r])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?st(e):null}function Pa(e){var r,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((n=e.__k[r])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Pa(e)}}function wa(e){(!e.__d&&(e.__d=!0)&&Xe.push(e)&&!jr.__r++||ba!=G.debounceRendering)&&((ba=G.debounceRendering)||Ca)(jr)}function jr(){for(var e,r,n,i,o,a,s,l=1;Xe.length;)Xe.length>l&&Xe.sort(Ea),e=Xe.shift(),l=Xe.length,e.__d&&(n=void 0,i=void 0,o=(i=(r=e).__v).__e,a=[],s=[],r.__P&&((n=Se({},i)).__v=i.__v+1,G.vnode&&G.vnode(n),Mn(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[o]:null,a,o??st(i),!!(32&i.__u),s),n.__v=i.__v,n.__.__k[n.__i]=n,Ta(a,n,s),i.__e=i.__=null,n.__e!=o&&Pa(n)));jr.__r=0}function Oa(e,r,n,i,o,a,s,l,u,f,h){var c,p,d,g,y,x,m,b=i&&i.__k||Ia,A=r.length;for(u=lh(n,r,b,u,A),c=0;c<A;c++)(d=n.__k[c])!=null&&(p=d.__i==-1?Vt:b[d.__i]||Vt,d.__i=c,x=Mn(e,d,p,o,a,s,l,u,f,h),g=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&In(p.ref,null,d),h.push(d.ref,d.__c||g,d)),y==null&&g!=null&&(y=g),(m=!!(4&d.__u))||p.__k===d.__k?u=za(d,u,e,m):typeof d.type=="function"&&x!==void 0?u=x:g&&(u=g.nextSibling),d.__u&=-7);return n.__e=y,u}function lh(e,r,n,i,o){var a,s,l,u,f,h=n.length,c=h,p=0;for(e.__k=new Array(o),a=0;a<o;a++)(s=r[a])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[a]=Gt(null,s,null,null,null):Fr(s)?s=e.__k[a]=Gt(Br,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[a]=Gt(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[a]=s,u=a+p,s.__=e,s.__b=e.__b+1,l=null,(f=s.__i=uh(s,n,u,c))!=-1&&(c--,(l=n[f])&&(l.__u|=2)),l==null||l.__v==null?(f==-1&&(o>h?p--:o<h&&p++),typeof s.type!="function"&&(s.__u|=4)):f!=u&&(f==u-1?p--:f==u+1?p++:(f>u?p--:p++,s.__u|=4))):e.__k[a]=null;if(c)for(a=0;a<h;a++)(l=n[a])!=null&&(2&l.__u)==0&&(l.__e==i&&(i=st(l)),Na(l,l));return i}function za(e,r,n,i){var o,a;if(typeof e.type=="function"){for(o=e.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=e,r=za(o[a],r,n,i));return r}e.__e!=r&&(i&&(r&&e.type&&!r.parentNode&&(r=st(e)),n.insertBefore(e.__e,r||null)),r=e.__e);do r=r&&r.nextSibling;while(r!=null&&r.nodeType==8);return r}function uh(e,r,n,i){var o,a,s,l=e.key,u=e.type,f=r[n],h=f!=null&&(2&f.__u)==0;if(f===null&&l==null||h&&l==f.key&&u==f.type)return n;if(i>(h?1:0)){for(o=n-1,a=n+1;o>=0||a<r.length;)if((f=r[s=o>=0?o--:a++])!=null&&(2&f.__u)==0&&l==f.key&&u==f.type)return s}return-1}function ka(e,r,n){r[0]=="-"?e.setProperty(r,n??""):e[r]=n==null?"":typeof n!="number"||ah.test(r)?n:n+"px"}function $r(e,r,n,i,o){var a,s;e:if(r=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(r in i)n&&r in n||ka(e.style,r,"");if(n)for(r in n)i&&n[r]==i[r]||ka(e.style,r,n[r])}else if(r[0]=="o"&&r[1]=="n")a=r!=(r=r.replace(Ma,"$1")),s=r.toLowerCase(),r=s in e||r=="onFocusOut"||r=="onFocusIn"?s.slice(2):r.slice(2),e.l||(e.l={}),e.l[r+a]=n,n?i?n.u=i.u:(n.u=Cn,e.addEventListener(r,a?kn:wn,a)):e.removeEventListener(r,a?kn:wn,a);else{if(o=="http://www.w3.org/2000/svg")r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!="width"&&r!="height"&&r!="href"&&r!="list"&&r!="form"&&r!="tabIndex"&&r!="download"&&r!="rowSpan"&&r!="colSpan"&&r!="role"&&r!="popover"&&r in e)try{e[r]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&r[4]!="-"?e.removeAttribute(r):e.setAttribute(r,r=="popover"&&n==1?"":n))}}function Sa(e){return function(r){if(this.l){var n=this.l[r.type+e];if(r.t==null)r.t=Cn++;else if(r.t<n.u)return;return n(G.event?G.event(r):r)}}}function Mn(e,r,n,i,o,a,s,l,u,f){var h,c,p,d,g,y,x,m,b,A,v,_,k,S,C,z,I,O=r.type;if(r.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),a=[l=r.__e=n.__e]),(h=G.__b)&&h(r);e:if(typeof O=="function")try{if(m=r.props,b="prototype"in O&&O.prototype.render,A=(h=O.contextType)&&i[h.__c],v=h?A?A.props.value:h.__:i,n.__c?x=(c=r.__c=n.__c).__=c.__E:(b?r.__c=c=new O(m,v):(r.__c=c=new Ur(m,v),c.constructor=O,c.render=ch),A&&A.sub(c),c.state||(c.state={}),c.__n=i,p=c.__d=!0,c.__h=[],c._sb=[]),b&&c.__s==null&&(c.__s=c.state),b&&O.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Se({},c.__s)),Se(c.__s,O.getDerivedStateFromProps(m,c.__s))),d=c.props,g=c.state,c.__v=r,p)b&&O.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),b&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(b&&O.getDerivedStateFromProps==null&&m!==d&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(m,v),r.__v==n.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(m,c.__s,v)===!1){for(r.__v!=n.__v&&(c.props=m,c.state=c.__s,c.__d=!1),r.__e=n.__e,r.__k=n.__k,r.__k.some(function(T){T&&(T.__=r)}),_=0;_<c._sb.length;_++)c.__h.push(c._sb[_]);c._sb=[],c.__h.length&&s.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(m,c.__s,v),b&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(d,g,y)})}if(c.context=v,c.props=m,c.__P=e,c.__e=!1,k=G.__r,S=0,b){for(c.state=c.__s,c.__d=!1,k&&k(r),h=c.render(c.props,c.state,c.context),C=0;C<c._sb.length;C++)c.__h.push(c._sb[C]);c._sb=[]}else do c.__d=!1,k&&k(r),h=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++S<25);c.state=c.__s,c.getChildContext!=null&&(i=Se(Se({},i),c.getChildContext())),b&&!p&&c.getSnapshotBeforeUpdate!=null&&(y=c.getSnapshotBeforeUpdate(d,g)),z=h,h!=null&&h.type===Br&&h.key==null&&(z=Ra(h.props.children)),l=Oa(e,Fr(z)?z:[z],r,n,i,o,a,s,l,u,f),c.base=r.__e,r.__u&=-161,c.__h.length&&s.push(c),x&&(c.__E=c.__=null)}catch(T){if(r.__v=null,u||a!=null)if(T.then){for(r.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,r.__e=l}else{for(I=a.length;I--;)En(a[I]);Sn(r)}else r.__e=n.__e,r.__k=n.__k,T.then||Sn(r);G.__e(T,r,n)}else a==null&&r.__v==n.__v?(r.__k=n.__k,r.__e=n.__e):l=r.__e=fh(n.__e,r,n,i,o,a,s,u,f);return(h=G.diffed)&&h(r),128&r.__u?void 0:l}function Sn(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Sn)}function Ta(e,r,n){for(var i=0;i<n.length;i++)In(n[i],n[++i],n[++i]);G.__c&&G.__c(r,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(a){a.call(o)})}catch(a){G.__e(a,o.__v)}})}function Ra(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Fr(e)?e.map(Ra):Se({},e)}function fh(e,r,n,i,o,a,s,l,u){var f,h,c,p,d,g,y,x=n.props||Vt,m=r.props,b=r.type;if(b=="svg"?o="http://www.w3.org/2000/svg":b=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(f=0;f<a.length;f++)if((d=a[f])&&"setAttribute"in d==!!b&&(b?d.localName==b:d.nodeType==3)){e=d,a[f]=null;break}}if(e==null){if(b==null)return document.createTextNode(m);e=document.createElementNS(o,b,m.is&&m),l&&(G.__m&&G.__m(r,a),l=!1),a=null}if(b==null)x===m||l&&e.data==m||(e.data=m);else{if(a=a&&Wt.call(e.childNodes),!l&&a!=null)for(x={},f=0;f<e.attributes.length;f++)x[(d=e.attributes[f]).name]=d.value;for(f in x)if(d=x[f],f!="children"){if(f=="dangerouslySetInnerHTML")c=d;else if(!(f in m)){if(f=="value"&&"defaultValue"in m||f=="checked"&&"defaultChecked"in m)continue;$r(e,f,null,d,o)}}for(f in m)d=m[f],f=="children"?p=d:f=="dangerouslySetInnerHTML"?h=d:f=="value"?g=d:f=="checked"?y=d:l&&typeof d!="function"||x[f]===d||$r(e,f,d,x[f],o);if(h)l||c&&(h.__html==c.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),r.__k=[];else if(c&&(e.innerHTML=""),Oa(r.type=="template"?e.content:e,Fr(p)?p:[p],r,n,i,b=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,s,a?a[0]:n.__k&&st(n,0),l,u),a!=null)for(f=a.length;f--;)En(a[f]);l||(f="value",b=="progress"&&g==null?e.removeAttribute("value"):g!=null&&(g!==e[f]||b=="progress"&&!g||b=="option"&&g!=x[f])&&$r(e,f,g,x[f],o),f="checked",y!=null&&y!=e[f]&&$r(e,f,y,x[f],o))}return e}function In(e,r,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&r==null||(e.__u=e(r))}else e.current=r}catch(o){G.__e(o,n)}}function Na(e,r,n){var i,o;if(G.unmount&&G.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||In(i,null,r)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){G.__e(a,r)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&Na(i[o],r,n||typeof e.type!="function");n||En(e.__e),e.__c=e.__=e.__e=void 0}function ch(e,r,n){return this.constructor(e,n)}function Da(e,r,n){var i,o,a,s;r==document&&(r=document.documentElement),G.__&&G.__(e,r),o=(i=typeof n=="function")?null:n&&n.__k||r.__k,a=[],s=[],Mn(r,e=(!i&&n||r).__k=sh(Br,null,[e]),o||Vt,Vt,r.namespaceURI,!i&&n?[n]:o?null:r.firstChild?Wt.call(r.childNodes):null,a,!i&&n?n:o?o.__e:r.firstChild,i,s),Ta(a,e,s)}function Pn(e,r,n){var i,o,a,s,l=Se({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),r)a=="key"?i=r[a]:a=="ref"?o=r[a]:l[a]=r[a]===void 0&&s!=null?s[a]:r[a];return arguments.length>2&&(l.children=arguments.length>3?Wt.call(arguments,2):n),Gt(e.type,l,i||e.key,o||e.ref,null)}Wt=Ia.slice,G={__e:function(e,r,n,i){for(var o,a,s;r=r.__;)if((o=r.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),s=o.__d),s)return o.__E=o}catch(l){e=l}throw e}},Aa=0,An=function(e){return e!=null&&e.constructor===void 0},Ur.prototype.setState=function(e,r){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Se({},this.state),typeof e=="function"&&(e=e(Se({},n),this.props)),e&&Se(n,e),e!=null&&this.__v&&(r&&this._sb.push(r),wa(this))},Ur.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),wa(this))},Ur.prototype.render=Br,Xe=[],Ca=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ea=function(e,r){return e.__v.__b-r.__v.__b},jr.__r=0,Ma=/(PointerCapture)$|Capture$/i,Cn=0,wn=Sa(!1),kn=Sa(!0),oh=0;function qa(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,i=Array(r);n<r;n++)i[n]=e[n];return i}function hh(e){if(Array.isArray(e))return e}function ph(e,r,n){return(r=vh(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function dh(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,a,s,l=[],u=!0,f=!1;try{if(a=(n=n.call(e)).next,r!==0)for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==r);u=!0);}catch(h){f=!0,o=h}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(f)throw o}}return l}}function mh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function La(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function gh(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?La(Object(n),!0).forEach(function(i){ph(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function xh(e,r){return hh(e)||dh(e,r)||_h(e,r)||mh()}function yh(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function vh(e){var r=yh(e,"string");return typeof r=="symbol"?r:r+""}function Hr(e){"@babel/helpers - typeof";return Hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Hr(e)}function _h(e,r){if(e){if(typeof e=="string")return qa(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qa(e,r):void 0}}var On=function(r){if(Hr(r)!=="object")return r;var n=Pn(r);if(n.props){var i;n.props=gh({},n.props),n!=null&&(i=n.props)!==null&&i!==void 0&&i.children&&(n.props.children=Array.isArray(n.props.children)?n.props.children.map(On):On(n.props.children))}return n},bh=function(r){return An(Pn(r))},wh=function(r,n){delete n.__k,Da(On(r),n)};function kh(e,r){r===void 0&&(r={});var n=r.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",n==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var Sh=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;kh(Sh);var $a=Bt({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.style,a=o===void 0?{}:o,s=!!r&&Hr(r)==="object"&&!!r.node&&typeof r.node=="function",l=X(s?r.node():r);l.style("position")==="static"&&l.style("position","relative"),n.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(a).forEach(function(f){var h=xh(f,2),c=h[0],p=h[1];return n.tooltipEl.style(c,p)}),n.tooltipEl.style("left","-10000px").style("display","none");var u="tooltip-".concat(Math.round(Math.random()*1e12));n.mouseInside=!1,l.on("mousemove.".concat(u),function(f){n.mouseInside=!0;var h=ne(f),c=l.node(),p=c.offsetWidth,d=c.offsetHeight,g=[n.offsetX===null||n.offsetX===void 0?"-".concat(h[0]/p*100,"%"):typeof n.offsetX=="number"?"calc(-50% + ".concat(n.offsetX,"px)"):n.offsetX,n.offsetY===null||n.offsetY===void 0?d>130&&d-h[1]<100?"calc(-100% - 6px)":"21px":typeof n.offsetY=="number"?n.offsetY<0?"calc(-100% - ".concat(Math.abs(n.offsetY),"px)"):"".concat(n.offsetY,"px"):n.offsetY];n.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(g.join(","),")")),n.content&&n.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(u),function(){n.mouseInside=!0,n.content&&n.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(u),function(){n.mouseInside=!1,n.tooltipEl.style("display","none")})},update:function(r){r.tooltipEl.style("display",r.content&&r.mouseInside?"inline":"none"),r.content?r.content instanceof HTMLElement?(r.tooltipEl.text(""),r.tooltipEl.append(function(){return r.content})):typeof r.content=="string"?r.tooltipEl.html(r.content):bh(r.content)?(r.tooltipEl.text(""),wh(r.content,r.tooltipEl.node())):(r.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",r.content,r.content.toString())):r.tooltipEl.text("")}});function zn(e,r,n){var i,o=1;e==null&&(e=0),r==null&&(r=0),n==null&&(n=0);function a(){var s,l=i.length,u,f=0,h=0,c=0;for(s=0;s<l;++s)u=i[s],f+=u.x||0,h+=u.y||0,c+=u.z||0;for(f=(f/l-e)*o,h=(h/l-r)*o,c=(c/l-n)*o,s=0;s<l;++s)u=i[s],f&&(u.x-=f),h&&(u.y-=h),c&&(u.z-=c)}return a.initialize=function(s){i=s},a.x=function(s){return arguments.length?(e=+s,a):e},a.y=function(s){return arguments.length?(r=+s,a):r},a.z=function(s){return arguments.length?(n=+s,a):n},a.strength=function(s){return arguments.length?(o=+s,a):o},a}function Ua(e){let r=+this._x.call(null,e);return ja(this.cover(r),r,e)}function ja(e,r,n){if(isNaN(r))return e;var i,o=e._root,a={data:n},s=e._x0,l=e._x1,u,f,h,c,p;if(!o)return e._root=a,e;for(;o.length;)if((h=r>=(u=(s+l)/2))?s=u:l=u,i=o,!(o=o[c=+h]))return i[c]=a,e;if(f=+e._x.call(null,o.data),r===f)return a.next=o,i?i[c]=a:e._root=a,e;do i=i?i[c]=new Array(2):e._root=new Array(2),(h=r>=(u=(s+l)/2))?s=u:l=u;while((c=+h)==(p=+(f>=u)));return i[p]=o,i[c]=a,e}function Fa(e){Array.isArray(e)||(e=Array.from(e));let r=e.length,n=new Float64Array(r),i=1/0,o=-1/0;for(let a=0,s;a<r;++a)isNaN(s=+this._x.call(null,e[a]))||(n[a]=s,s<i&&(i=s),s>o&&(o=s));if(i>o)return this;this.cover(i).cover(o);for(let a=0;a<r;++a)ja(this,n[a],e[a]);return this}function Ba(e){if(isNaN(e=+e))return this;var r=this._x0,n=this._x1;if(isNaN(r))n=(r=Math.floor(e))+1;else{for(var i=n-r||1,o=this._root,a,s;r>e||e>=n;)switch(s=+(e<r),a=new Array(2),a[s]=o,o=a,i*=2,s){case 0:n=r+i;break;case 1:r=n-i;break}this._root&&this._root.length&&(this._root=o)}return this._x0=r,this._x1=n,this}function Ha(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function Ga(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function fe(e,r,n){this.node=e,this.x0=r,this.x1=n}function Va(e,r){var n,i=this._x0,o,a,s=this._x1,l=[],u=this._root,f,h;for(u&&l.push(new fe(u,i,s)),r==null?r=1/0:(i=e-r,s=e+r);f=l.pop();)if(!(!(u=f.node)||(o=f.x0)>s||(a=f.x1)<i))if(u.length){var c=(o+a)/2;l.push(new fe(u[1],c,a),new fe(u[0],o,c)),(h=+(e>=c))&&(f=l[l.length-1],l[l.length-1]=l[l.length-1-h],l[l.length-1-h]=f)}else{var p=Math.abs(e-+this._x.call(null,u.data));p<r&&(r=p,i=e-p,s=e+p,n=u.data)}return n}function Wa(e){if(isNaN(u=+this._x.call(null,e)))return this;var r,n=this._root,i,o,a,s=this._x0,l=this._x1,u,f,h,c,p;if(!n)return this;if(n.length)for(;;){if((h=u>=(f=(s+l)/2))?s=f:l=f,r=n,!(n=n[c=+h]))return this;if(!n.length)break;r[c+1&1]&&(i=r,p=c)}for(;n.data!==e;)if(o=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,o?(a?o.next=a:delete o.next,this):r?(a?r[c]=a:delete r[c],(n=r[0]||r[1])&&n===(r[1]||r[0])&&!n.length&&(i?i[p]=n:this._root=n),this):(this._root=a,this)}function Za(e){for(var r=0,n=e.length;r<n;++r)this.remove(e[r]);return this}function Ya(){return this._root}function Xa(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function Qa(e){var r=[],n,i=this._root,o,a,s;for(i&&r.push(new fe(i,this._x0,this._x1));n=r.pop();)if(!e(i=n.node,a=n.x0,s=n.x1)&&i.length){var l=(a+s)/2;(o=i[1])&&r.push(new fe(o,l,s)),(o=i[0])&&r.push(new fe(o,a,l))}return this}function Ka(e){var r=[],n=[],i;for(this._root&&r.push(new fe(this._root,this._x0,this._x1));i=r.pop();){var o=i.node;if(o.length){var a,s=i.x0,l=i.x1,u=(s+l)/2;(a=o[0])&&r.push(new fe(a,s,u)),(a=o[1])&&r.push(new fe(a,u,l))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.x1);return this}function Ja(e){return e[0]}function es(e){return arguments.length?(this._x=e,this):this._x}function Zt(e,r){var n=new Tn(r??Ja,NaN,NaN);return e==null?n:n.addAll(e)}function Tn(e,r,n){this._x=e,this._x0=r,this._x1=n,this._root=void 0}function ts(e){for(var r={data:e.data},n=r;e=e.next;)n=n.next={data:e.data};return r}var oe=Zt.prototype=Tn.prototype;oe.copy=function(){var e=new Tn(this._x,this._x0,this._x1),r=this._root,n,i;if(!r)return e;if(!r.length)return e._root=ts(r),e;for(n=[{source:r,target:e._root=new Array(2)}];r=n.pop();)for(var o=0;o<2;++o)(i=r.source[o])&&(i.length?n.push({source:i,target:r.target[o]=new Array(2)}):r.target[o]=ts(i));return e};oe.add=Ua;oe.addAll=Fa;oe.cover=Ba;oe.data=Ha;oe.extent=Ga;oe.find=Va;oe.remove=Wa;oe.removeAll=Za;oe.root=Ya;oe.size=Xa;oe.visit=Qa;oe.visitAfter=Ka;oe.x=es;function rs(e){let r=+this._x.call(null,e),n=+this._y.call(null,e);return ns(this.cover(r,n),r,n,e)}function ns(e,r,n,i){if(isNaN(r)||isNaN(n))return e;var o,a=e._root,s={data:i},l=e._x0,u=e._y0,f=e._x1,h=e._y1,c,p,d,g,y,x,m,b;if(!a)return e._root=s,e;for(;a.length;)if((y=r>=(c=(l+f)/2))?l=c:f=c,(x=n>=(p=(u+h)/2))?u=p:h=p,o=a,!(a=a[m=x<<1|y]))return o[m]=s,e;if(d=+e._x.call(null,a.data),g=+e._y.call(null,a.data),r===d&&n===g)return s.next=a,o?o[m]=s:e._root=s,e;do o=o?o[m]=new Array(4):e._root=new Array(4),(y=r>=(c=(l+f)/2))?l=c:f=c,(x=n>=(p=(u+h)/2))?u=p:h=p;while((m=x<<1|y)===(b=(g>=p)<<1|d>=c));return o[b]=a,o[m]=s,e}function is(e){var r,n,i=e.length,o,a,s=new Array(i),l=new Array(i),u=1/0,f=1/0,h=-1/0,c=-1/0;for(n=0;n<i;++n)isNaN(o=+this._x.call(null,r=e[n]))||isNaN(a=+this._y.call(null,r))||(s[n]=o,l[n]=a,o<u&&(u=o),o>h&&(h=o),a<f&&(f=a),a>c&&(c=a));if(u>h||f>c)return this;for(this.cover(u,f).cover(h,c),n=0;n<i;++n)ns(this,s[n],l[n],e[n]);return this}function os(e,r){if(isNaN(e=+e)||isNaN(r=+r))return this;var n=this._x0,i=this._y0,o=this._x1,a=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,a=(i=Math.floor(r))+1;else{for(var s=o-n||1,l=this._root,u,f;n>e||e>=o||i>r||r>=a;)switch(f=(r<i)<<1|e<n,u=new Array(4),u[f]=l,l=u,s*=2,f){case 0:o=n+s,a=i+s;break;case 1:n=o-s,a=i+s;break;case 2:o=n+s,i=a-s;break;case 3:n=o-s,i=a-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=o,this._y1=a,this}function as(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function ss(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Q(e,r,n,i,o){this.node=e,this.x0=r,this.y0=n,this.x1=i,this.y1=o}function ls(e,r,n){var i,o=this._x0,a=this._y0,s,l,u,f,h=this._x1,c=this._y1,p=[],d=this._root,g,y;for(d&&p.push(new Q(d,o,a,h,c)),n==null?n=1/0:(o=e-n,a=r-n,h=e+n,c=r+n,n*=n);g=p.pop();)if(!(!(d=g.node)||(s=g.x0)>h||(l=g.y0)>c||(u=g.x1)<o||(f=g.y1)<a))if(d.length){var x=(s+u)/2,m=(l+f)/2;p.push(new Q(d[3],x,m,u,f),new Q(d[2],s,m,x,f),new Q(d[1],x,l,u,m),new Q(d[0],s,l,x,m)),(y=(r>=m)<<1|e>=x)&&(g=p[p.length-1],p[p.length-1]=p[p.length-1-y],p[p.length-1-y]=g)}else{var b=e-+this._x.call(null,d.data),A=r-+this._y.call(null,d.data),v=b*b+A*A;if(v<n){var _=Math.sqrt(n=v);o=e-_,a=r-_,h=e+_,c=r+_,i=d.data}}return i}function us(e){if(isNaN(h=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var r,n=this._root,i,o,a,s=this._x0,l=this._y0,u=this._x1,f=this._y1,h,c,p,d,g,y,x,m;if(!n)return this;if(n.length)for(;;){if((g=h>=(p=(s+u)/2))?s=p:u=p,(y=c>=(d=(l+f)/2))?l=d:f=d,r=n,!(n=n[x=y<<1|g]))return this;if(!n.length)break;(r[x+1&3]||r[x+2&3]||r[x+3&3])&&(i=r,m=x)}for(;n.data!==e;)if(o=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,o?(a?o.next=a:delete o.next,this):r?(a?r[x]=a:delete r[x],(n=r[0]||r[1]||r[2]||r[3])&&n===(r[3]||r[2]||r[1]||r[0])&&!n.length&&(i?i[m]=n:this._root=n),this):(this._root=a,this)}function fs(e){for(var r=0,n=e.length;r<n;++r)this.remove(e[r]);return this}function cs(){return this._root}function hs(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function ps(e){var r=[],n,i=this._root,o,a,s,l,u;for(i&&r.push(new Q(i,this._x0,this._y0,this._x1,this._y1));n=r.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,l=n.x1,u=n.y1)&&i.length){var f=(a+l)/2,h=(s+u)/2;(o=i[3])&&r.push(new Q(o,f,h,l,u)),(o=i[2])&&r.push(new Q(o,a,h,f,u)),(o=i[1])&&r.push(new Q(o,f,s,l,h)),(o=i[0])&&r.push(new Q(o,a,s,f,h))}return this}function ds(e){var r=[],n=[],i;for(this._root&&r.push(new Q(this._root,this._x0,this._y0,this._x1,this._y1));i=r.pop();){var o=i.node;if(o.length){var a,s=i.x0,l=i.y0,u=i.x1,f=i.y1,h=(s+u)/2,c=(l+f)/2;(a=o[0])&&r.push(new Q(a,s,l,h,c)),(a=o[1])&&r.push(new Q(a,h,l,u,c)),(a=o[2])&&r.push(new Q(a,s,c,h,f)),(a=o[3])&&r.push(new Q(a,h,c,u,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function ms(e){return e[0]}function gs(e){return arguments.length?(this._x=e,this):this._x}function xs(e){return e[1]}function ys(e){return arguments.length?(this._y=e,this):this._y}function Yt(e,r,n){var i=new Rn(r??ms,n??xs,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function Rn(e,r,n,i,o,a){this._x=e,this._y=r,this._x0=n,this._y0=i,this._x1=o,this._y1=a,this._root=void 0}function vs(e){for(var r={data:e.data},n=r;e=e.next;)n=n.next={data:e.data};return r}var re=Yt.prototype=Rn.prototype;re.copy=function(){var e=new Rn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,n,i;if(!r)return e;if(!r.length)return e._root=vs(r),e;for(n=[{source:r,target:e._root=new Array(4)}];r=n.pop();)for(var o=0;o<4;++o)(i=r.source[o])&&(i.length?n.push({source:i,target:r.target[o]=new Array(4)}):r.target[o]=vs(i));return e};re.add=rs;re.addAll=is;re.cover=os;re.data=as;re.extent=ss;re.find=ls;re.remove=us;re.removeAll=fs;re.root=cs;re.size=hs;re.visit=ps;re.visitAfter=ds;re.x=gs;re.y=ys;function _s(e){let r=+this._x.call(null,e),n=+this._y.call(null,e),i=+this._z.call(null,e);return bs(this.cover(r,n,i),r,n,i,e)}function bs(e,r,n,i,o){if(isNaN(r)||isNaN(n)||isNaN(i))return e;var a,s=e._root,l={data:o},u=e._x0,f=e._y0,h=e._z0,c=e._x1,p=e._y1,d=e._z1,g,y,x,m,b,A,v,_,k,S,C;if(!s)return e._root=l,e;for(;s.length;)if((v=r>=(g=(u+c)/2))?u=g:c=g,(_=n>=(y=(f+p)/2))?f=y:p=y,(k=i>=(x=(h+d)/2))?h=x:d=x,a=s,!(s=s[S=k<<2|_<<1|v]))return a[S]=l,e;if(m=+e._x.call(null,s.data),b=+e._y.call(null,s.data),A=+e._z.call(null,s.data),r===m&&n===b&&i===A)return l.next=s,a?a[S]=l:e._root=l,e;do a=a?a[S]=new Array(8):e._root=new Array(8),(v=r>=(g=(u+c)/2))?u=g:c=g,(_=n>=(y=(f+p)/2))?f=y:p=y,(k=i>=(x=(h+d)/2))?h=x:d=x;while((S=k<<2|_<<1|v)===(C=(A>=x)<<2|(b>=y)<<1|m>=g));return a[C]=s,a[S]=l,e}function ws(e){Array.isArray(e)||(e=Array.from(e));let r=e.length,n=new Float64Array(r),i=new Float64Array(r),o=new Float64Array(r),a=1/0,s=1/0,l=1/0,u=-1/0,f=-1/0,h=-1/0;for(let c=0,p,d,g,y;c<r;++c)isNaN(d=+this._x.call(null,p=e[c]))||isNaN(g=+this._y.call(null,p))||isNaN(y=+this._z.call(null,p))||(n[c]=d,i[c]=g,o[c]=y,d<a&&(a=d),d>u&&(u=d),g<s&&(s=g),g>f&&(f=g),y<l&&(l=y),y>h&&(h=y));if(a>u||s>f||l>h)return this;this.cover(a,s,l).cover(u,f,h);for(let c=0;c<r;++c)bs(this,n[c],i[c],o[c],e[c]);return this}function ks(e,r,n){if(isNaN(e=+e)||isNaN(r=+r)||isNaN(n=+n))return this;var i=this._x0,o=this._y0,a=this._z0,s=this._x1,l=this._y1,u=this._z1;if(isNaN(i))s=(i=Math.floor(e))+1,l=(o=Math.floor(r))+1,u=(a=Math.floor(n))+1;else{for(var f=s-i||1,h=this._root,c,p;i>e||e>=s||o>r||r>=l||a>n||n>=u;)switch(p=(n<a)<<2|(r<o)<<1|e<i,c=new Array(8),c[p]=h,h=c,f*=2,p){case 0:s=i+f,l=o+f,u=a+f;break;case 1:i=s-f,l=o+f,u=a+f;break;case 2:s=i+f,o=l-f,u=a+f;break;case 3:i=s-f,o=l-f,u=a+f;break;case 4:s=i+f,l=o+f,a=u-f;break;case 5:i=s-f,l=o+f,a=u-f;break;case 6:s=i+f,o=l-f,a=u-f;break;case 7:i=s-f,o=l-f,a=u-f;break}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=l,this._z1=u,this}function Ss(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function As(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function B(e,r,n,i,o,a,s){this.node=e,this.x0=r,this.y0=n,this.z0=i,this.x1=o,this.y1=a,this.z1=s}function Cs(e,r,n,i){var o,a=this._x0,s=this._y0,l=this._z0,u,f,h,c,p,d,g=this._x1,y=this._y1,x=this._z1,m=[],b=this._root,A,v;for(b&&m.push(new B(b,a,s,l,g,y,x)),i==null?i=1/0:(a=e-i,s=r-i,l=n-i,g=e+i,y=r+i,x=n+i,i*=i);A=m.pop();)if(!(!(b=A.node)||(u=A.x0)>g||(f=A.y0)>y||(h=A.z0)>x||(c=A.x1)<a||(p=A.y1)<s||(d=A.z1)<l))if(b.length){var _=(u+c)/2,k=(f+p)/2,S=(h+d)/2;m.push(new B(b[7],_,k,S,c,p,d),new B(b[6],u,k,S,_,p,d),new B(b[5],_,f,S,c,k,d),new B(b[4],u,f,S,_,k,d),new B(b[3],_,k,h,c,p,S),new B(b[2],u,k,h,_,p,S),new B(b[1],_,f,h,c,k,S),new B(b[0],u,f,h,_,k,S)),(v=(n>=S)<<2|(r>=k)<<1|e>=_)&&(A=m[m.length-1],m[m.length-1]=m[m.length-1-v],m[m.length-1-v]=A)}else{var C=e-+this._x.call(null,b.data),z=r-+this._y.call(null,b.data),I=n-+this._z.call(null,b.data),O=C*C+z*z+I*I;if(O<i){var T=Math.sqrt(i=O);a=e-T,s=r-T,l=n-T,g=e+T,y=r+T,x=n+T,o=b.data}}return o}var Ah=(e,r,n,i,o,a)=>Math.sqrt((e-i)**2+(r-o)**2+(n-a)**2);function Es(e,r,n,i){let o=[],a=e-i,s=r-i,l=n-i,u=e+i,f=r+i,h=n+i;return this.visit((c,p,d,g,y,x,m)=>{if(!c.length)do{let b=c.data;Ah(e,r,n,this._x(b),this._y(b),this._z(b))<=i&&o.push(b)}while(c=c.next);return p>u||d>f||g>h||y<a||x<s||m<l}),o}function Ms(e){if(isNaN(p=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e))||isNaN(g=+this._z.call(null,e)))return this;var r,n=this._root,i,o,a,s=this._x0,l=this._y0,u=this._z0,f=this._x1,h=this._y1,c=this._z1,p,d,g,y,x,m,b,A,v,_,k;if(!n)return this;if(n.length)for(;;){if((b=p>=(y=(s+f)/2))?s=y:f=y,(A=d>=(x=(l+h)/2))?l=x:h=x,(v=g>=(m=(u+c)/2))?u=m:c=m,r=n,!(n=n[_=v<<2|A<<1|b]))return this;if(!n.length)break;(r[_+1&7]||r[_+2&7]||r[_+3&7]||r[_+4&7]||r[_+5&7]||r[_+6&7]||r[_+7&7])&&(i=r,k=_)}for(;n.data!==e;)if(o=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,o?(a?o.next=a:delete o.next,this):r?(a?r[_]=a:delete r[_],(n=r[0]||r[1]||r[2]||r[3]||r[4]||r[5]||r[6]||r[7])&&n===(r[7]||r[6]||r[5]||r[4]||r[3]||r[2]||r[1]||r[0])&&!n.length&&(i?i[k]=n:this._root=n),this):(this._root=a,this)}function Is(e){for(var r=0,n=e.length;r<n;++r)this.remove(e[r]);return this}function Ps(){return this._root}function Os(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function zs(e){var r=[],n,i=this._root,o,a,s,l,u,f,h;for(i&&r.push(new B(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=r.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,l=n.z0,u=n.x1,f=n.y1,h=n.z1)&&i.length){var c=(a+u)/2,p=(s+f)/2,d=(l+h)/2;(o=i[7])&&r.push(new B(o,c,p,d,u,f,h)),(o=i[6])&&r.push(new B(o,a,p,d,c,f,h)),(o=i[5])&&r.push(new B(o,c,s,d,u,p,h)),(o=i[4])&&r.push(new B(o,a,s,d,c,p,h)),(o=i[3])&&r.push(new B(o,c,p,l,u,f,d)),(o=i[2])&&r.push(new B(o,a,p,l,c,f,d)),(o=i[1])&&r.push(new B(o,c,s,l,u,p,d)),(o=i[0])&&r.push(new B(o,a,s,l,c,p,d))}return this}function Ts(e){var r=[],n=[],i;for(this._root&&r.push(new B(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=r.pop();){var o=i.node;if(o.length){var a,s=i.x0,l=i.y0,u=i.z0,f=i.x1,h=i.y1,c=i.z1,p=(s+f)/2,d=(l+h)/2,g=(u+c)/2;(a=o[0])&&r.push(new B(a,s,l,u,p,d,g)),(a=o[1])&&r.push(new B(a,p,l,u,f,d,g)),(a=o[2])&&r.push(new B(a,s,d,u,p,h,g)),(a=o[3])&&r.push(new B(a,p,d,u,f,h,g)),(a=o[4])&&r.push(new B(a,s,l,g,p,d,c)),(a=o[5])&&r.push(new B(a,p,l,g,f,d,c)),(a=o[6])&&r.push(new B(a,s,d,g,p,h,c)),(a=o[7])&&r.push(new B(a,p,d,g,f,h,c))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function Rs(e){return e[0]}function Ns(e){return arguments.length?(this._x=e,this):this._x}function Ds(e){return e[1]}function qs(e){return arguments.length?(this._y=e,this):this._y}function Ls(e){return e[2]}function $s(e){return arguments.length?(this._z=e,this):this._z}function Xt(e,r,n,i){var o=new Nn(r??Rs,n??Ds,i??Ls,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?o:o.addAll(e)}function Nn(e,r,n,i,o,a,s,l,u){this._x=e,this._y=r,this._z=n,this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=l,this._z1=u,this._root=void 0}function Us(e){for(var r={data:e.data},n=r;e=e.next;)n=n.next={data:e.data};return r}var J=Xt.prototype=Nn.prototype;J.copy=function(){var e=new Nn(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root,n,i;if(!r)return e;if(!r.length)return e._root=Us(r),e;for(n=[{source:r,target:e._root=new Array(8)}];r=n.pop();)for(var o=0;o<8;++o)(i=r.source[o])&&(i.length?n.push({source:i,target:r.target[o]=new Array(8)}):r.target[o]=Us(i));return e};J.add=_s;J.addAll=ws;J.cover=ks;J.data=Ss;J.extent=As;J.find=Cs;J.findAllWithinRadius=Es;J.remove=Ms;J.removeAll=Is;J.root=Ps;J.size=Os;J.visit=zs;J.visitAfter=Ts;J.x=Ns;J.y=qs;J.z=$s;function ce(e){return function(){return e}}function be(e){return(e()-.5)*1e-6}function Ch(e){return e.index}function js(e,r){var n=e.get(r);if(!n)throw new Error("node not found: "+r);return n}function Dn(e){var r=Ch,n=p,i,o=ce(30),a,s,l,u,f,h,c=1;e==null&&(e=[]);function p(m){return 1/Math.min(u[m.source.index],u[m.target.index])}function d(m){for(var b=0,A=e.length;b<c;++b)for(var v=0,_,k,S,C=0,z=0,I=0,O,T;v<A;++v)_=e[v],k=_.source,S=_.target,C=S.x+S.vx-k.x-k.vx||be(h),l>1&&(z=S.y+S.vy-k.y-k.vy||be(h)),l>2&&(I=S.z+S.vz-k.z-k.vz||be(h)),O=Math.sqrt(C*C+z*z+I*I),O=(O-a[v])/O*m*i[v],C*=O,z*=O,I*=O,S.vx-=C*(T=f[v]),l>1&&(S.vy-=z*T),l>2&&(S.vz-=I*T),k.vx+=C*(T=1-T),l>1&&(k.vy+=z*T),l>2&&(k.vz+=I*T)}function g(){if(s){var m,b=s.length,A=e.length,v=new Map(s.map((k,S)=>[r(k,S,s),k])),_;for(m=0,u=new Array(b);m<A;++m)_=e[m],_.index=m,typeof _.source!="object"&&(_.source=js(v,_.source)),typeof _.target!="object"&&(_.target=js(v,_.target)),u[_.source.index]=(u[_.source.index]||0)+1,u[_.target.index]=(u[_.target.index]||0)+1;for(m=0,f=new Array(A);m<A;++m)_=e[m],f[m]=u[_.source.index]/(u[_.source.index]+u[_.target.index]);i=new Array(A),y(),a=new Array(A),x()}}function y(){if(s)for(var m=0,b=e.length;m<b;++m)i[m]=+n(e[m],m,e)}function x(){if(s)for(var m=0,b=e.length;m<b;++m)a[m]=+o(e[m],m,e)}return d.initialize=function(m,...b){s=m,h=b.find(A=>typeof A=="function")||Math.random,l=b.find(A=>[1,2,3].includes(A))||2,g()},d.links=function(m){return arguments.length?(e=m,g(),d):e},d.id=function(m){return arguments.length?(r=m,d):r},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:ce(+m),y(),d):n},d.distance=function(m){return arguments.length?(o=typeof m=="function"?m:ce(+m),x(),d):o},d}function Fs(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}var Bs=3;function Gr(e){return e.x}function qn(e){return e.y}function Hs(e){return e.z}var Eh=10,Mh=Math.PI*(3-Math.sqrt(5)),Ih=Math.PI*20/(9+Math.sqrt(221));function Ln(e,r){r=r||2;var n=Math.min(Bs,Math.max(1,Math.round(r))),i,o=1,a=.001,s=1-Math.pow(a,1/300),l=0,u=.6,f=new Map,h=tt(d),c=Ie("tick","end"),p=Fs();e==null&&(e=[]);function d(){g(),c.call("tick",i),o<a&&(h.stop(),c.call("end",i))}function g(m){var b,A=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(o+=(l-o)*s,f.forEach(function(k){k(o)}),b=0;b<A;++b)v=e[b],v.fx==null?v.x+=v.vx*=u:(v.x=v.fx,v.vx=0),n>1&&(v.fy==null?v.y+=v.vy*=u:(v.y=v.fy,v.vy=0)),n>2&&(v.fz==null?v.z+=v.vz*=u:(v.z=v.fz,v.vz=0));return i}function y(){for(var m=0,b=e.length,A;m<b;++m){if(A=e[m],A.index=m,A.fx!=null&&(A.x=A.fx),A.fy!=null&&(A.y=A.fy),A.fz!=null&&(A.z=A.fz),isNaN(A.x)||n>1&&isNaN(A.y)||n>2&&isNaN(A.z)){var v=Eh*(n>2?Math.cbrt(.5+m):n>1?Math.sqrt(.5+m):m),_=m*Mh,k=m*Ih;n===1?A.x=v:n===2?(A.x=v*Math.cos(_),A.y=v*Math.sin(_)):(A.x=v*Math.sin(_)*Math.cos(k),A.y=v*Math.cos(_),A.z=v*Math.sin(_)*Math.sin(k))}(isNaN(A.vx)||n>1&&isNaN(A.vy)||n>2&&isNaN(A.vz))&&(A.vx=0,n>1&&(A.vy=0),n>2&&(A.vz=0))}}function x(m){return m.initialize&&m.initialize(e,p,n),m}return y(),i={tick:g,restart:function(){return h.restart(d),i},stop:function(){return h.stop(),i},numDimensions:function(m){return arguments.length?(n=Math.min(Bs,Math.max(1,Math.round(m))),f.forEach(x),i):n},nodes:function(m){return arguments.length?(e=m,y(),f.forEach(x),i):e},alpha:function(m){return arguments.length?(o=+m,i):o},alphaMin:function(m){return arguments.length?(a=+m,i):a},alphaDecay:function(m){return arguments.length?(s=+m,i):+s},alphaTarget:function(m){return arguments.length?(l=+m,i):l},velocityDecay:function(m){return arguments.length?(u=1-m,i):1-u},randomSource:function(m){return arguments.length?(p=m,f.forEach(x),i):p},force:function(m,b){return arguments.length>1?(b==null?f.delete(m):f.set(m,x(b)),i):f.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),b=m.shift()||0,A=(n>1?m.shift():null)||0,v=(n>2?m.shift():null)||0,_=m.shift()||1/0,k=0,S=e.length,C,z,I,O,T,q;for(_*=_,k=0;k<S;++k)T=e[k],C=b-T.x,z=A-(T.y||0),I=v-(T.z||0),O=C*C+z*z+I*I,O<_&&(q=T,_=O);return q},on:function(m,b){return arguments.length>1?(c.on(m,b),i):c.on(m)}}}function $n(){var e,r,n,i,o,a=ce(-30),s,l=1,u=1/0,f=.81;function h(g){var y,x=e.length,m=(r===1?Zt(e,Gr):r===2?Yt(e,Gr,qn):r===3?Xt(e,Gr,qn,Hs):null).visitAfter(p);for(o=g,y=0;y<x;++y)n=e[y],m.visit(d)}function c(){if(e){var g,y=e.length,x;for(s=new Array(y),g=0;g<y;++g)x=e[g],s[x.index]=+a(x,g,e)}}function p(g){var y=0,x,m,b=0,A,v,_,k,S=g.length;if(S){for(A=v=_=k=0;k<S;++k)(x=g[k])&&(m=Math.abs(x.value))&&(y+=x.value,b+=m,A+=m*(x.x||0),v+=m*(x.y||0),_+=m*(x.z||0));y*=Math.sqrt(4/S),g.x=A/b,r>1&&(g.y=v/b),r>2&&(g.z=_/b)}else{x=g,x.x=x.data.x,r>1&&(x.y=x.data.y),r>2&&(x.z=x.data.z);do y+=s[x.data.index];while(x=x.next)}g.value=y}function d(g,y,x,m,b){if(!g.value)return!0;var A=[x,m,b][r-1],v=g.x-n.x,_=r>1?g.y-n.y:0,k=r>2?g.z-n.z:0,S=A-y,C=v*v+_*_+k*k;if(S*S/f<C)return C<u&&(v===0&&(v=be(i),C+=v*v),r>1&&_===0&&(_=be(i),C+=_*_),r>2&&k===0&&(k=be(i),C+=k*k),C<l&&(C=Math.sqrt(l*C)),n.vx+=v*g.value*o/C,r>1&&(n.vy+=_*g.value*o/C),r>2&&(n.vz+=k*g.value*o/C)),!0;if(g.length||C>=u)return;(g.data!==n||g.next)&&(v===0&&(v=be(i),C+=v*v),r>1&&_===0&&(_=be(i),C+=_*_),r>2&&k===0&&(k=be(i),C+=k*k),C<l&&(C=Math.sqrt(l*C)));do g.data!==n&&(S=s[g.data.index]*o/C,n.vx+=v*S,r>1&&(n.vy+=_*S),r>2&&(n.vz+=k*S));while(g=g.next)}return h.initialize=function(g,...y){e=g,i=y.find(x=>typeof x=="function")||Math.random,r=y.find(x=>[1,2,3].includes(x))||2,c()},h.strength=function(g){return arguments.length?(a=typeof g=="function"?g:ce(+g),c(),h):a},h.distanceMin=function(g){return arguments.length?(l=g*g,h):Math.sqrt(l)},h.distanceMax=function(g){return arguments.length?(u=g*g,h):Math.sqrt(u)},h.theta=function(g){return arguments.length?(f=g*g,h):Math.sqrt(f)},h}function Un(e,r,n,i){var o,a,s=ce(.1),l,u;typeof e!="function"&&(e=ce(+e)),r==null&&(r=0),n==null&&(n=0),i==null&&(i=0);function f(c){for(var p=0,d=o.length;p<d;++p){var g=o[p],y=g.x-r||1e-6,x=(g.y||0)-n||1e-6,m=(g.z||0)-i||1e-6,b=Math.sqrt(y*y+x*x+m*m),A=(u[p]-b)*l[p]*c/b;g.vx+=y*A,a>1&&(g.vy+=x*A),a>2&&(g.vz+=m*A)}}function h(){if(o){var c,p=o.length;for(l=new Array(p),u=new Array(p),c=0;c<p;++c)u[c]=+e(o[c],c,o),l[c]=isNaN(u[c])?0:+s(o[c],c,o)}}return f.initialize=function(c,...p){o=c,a=p.find(d=>[1,2,3].includes(d))||2,h()},f.strength=function(c){return arguments.length?(s=typeof c=="function"?c:ce(+c),h(),f):s},f.radius=function(c){return arguments.length?(e=typeof c=="function"?c:ce(+c),h(),f):e},f.x=function(c){return arguments.length?(r=+c,f):r},f.y=function(c){return arguments.length?(n=+c,f):n},f.z=function(c){return arguments.length?(i=+c,f):i},f}var{abs:Qt,cos:Te,sin:lt,acos:Ph,atan2:Kt,sqrt:Ue,pow:he}=Math;function Jt(e){return e<0?-he(-e,1/3):he(e,1/3)}var Gs=Math.PI,Vr=2*Gs,je=Gs/2,Oh=1e-6,jn=Number.MAX_SAFE_INTEGER||9007199254740991,Fn=Number.MIN_SAFE_INTEGER||-9007199254740991,zh={x:0,y:0,z:0},M={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,r){let n=r(e),i=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(i+=n.z*n.z),Ue(i)},compute:function(e,r,n){if(e===0)return r[0].t=0,r[0];let i=r.length-1;if(e===1)return r[i].t=1,r[i];let o=1-e,a=r;if(i===0)return r[0].t=e,r[0];if(i===1){let l={x:o*a[0].x+e*a[1].x,y:o*a[0].y+e*a[1].y,t:e};return n&&(l.z=o*a[0].z+e*a[1].z),l}if(i<4){let l=o*o,u=e*e,f,h,c,p=0;i===2?(a=[a[0],a[1],a[2],zh],f=l,h=o*e*2,c=u):i===3&&(f=l*o,h=l*e*3,c=o*u*3,p=e*u);let d={x:f*a[0].x+h*a[1].x+c*a[2].x+p*a[3].x,y:f*a[0].y+h*a[1].y+c*a[2].y+p*a[3].y,t:e};return n&&(d.z=f*a[0].z+h*a[1].z+c*a[2].z+p*a[3].z),d}let s=JSON.parse(JSON.stringify(r));for(;s.length>1;){for(let l=0;l<s.length-1;l++)s[l]={x:s[l].x+(s[l+1].x-s[l].x)*e,y:s[l].y+(s[l+1].y-s[l].y)*e},typeof s[l].z<"u"&&(s[l].z=s[l].z+(s[l+1].z-s[l].z)*e);s.splice(s.length-1,1)}return s[0].t=e,s[0]},computeWithRatios:function(e,r,n,i){let o=1-e,a=n,s=r,l=a[0],u=a[1],f=a[2],h=a[3],c;if(l*=o,u*=e,s.length===2)return c=l+u,{x:(l*s[0].x+u*s[1].x)/c,y:(l*s[0].y+u*s[1].y)/c,z:i?(l*s[0].z+u*s[1].z)/c:!1,t:e};if(l*=o,u*=2*o,f*=e*e,s.length===3)return c=l+u+f,{x:(l*s[0].x+u*s[1].x+f*s[2].x)/c,y:(l*s[0].y+u*s[1].y+f*s[2].y)/c,z:i?(l*s[0].z+u*s[1].z+f*s[2].z)/c:!1,t:e};if(l*=o,u*=1.5*o,f*=3*o,h*=e*e*e,s.length===4)return c=l+u+f+h,{x:(l*s[0].x+u*s[1].x+f*s[2].x+h*s[3].x)/c,y:(l*s[0].y+u*s[1].y+f*s[2].y+h*s[3].y)/c,z:i?(l*s[0].z+u*s[1].z+f*s[2].z+h*s[3].z)/c:!1,t:e}},derive:function(e,r){let n=[];for(let i=e,o=i.length,a=o-1;o>1;o--,a--){let s=[];for(let l=0,u;l<a;l++)u={x:a*(i[l+1].x-i[l].x),y:a*(i[l+1].y-i[l].y)},r&&(u.z=a*(i[l+1].z-i[l].z)),s.push(u);n.push(s),i=s}return n},between:function(e,r,n){return r<=e&&e<=n||M.approximately(e,r)||M.approximately(e,n)},approximately:function(e,r,n){return Qt(e-r)<=(n||Oh)},length:function(e){let n=M.Tvalues.length,i=0;for(let o=0,a;o<n;o++)a=.5*M.Tvalues[o]+.5,i+=M.Cvalues[o]*M.arcfn(a,e);return .5*i},map:function(e,r,n,i,o){let a=n-r,s=o-i,l=e-r,u=l/a;return i+s*u},lerp:function(e,r,n){let i={x:r.x+e*(n.x-r.x),y:r.y+e*(n.y-r.y)};return r.z!==void 0&&n.z!==void 0&&(i.z=r.z+e*(n.z-r.z)),i},pointToString:function(e){let r=e.x+"/"+e.y;return typeof e.z<"u"&&(r+="/"+e.z),r},pointsToString:function(e){return"["+e.map(M.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,r,n){let i=r.x-e.x,o=r.y-e.y,a=n.x-e.x,s=n.y-e.y,l=i*s-o*a,u=i*a+o*s;return Kt(l,u)},round:function(e,r){let n=""+e,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+r))},dist:function(e,r){let n=e.x-r.x,i=e.y-r.y;return Ue(n*n+i*i)},closest:function(e,r){let n=he(2,63),i,o;return e.forEach(function(a,s){o=M.dist(r,a),o<n&&(n=o,i=s)}),{mdist:n,mpos:i}},abcratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;let n=he(e,r)+he(1-e,r),i=n-1;return Qt(i/n)},projectionratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;let n=he(1-e,r),i=he(e,r)+n;return n/i},lli8:function(e,r,n,i,o,a,s,l){let u=(e*i-r*n)*(o-s)-(e-n)*(o*l-a*s),f=(e*i-r*n)*(a-l)-(r-i)*(o*l-a*s),h=(e-n)*(a-l)-(r-i)*(o-s);return h==0?!1:{x:u/h,y:f/h}},lli4:function(e,r,n,i){let o=e.x,a=e.y,s=r.x,l=r.y,u=n.x,f=n.y,h=i.x,c=i.y;return M.lli8(o,a,s,l,u,f,h,c)},lli:function(e,r){return M.lli4(e,e.c,r,r.c)},makeline:function(e,r){return new Qe(e.x,e.y,(e.x+r.x)/2,(e.y+r.y)/2,r.x,r.y)},findbbox:function(e){let r=jn,n=jn,i=Fn,o=Fn;return e.forEach(function(a){let s=a.bbox();r>s.x.min&&(r=s.x.min),n>s.y.min&&(n=s.y.min),i<s.x.max&&(i=s.x.max),o<s.y.max&&(o=s.y.max)}),{x:{min:r,mid:(r+i)/2,max:i,size:i-r},y:{min:n,mid:(n+o)/2,max:o,size:o-n}}},shapeintersections:function(e,r,n,i,o){if(!M.bboxoverlap(r,i))return[];let a=[],s=[e.startcap,e.forward,e.back,e.endcap],l=[n.startcap,n.forward,n.back,n.endcap];return s.forEach(function(u){u.virtual||l.forEach(function(f){if(f.virtual)return;let h=u.intersects(f,o);h.length>0&&(h.c1=u,h.c2=f,h.s1=e,h.s2=n,a.push(h))})}),a},makeshape:function(e,r,n){let i=r.points.length,o=e.points.length,a=M.makeline(r.points[i-1],e.points[0]),s=M.makeline(e.points[o-1],r.points[0]),l={startcap:a,forward:e,back:r,endcap:s,bbox:M.findbbox([a,e,r,s])};return l.intersections=function(u){return M.shapeintersections(l,l.bbox,u,u.bbox,n)},l},getminmax:function(e,r,n){if(!n)return{min:0,max:0};let i=jn,o=Fn,a,s;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let l=0,u=n.length;l<u;l++)a=n[l],s=e.get(a),s[r]<i&&(i=s[r]),s[r]>o&&(o=s[r]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,r){let n=r.p1.x,i=r.p1.y,o=-Kt(r.p2.y-i,r.p2.x-n),a=function(s){return{x:(s.x-n)*Te(o)-(s.y-i)*lt(o),y:(s.x-n)*lt(o)+(s.y-i)*Te(o)}};return e.map(a)},roots:function(e,r){r=r||{p1:{x:0,y:0},p2:{x:1,y:0}};let n=e.length-1,i=M.align(e,r),o=function(S){return 0<=S&&S<=1};if(n===2){let S=i[0].y,C=i[1].y,z=i[2].y,I=S-2*C+z;if(I!==0){let O=-Ue(C*C-S*z),T=-S+C,q=-(O+T)/I,w=-(-O+T)/I;return[q,w].filter(o)}else if(C!==z&&I===0)return[(2*C-z)/(2*C-2*z)].filter(o);return[]}let a=i[0].y,s=i[1].y,l=i[2].y,u=i[3].y,f=-a+3*s-3*l+u,h=3*a-6*s+3*l,c=-3*a+3*s,p=a;if(M.approximately(f,0)){if(M.approximately(h,0))return M.approximately(c,0)?[]:[-p/c].filter(o);let S=Ue(c*c-4*h*p),C=2*h;return[(S-c)/C,(-c-S)/C].filter(o)}h/=f,c/=f,p/=f;let d=(3*c-h*h)/3,g=d/3,y=(2*h*h*h-9*h*c+27*p)/27,x=y/2,m=x*x+g*g*g,b,A,v,_,k;if(m<0){let S=-d/3,C=S*S*S,z=Ue(C),I=-y/(2*z),O=I<-1?-1:I>1?1:I,T=Ph(O),q=Jt(z),w=2*q;return v=w*Te(T/3)-h/3,_=w*Te((T+Vr)/3)-h/3,k=w*Te((T+2*Vr)/3)-h/3,[v,_,k].filter(o)}else{if(m===0)return b=x<0?Jt(-x):-Jt(x),v=2*b-h/3,_=-b-h/3,[v,_].filter(o);{let S=Ue(m);return b=Jt(-x+S),A=Jt(x+S),[b-A-h/3].filter(o)}}},droots:function(e){if(e.length===3){let r=e[0],n=e[1],i=e[2],o=r-2*n+i;if(o!==0){let a=-Ue(n*n-r*i),s=-r+n,l=-(a+s)/o,u=-(-a+s)/o;return[l,u]}else if(n!==i&&o===0)return[(2*n-i)/(2*(n-i))];return[]}if(e.length===2){let r=e[0],n=e[1];return r!==n?[r/(r-n)]:[]}return[]},curvature:function(e,r,n,i,o){let a,s,l,u,f=0,h=0,c=M.compute(e,r),p=M.compute(e,n),d=c.x*c.x+c.y*c.y;if(i?(a=Ue(he(c.y*p.z-p.y*c.z,2)+he(c.z*p.x-p.z*c.x,2)+he(c.x*p.y-p.x*c.y,2)),s=he(d+c.z*c.z,3/2)):(a=c.x*p.y-c.y*p.x,s=he(d,3/2)),a===0||s===0)return{k:0,r:0};if(f=a/s,h=s/a,!o){let g=M.curvature(e-.001,r,n,i,!0).k,y=M.curvature(e+.001,r,n,i,!0).k;u=(y-f+(f-g))/2,l=(Qt(y-f)+Qt(f-g))/2}return{k:f,r:h,dk:u,adk:l}},inflections:function(e){if(e.length<4)return[];let r=M.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=r[2].x*r[1].y,i=r[3].x*r[1].y,o=r[1].x*r[2].y,a=r[3].x*r[2].y,s=18*(-3*n+2*i+3*o-a),l=18*(3*n-i-3*o),u=18*(o-n);if(M.approximately(s,0)){if(!M.approximately(l,0)){let p=-u/l;if(0<=p&&p<=1)return[p]}return[]}let f=2*s;if(M.approximately(f,0))return[];let h=l*l-4*s*u;if(h<0)return[];let c=Math.sqrt(h);return[(c-l)/f,-(l+c)/f].filter(function(p){return 0<=p&&p<=1})},bboxoverlap:function(e,r){let n=["x","y"],i=n.length;for(let o=0,a,s,l,u;o<i;o++)if(a=n[o],s=e[a].mid,l=r[a].mid,u=(e[a].size+r[a].size)/2,Qt(s-l)>=u)return!1;return!0},expandbox:function(e,r){r.x.min<e.x.min&&(e.x.min=r.x.min),r.y.min<e.y.min&&(e.y.min=r.y.min),r.z&&r.z.min<e.z.min&&(e.z.min=r.z.min),r.x.max>e.x.max&&(e.x.max=r.x.max),r.y.max>e.y.max&&(e.y.max=r.y.max),r.z&&r.z.max>e.z.max&&(e.z.max=r.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,r,n){let i=e.bbox(),o=r.bbox(),a=1e5,s=n||.5;if(i.x.size+i.y.size<s&&o.x.size+o.y.size<s)return[(a*(e._t1+e._t2)/2|0)/a+"/"+(a*(r._t1+r._t2)/2|0)/a];let l=e.split(.5),u=r.split(.5),f=[{left:l.left,right:u.left},{left:l.left,right:u.right},{left:l.right,right:u.right},{left:l.right,right:u.left}];f=f.filter(function(c){return M.bboxoverlap(c.left.bbox(),c.right.bbox())});let h=[];return f.length===0||(f.forEach(function(c){h=h.concat(M.pairiteration(c.left,c.right,s))}),h=h.filter(function(c,p){return h.indexOf(c)===p})),h},getccenter:function(e,r,n){let i=r.x-e.x,o=r.y-e.y,a=n.x-r.x,s=n.y-r.y,l=i*Te(je)-o*lt(je),u=i*lt(je)+o*Te(je),f=a*Te(je)-s*lt(je),h=a*lt(je)+s*Te(je),c=(e.x+r.x)/2,p=(e.y+r.y)/2,d=(r.x+n.x)/2,g=(r.y+n.y)/2,y=c+l,x=p+u,m=d+f,b=g+h,A=M.lli8(c,p,y,x,d,g,m,b),v=M.dist(A,e),_=Kt(e.y-A.y,e.x-A.x),k=Kt(r.y-A.y,r.x-A.x),S=Kt(n.y-A.y,n.x-A.x),C;return _<S?((_>k||k>S)&&(_+=Vr),_>S&&(C=S,S=_,_=C)):S<k&&k<_?(C=S,S=_,_=C):S+=Vr,A.s=_,A.e=S,A.r=v,A},numberSort:function(e,r){return e-r}};var ut=class e{constructor(r){this.curves=[],this._3d=!1,r&&(this.curves=r,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(r){return M.pointsToString(r.points)}).join(", ")+"]"}addCurve(r){this.curves.push(r),this._3d=this._3d||r._3d}length(){return this.curves.map(function(r){return r.length()}).reduce(function(r,n){return r+n})}curve(r){return this.curves[r]}bbox(){let r=this.curves;for(var n=r[0].bbox(),i=1;i<r.length;i++)M.expandbox(n,r[i].bbox());return n}offset(r){let n=[];return this.curves.forEach(function(i){n.push(...i.offset(r))}),new e(n)}};var{abs:er,min:Vs,max:Ws,cos:Th,sin:Rh,acos:Nh,sqrt:tr}=Math,Dh=Math.PI;var Qe=class e{constructor(r){let n=r&&r.forEach?r:Array.from(arguments).slice(),i=!1;if(typeof n[0]=="object"){i=n.length;let d=[];n.forEach(function(g){["x","y","z"].forEach(function(y){typeof g[y]<"u"&&d.push(g[y])})}),n=d}let o=!1,a=n.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let s=this._3d=!o&&(a===9||a===12)||r&&r[0]&&typeof r[0].z<"u",l=this.points=[];for(let d=0,g=s?3:2;d<a;d+=g){var u={x:n[d],y:n[d+1]};s&&(u.z=n[d+2]),l.push(u)}let f=this.order=l.length-1,h=this.dims=["x","y"];s&&h.push("z"),this.dimlen=h.length;let c=M.align(l,{p1:l[0],p2:l[f]}),p=M.dist(l[0],l[f]);this._linear=c.reduce((d,g)=>d+er(g.y),0)<p/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(r,n,i,o){if(typeof o>"u"&&(o=.5),o===0)return new e(n,n,i);if(o===1)return new e(r,n,n);let a=e.getABC(2,r,n,i,o);return new e(r,a.A,i)}static cubicFromPoints(r,n,i,o,a){typeof o>"u"&&(o=.5);let s=e.getABC(3,r,n,i,o);typeof a>"u"&&(a=M.dist(n,s.C));let l=a*(1-o)/o,u=M.dist(r,i),f=(i.x-r.x)/u,h=(i.y-r.y)/u,c=a*f,p=a*h,d=l*f,g=l*h,y={x:n.x-c,y:n.y-p},x={x:n.x+d,y:n.y+g},m=s.A,b={x:m.x+(y.x-m.x)/(1-o),y:m.y+(y.y-m.y)/(1-o)},A={x:m.x+(x.x-m.x)/o,y:m.y+(x.y-m.y)/o},v={x:r.x+(b.x-r.x)/o,y:r.y+(b.y-r.y)/o},_={x:i.x+(A.x-i.x)/(1-o),y:i.y+(A.y-i.y)/(1-o)};return new e(r,v,_,i)}static getUtils(){return M}getUtils(){return e.getUtils()}static get PolyBezier(){return ut}valueOf(){return this.toString()}toString(){return M.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let r=this.points,n=r[0].x,i=r[0].y,o=["M",n,i,this.order===2?"Q":"C"];for(let a=1,s=r.length;a<s;a++)o.push(r[a].x),o.push(r[a].y);return o.join(" ")}setRatios(r){if(r.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=r,this._lut=[]}verify(){let r=this.coordDigest();r!==this._print&&(this._print=r,this.update())}coordDigest(){return this.points.map(function(r,n){return""+n+r.x+r.y+(r.z?r.z:0)}).join("")}update(){this._lut=[],this.dpoints=M.derive(this.points,this._3d),this.computedirection()}computedirection(){let r=this.points,n=M.angle(r[0],r[this.order],r[1]);this.clockwise=n>0}length(){return M.length(this.derivative.bind(this))}static getABC(r=2,n,i,o,a=.5){let s=M.projectionratio(a,r),l=1-s,u={x:s*n.x+l*o.x,y:s*n.y+l*o.y},f=M.abcratio(a,r);return{A:{x:i.x+(i.x-u.x)/f,y:i.y+(i.y-u.y)/f},B:i,C:u,S:n,E:o}}getABC(r,n){n=n||this.get(r);let i=this.points[0],o=this.points[this.order];return e.getABC(this.order,i,n,o,r)}getLUT(r){if(this.verify(),r=r||100,this._lut.length===r+1)return this._lut;this._lut=[],r++,this._lut=[];for(let n=0,i,o;n<r;n++)o=n/(r-1),i=this.compute(o),i.t=o,this._lut.push(i);return this._lut}on(r,n){n=n||5;let i=this.getLUT(),o=[];for(let a=0,s,l=0;a<i.length;a++)s=i[a],M.dist(s,r)<n&&(o.push(s),l+=a/i.length);return o.length?t/=o.length:!1}project(r){let n=this.getLUT(),i=n.length-1,o=M.closest(n,r),a=o.mpos,s=(a-1)/i,l=(a+1)/i,u=.1/i,f=o.mdist,h=s,c=h,p;f+=1;for(let d;h<l+u;h+=u)p=this.compute(h),d=M.dist(r,p),d<f&&(f=d,c=h);return c=c<0?0:c>1?1:c,p=this.compute(c),p.t=c,p.d=f,p}get(r){return this.compute(r)}point(r){return this.points[r]}compute(r){return this.ratios?M.computeWithRatios(r,this.points,this.ratios,this._3d):M.compute(r,this.points,this._3d,this.ratios)}raise(){let r=this.points,n=[r[0]],i=r.length;for(let o=1,a,s;o<i;o++)a=r[o],s=r[o-1],n[o]={x:(i-o)/i*a.x+o/i*s.x,y:(i-o)/i*a.y+o/i*s.y};return n[i]=r[i-1],new e(n)}derivative(r){return M.compute(r,this.dpoints[0],this._3d)}dderivative(r){return M.compute(r,this.dpoints[1],this._3d)}align(){let r=this.points;return new e(M.align(r,{p1:r[0],p2:r[r.length-1]}))}curvature(r){return M.curvature(r,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return M.inflections(this.points)}normal(r){return this._3d?this.__normal3(r):this.__normal2(r)}__normal2(r){let n=this.derivative(r),i=tr(n.x*n.x+n.y*n.y);return{t:r,x:-n.y/i,y:n.x/i}}__normal3(r){let n=this.derivative(r),i=this.derivative(r+.01),o=tr(n.x*n.x+n.y*n.y+n.z*n.z),a=tr(i.x*i.x+i.y*i.y+i.z*i.z);n.x/=o,n.y/=o,n.z/=o,i.x/=a,i.y/=a,i.z/=a;let s={x:i.y*n.z-i.z*n.y,y:i.z*n.x-i.x*n.z,z:i.x*n.y-i.y*n.x},l=tr(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=l,s.y/=l,s.z/=l;let u=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t:r,x:u[0]*n.x+u[1]*n.y+u[2]*n.z,y:u[3]*n.x+u[4]*n.y+u[5]*n.z,z:u[6]*n.x+u[7]*n.y+u[8]*n.z}}hull(r){let n=this.points,i=[],o=[],a=0;for(o[a++]=n[0],o[a++]=n[1],o[a++]=n[2],this.order===3&&(o[a++]=n[3]);n.length>1;){i=[];for(let s=0,l,u=n.length-1;s<u;s++)l=M.lerp(r,n[s],n[s+1]),o[a++]=l,i.push(l);n=i}return o}split(r,n){if(r===0&&n)return this.split(n).left;if(n===1)return this.split(r).right;let i=this.hull(r),o={left:this.order===2?new e([i[0],i[3],i[5]]):new e([i[0],i[4],i[7],i[9]]),right:this.order===2?new e([i[5],i[4],i[2]]):new e([i[9],i[8],i[6],i[3]]),span:i};return o.left._t1=M.map(0,0,1,this._t1,this._t2),o.left._t2=M.map(r,0,1,this._t1,this._t2),o.right._t1=M.map(r,0,1,this._t1,this._t2),o.right._t2=M.map(1,0,1,this._t1,this._t2),n?(n=M.map(n,r,1,0,1),o.right.split(n).left):o}extrema(){let r={},n=[];return this.dims.forEach(function(i){let o=function(s){return s[i]},a=this.dpoints[0].map(o);r[i]=M.droots(a),this.order===3&&(a=this.dpoints[1].map(o),r[i]=r[i].concat(M.droots(a))),r[i]=r[i].filter(function(s){return s>=0&&s<=1}),n=n.concat(r[i].sort(M.numberSort))}.bind(this)),r.values=n.sort(M.numberSort).filter(function(i,o){return n.indexOf(i)===o}),r}bbox(){let r=this.extrema(),n={};return this.dims.forEach(function(i){n[i]=M.getminmax(this,i,r[i])}.bind(this)),n}overlaps(r){let n=this.bbox(),i=r.bbox();return M.bboxoverlap(n,i)}offset(r,n){if(typeof n<"u"){let i=this.get(r),o=this.normal(r),a={c:i,n:o,x:i.x+o.x*n,y:i.y+o.y*n};return this._3d&&(a.z=i.z+o.z*n),a}if(this._linear){let i=this.normal(0),o=this.points.map(function(a){let s={x:a.x+r*i.x,y:a.y+r*i.y};return a.z&&i.z&&(s.z=a.z+r*i.z),s});return[new e(o)]}return this.reduce().map(function(i){return i._linear?i.offset(r)[0]:i.scale(r)})}simple(){if(this.order===3){let o=M.angle(this.points[0],this.points[3],this.points[1]),a=M.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&a<0||o<0&&a>0)return!1}let r=this.normal(0),n=this.normal(1),i=r.x*n.x+r.y*n.y;return this._3d&&(i+=r.z*n.z),er(Nh(i))<Dh/3}reduce(){let r,n=0,i=0,o=.01,a,s=[],l=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),n=u[0],r=1;r<u.length;r++)i=u[r],a=this.split(n,i),a._t1=n,a._t2=i,s.push(a),n=i;return s.forEach(function(f){for(n=0,i=0;i<=1;)for(i=n+o;i<=1+o;i+=o)if(a=f.split(n,i),!a.simple()){if(i-=o,er(n-i)<o)return[];a=f.split(n,i),a._t1=M.map(n,0,1,f._t1,f._t2),a._t2=M.map(i,0,1,f._t1,f._t2),l.push(a),n=i;break}n<1&&(a=f.split(n,1),a._t1=M.map(n,0,1,f._t1,f._t2),a._t2=f._t2,l.push(a))}),l}translate(r,n,i){i=typeof i=="number"?i:n;let o=this.order,a=this.points.map((s,l)=>(1-l/o)*n+l/o*i);return new e(this.points.map((s,l)=>({x:s.x+r.x*a[l],y:s.y+r.y*a[l]})))}scale(r){let n=this.order,i=!1;if(typeof r=="function"&&(i=r),i&&n===2)return this.raise().scale(i);let o=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):r,i?i(1):r);let s=i?i(0):r,l=i?i(1):r,u=[this.offset(0,10),this.offset(1,10)],f=[],h=M.lli4(u[0],u[0].c,u[1],u[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(c){let p=f[c*n]=M.copy(a[c*n]);p.x+=(c?l:s)*u[c].n.x,p.y+=(c?l:s)*u[c].n.y}),i?([0,1].forEach(function(c){if(!(n===2&&c)){var p=a[c+1],d={x:p.x-h.x,y:p.y-h.y},g=i?i((c+1)/n):r;i&&!o&&(g=-g);var y=tr(d.x*d.x+d.y*d.y);d.x/=y,d.y/=y,f[c+1]={x:p.x+g*d.x,y:p.y+g*d.y}}}),new e(f)):([0,1].forEach(c=>{if(n===2&&c)return;let p=f[c*n],d=this.derivative(c),g={x:p.x+d.x,y:p.y+d.y};f[c+1]=M.lli4(p,g,h,a[c+1])}),new e(f))}outline(r,n,i,o){if(n=n===void 0?r:n,this._linear){let _=this.normal(0),k=this.points[0],S=this.points[this.points.length-1],C,z,I;i===void 0&&(i=r,o=n),C={x:k.x+_.x*r,y:k.y+_.y*r},I={x:S.x+_.x*i,y:S.y+_.y*i},z={x:(C.x+I.x)/2,y:(C.y+I.y)/2};let O=[C,z,I];C={x:k.x-_.x*n,y:k.y-_.y*n},I={x:S.x-_.x*o,y:S.y-_.y*o},z={x:(C.x+I.x)/2,y:(C.y+I.y)/2};let T=[I,z,C],q=M.makeline(T[2],O[0]),w=M.makeline(O[2],T[0]),P=[q,new e(O),w,new e(T)];return new ut(P)}let a=this.reduce(),s=a.length,l=[],u=[],f,h=0,c=this.length(),p=typeof i<"u"&&typeof o<"u";function d(_,k,S,C,z){return function(I){let O=C/S,T=(C+z)/S,q=k-_;return M.map(I,0,1,_+O*q,_+T*q)}}a.forEach(function(_){let k=_.length();p?(l.push(_.scale(d(r,i,c,h,k))),u.push(_.scale(d(-n,-o,c,h,k)))):(l.push(_.scale(r)),u.push(_.scale(-n))),h+=k}),u=u.map(function(_){return f=_.points,f[3]?_.points=[f[3],f[2],f[1],f[0]]:_.points=[f[2],f[1],f[0]],_}).reverse();let g=l[0].points[0],y=l[s-1].points[l[s-1].points.length-1],x=u[s-1].points[u[s-1].points.length-1],m=u[0].points[0],b=M.makeline(x,g),A=M.makeline(y,m),v=[b].concat(l).concat([A]).concat(u);return new ut(v)}outlineshapes(r,n,i){n=n||r;let o=this.outline(r,n).curves,a=[];for(let s=1,l=o.length;s<l/2;s++){let u=M.makeshape(o[s],o[l-s],i);u.startcap.virtual=s>1,u.endcap.virtual=s<l/2-1,a.push(u)}return a}intersects(r,n){return r?r.p1&&r.p2?this.lineIntersects(r):(r instanceof e&&(r=r.reduce()),this.curveintersects(this.reduce(),r,n)):this.selfintersects(n)}lineIntersects(r){let n=Vs(r.p1.x,r.p2.x),i=Vs(r.p1.y,r.p2.y),o=Ws(r.p1.x,r.p2.x),a=Ws(r.p1.y,r.p2.y);return M.roots(this.points,r).filter(s=>{var l=this.get(s);return M.between(l.x,n,o)&&M.between(l.y,i,a)})}selfintersects(r){let n=this.reduce(),i=n.length-2,o=[];for(let a=0,s,l,u;a<i;a++)l=n.slice(a,a+1),u=n.slice(a+2),s=this.curveintersects(l,u,r),o.push(...s);return o}curveintersects(r,n,i){let o=[];r.forEach(function(s){n.forEach(function(l){s.overlaps(l)&&o.push({left:s,right:l})})});let a=[];return o.forEach(function(s){let l=M.pairiteration(s.left,s.right,i);l.length>0&&(a=a.concat(l))}),a}arcs(r){return r=r||.5,this._iterate(r,[])}_error(r,n,i,o){let a=(o-i)/4,s=this.get(i+a),l=this.get(o-a),u=M.dist(r,n),f=M.dist(r,s),h=M.dist(r,l);return er(f-u)+er(h-u)}_iterate(r,n){let i=0,o=1,a;do{a=0,o=1;let s=this.get(i),l,u,f,h,c=!1,p=!1,d,g=o,y=1,x=0;do if(p=c,h=f,g=(i+o)/2,x++,l=this.get(g),u=this.get(o),f=M.getccenter(s,l,u),f.interval={start:i,end:o},c=this._error(f,s,i,o)<=r,d=p&&!c,d||(y=o),c){if(o>=1){if(f.interval.end=y=1,h=f,o>1){let b={x:f.x+f.r*Th(f.e),y:f.y+f.r*Rh(f.e)};f.e+=M.angle({x:f.x,y:f.y},b,this.get(1))}break}o=o+(o-i)/2}else o=g;while(!d&&a++<100);if(a>=100)break;h=h||f,n.push(h),i=y}while(o<1);return n}};function Bn(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,i=Array(r);n<r;n++)i[n]=e[n];return i}function qh(e){if(Array.isArray(e))return e}function Lh(e){if(Array.isArray(e))return Bn(e)}function $h(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uh(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,a,s,l=[],u=!0,f=!1;try{if(a=(n=n.call(e)).next,r!==0)for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==r);u=!0);}catch(h){f=!0,o=h}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(f)throw o}}return l}}function jh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bh(e,r){if(e==null)return{};var n,i,o=Hh(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],r.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Hh(e,r){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(r.includes(i))continue;n[i]=e[i]}return n}function Gh(e,r){return qh(e)||Uh(e,r)||Zs(e,r)||jh()}function Vh(e){return Lh(e)||$h(e)||Zs(e)||Fh()}function Wh(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Zh(e){var r=Wh(e,"string");return typeof r=="symbol"?r:r+""}function Zs(e,r){if(e){if(typeof e=="string")return Bn(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bn(e,r):void 0}}var Ys=(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=(r instanceof Array?r.length?r:[void 0]:[r]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),a=e.reduce(function(l,u){var f=l,h=u;return o.forEach(function(c,p){var d=c.keyAccessor,g=c.isProp,y;if(g){var x=h,m=x[d],b=Bh(x,[d].map(Zh));y=m,h=b}else y=d(h,p);p+1<o.length?(f.hasOwnProperty(y)||(f[y]={}),f=f[y]):n?(f.hasOwnProperty(y)||(f[y]=[]),f[y].push(h)):f[y]=h}),l},{});n instanceof Function&&(function l(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;f===o.length?Object.keys(u).forEach(function(h){return u[h]=n(u[h])}):Object.values(u).forEach(function(h){return l(h,f+1)})})(a);var s=a;return i&&(s=[],(function l(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];f.length===o.length?s.push({keys:f,vals:u}):Object.entries(u).forEach(function(h){var c=Gh(h,2),p=c[0],d=c[1];return l(d,[].concat(Vh(f),[p]))})})(a),r instanceof Array&&r.length===0&&s.length===1&&(s[0].keys=[])),s});function Xs(e,r){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(r).domain(e);break}return this}var Hn=Symbol("implicit");function rr(){var e=new it,r=[],n=[],i=Hn;function o(a){let s=e.get(a);if(s===void 0){if(i!==Hn)return i;e.set(a,s=r.push(a)-1)}return n[s%n.length]}return o.domain=function(a){if(!arguments.length)return r.slice();r=[],e=new it;for(let s of a)e.has(s)||e.set(s,r.push(s)-1);return o},o.range=function(a){return arguments.length?(n=Array.from(a),o):n.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.copy=function(){return rr(r,n).unknown(i)},Xs.apply(o,arguments),o}function Qs(e){for(var r=e.length/6|0,n=new Array(r),i=0;i<r;)n[i]="#"+e.slice(i*6,++i*6);return n}var Gn=Qs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Yh(e,r){r===void 0&&(r={});var n=r.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",n==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var Xh=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;Yh(Xh);function Wn(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,i=Array(r);n<r;n++)i[n]=e[n];return i}function Qh(e){if(Array.isArray(e))return e}function Kh(e){if(Array.isArray(e))return Wn(e)}function Ks(e,r,n){if(nl())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,r);var o=new(e.bind.apply(e,i));return o}function ir(e,r,n){return(r=ip(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function nl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nl=function(){return!!e})()}function Jh(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ep(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,o,a,s,l=[],u=!0,f=!1;try{if(a=(n=n.call(e)).next,r!==0)for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==r);u=!0);}catch(h){f=!0,o=h}finally{try{if(!u&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(f)throw o}}return l}}function tp(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rp(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Js(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function ft(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Js(Object(n),!0).forEach(function(i){ir(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Js(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function nr(e,r){return Qh(e)||ep(e,r)||il(e,r)||tp()}function pe(e){return Kh(e)||Jh(e)||il(e)||rp()}function np(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ip(e){var r=np(e,"string");return typeof r=="symbol"?r:r+""}function Zn(e){"@babel/helpers - typeof";return Zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zn(e)}function il(e,r){if(e){if(typeof e=="string")return Wn(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wn(e,r):void 0}}var op=rr(Gn);function el(e,r,n){!r||typeof n!="string"||e.filter(function(i){return!i[n]}).forEach(function(i){i[n]=op(r(i))})}function ap(e,r){var n=e.nodes,i=e.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.nodeFilter,s=a===void 0?function(){return!0}:a,l=o.onLoopError,u=l===void 0?function(d){throw"Invalid DAG structure! Found cycle in node path: ".concat(d.join(" -> "),".")}:l,f={};n.forEach(function(d){return f[r(d)]={data:d,out:[],depth:-1,skip:!s(d)}}),i.forEach(function(d){var g=d.source,y=d.target,x=v(g),m=v(y);if(!f.hasOwnProperty(x))throw"Missing source node with id: ".concat(x);if(!f.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var b=f[x],A=f[m];b.out.push(A);function v(_){return Zn(_)==="object"?r(_):_}});var h=[];p(Object.values(f));var c=Object.assign.apply(Object,[{}].concat(pe(Object.entries(f).filter(function(d){var g=nr(d,2),y=g[1];return!y.skip}).map(function(d){var g=nr(d,2),y=g[0],x=g[1];return ir({},y,x.depth)}))));return c;function p(d){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=function(){var v=d[m];if(g.indexOf(v)!==-1){var _=[].concat(pe(g.slice(g.indexOf(v))),[v]).map(function(k){return r(k.data)});return h.some(function(k){return k.length===_.length&&k.every(function(S,C){return S===_[C]})})||(h.push(_),u(_)),1}y>v.depth&&(v.depth=y,p(v.out,[].concat(pe(g),[v]),y+(v.skip?0:1)))},m=0,b=d.length;m<b;m++)x()}}var sp=2,ee=function(r,n){return n.onNeedsRedraw&&n.onNeedsRedraw()},tl=function(r,n){if(!n.isShadow){var i=F(n.linkDirectionalParticles);n.graphData.links.forEach(function(o){var a=Math.round(Math.abs(i(o)));a?o.__photons=pe(Array(a)).map(function(){return{}}):delete o.__photons})}},Wr=Bt({props:{graphData:{default:{nodes:[],links:[]},onChange:function(r,n){n.engineRunning=!1,tl(r,n)}},dagMode:{onChange:function(r,n){!r&&(n.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(r){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:ee},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:ee},nodeColor:{default:"color",triggerUpdate:!1,onChange:ee},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:ee},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ee},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:ee},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:ee},linkColor:{default:"color",triggerUpdate:!1,onChange:ee},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:ee},linkWidth:{default:1,triggerUpdate:!1,onChange:ee},linkCurvature:{default:0,triggerUpdate:!1,onChange:ee},linkCanvasObject:{triggerUpdate:!1,onChange:ee},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ee},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:ee},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:ee},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:ee},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:tl},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(r,n){n.forceLayout.alphaDecay(r)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(r,n){n.forceLayout.alphaTarget(r)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(r,n){n.forceLayout.velocityDecay(r)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(r,n,i){return i===void 0?r.forceLayout.force(n):(r.forceLayout.force(n,i),this)},d3ReheatSimulation:function(r){return r.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(r){return r.cntTicks=0,r.startTickTime=new Date,r.engineRunning=!0,this},isEngineRunning:function(r){return!!r.engineRunning},tickFrame:function(r){return!r.isShadow&&n(),o(),!r.isShadow&&a(),!r.isShadow&&s(),i(),this;function n(){r.engineRunning&&(++r.cntTicks>r.cooldownTicks||new Date-r.startTickTime>r.cooldownTime||r.d3AlphaMin>0&&r.forceLayout.alpha()<r.d3AlphaMin?(r.engineRunning=!1,r.onEngineStop()):(r.forceLayout.tick(),r.onEngineTick()))}function i(){var l=F(r.nodeVisibility),u=F(r.nodeVal),f=F(r.nodeColor),h=F(r.nodeCanvasObjectMode),c=r.ctx,p=r.isShadow/r.globalScale,d=r.graphData.nodes.filter(l);c.save(),d.forEach(function(g){var y=h(g);if(r.nodeCanvasObject&&(y==="before"||y==="replace")&&(r.nodeCanvasObject(g,c,r.globalScale),y==="replace")){c.restore();return}var x=Math.sqrt(Math.max(0,u(g)||1))*r.nodeRelSize+p;c.beginPath(),c.arc(g.x,g.y,x,0,2*Math.PI,!1),c.fillStyle=f(g)||"rgba(31, 120, 180, 0.92)",c.fill(),r.nodeCanvasObject&&y==="after"&&r.nodeCanvasObject(g,r.ctx,r.globalScale)}),c.restore()}function o(){var l=F(r.linkVisibility),u=F(r.linkColor),f=F(r.linkWidth),h=F(r.linkLineDash),c=F(r.linkCurvature),p=F(r.linkCanvasObjectMode),d=r.ctx,g=r.isShadow*2,y=r.graphData.links.filter(l);y.forEach(k);var x=[],m=[],b=y;if(r.linkCanvasObject){var A=[],v=[];y.forEach(function(S){return({before:x,after:m,replace:A}[p(S)]||v).push(S)}),b=[].concat(pe(x),m,v),x=x.concat(A)}d.save(),x.forEach(function(S){return r.linkCanvasObject(S,d,r.globalScale)}),d.restore();var _=Ys(b,[u,f,h]);d.save(),Object.entries(_).forEach(function(S){var C=nr(S,2),z=C[0],I=C[1],O=!z||z==="undefined"?"rgba(0,0,0,0.15)":z;Object.entries(I).forEach(function(T){var q=nr(T,2),w=q[0],P=q[1],E=(w||1)/r.globalScale+g;Object.entries(P).forEach(function(R){var D=nr(R,2);D[0];var L=D[1],$=h(L[0]);d.beginPath(),L.forEach(function(U){var j=U.source,Z=U.target;if(!(!j||!Z||!j.hasOwnProperty("x")||!Z.hasOwnProperty("x"))){d.moveTo(j.x,j.y);var W=U.__controlPoints;W?d[W.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(d,pe(W).concat([Z.x,Z.y])):d.lineTo(Z.x,Z.y)}}),d.strokeStyle=O,d.lineWidth=E,d.setLineDash($||[]),d.stroke()})})}),d.restore(),d.save(),m.forEach(function(S){return r.linkCanvasObject(S,d,r.globalScale)}),d.restore();function k(S){var C=c(S);if(!C){S.__controlPoints=null;return}var z=S.source,I=S.target;if(!(!z||!I||!z.hasOwnProperty("x")||!I.hasOwnProperty("x"))){var O=Math.sqrt(Math.pow(I.x-z.x,2)+Math.pow(I.y-z.y,2));if(O>0){var T=Math.atan2(I.y-z.y,I.x-z.x),q=O*C,w={x:(z.x+I.x)/2+q*Math.cos(T-Math.PI/2),y:(z.y+I.y)/2+q*Math.sin(T-Math.PI/2)};S.__controlPoints=[w.x,w.y]}else{var P=C*70;S.__controlPoints=[I.x,I.y-P,I.x+P,I.y]}}}}function a(){var l=1.6,u=.2,f=F(r.linkDirectionalArrowLength),h=F(r.linkDirectionalArrowRelPos),c=F(r.linkVisibility),p=F(r.linkDirectionalArrowColor||r.linkColor),d=F(r.nodeVal),g=r.ctx;g.save(),r.graphData.links.filter(c).forEach(function(y){var x=f(y);if(!(!x||x<0)){var m=y.source,b=y.target;if(!(!m||!b||!m.hasOwnProperty("x")||!b.hasOwnProperty("x"))){var A=Math.sqrt(Math.max(0,d(m)||1))*r.nodeRelSize,v=Math.sqrt(Math.max(0,d(b)||1))*r.nodeRelSize,_=Math.min(1,Math.max(0,h(y))),k=p(y)||"rgba(0,0,0,0.28)",S=x/l/2,C=y.__controlPoints&&Ks(Qe,[m.x,m.y].concat(pe(y.__controlPoints),[b.x,b.y])),z=C?function(E){return C.get(E)}:function(E){return{x:m.x+(b.x-m.x)*E||0,y:m.y+(b.y-m.y)*E||0}},I=C?C.length():Math.sqrt(Math.pow(b.x-m.x,2)+Math.pow(b.y-m.y,2)),O=A+x+(I-A-v-x)*_,T=z(O/I),q=z((O-x)/I),w=z((O-x*(1-u))/I),P=Math.atan2(T.y-q.y,T.x-q.x)-Math.PI/2;g.beginPath(),g.moveTo(T.x,T.y),g.lineTo(q.x+S*Math.cos(P),q.y+S*Math.sin(P)),g.lineTo(w.x,w.y),g.lineTo(q.x-S*Math.cos(P),q.y-S*Math.sin(P)),g.fillStyle=k,g.fill()}}}),g.restore()}function s(){var l=F(r.linkDirectionalParticles),u=F(r.linkDirectionalParticleSpeed),f=F(r.linkDirectionalParticleOffset),h=F(r.linkDirectionalParticleWidth),c=F(r.linkVisibility),p=F(r.linkDirectionalParticleColor||r.linkColor),d=r.ctx;d.save(),r.graphData.links.filter(c).forEach(function(g){var y=l(g);if(!(!g.hasOwnProperty("__photons")||!g.__photons.length)){var x=g.source,m=g.target;if(!(!x||!m||!x.hasOwnProperty("x")||!m.hasOwnProperty("x"))){var b=u(g),A=Math.abs(f(g)),v=g.__photons||[],_=Math.max(0,h(g)/2)/Math.sqrt(r.globalScale),k=p(g)||"rgba(0,0,0,0.28)";d.fillStyle=k;var S=g.__controlPoints?Ks(Qe,[x.x,x.y].concat(pe(g.__controlPoints),[m.x,m.y])):null,C=0,z=!1;v.forEach(function(I){var O=!!I.__singleHop;if(I.hasOwnProperty("__progressRatio")||(I.__progressRatio=O?0:(C+A)/y),!O&&C++,I.__progressRatio+=b,I.__progressRatio>=1)if(!O)I.__progressRatio=I.__progressRatio%1;else{z=!0;return}var T=I.__progressRatio,q=S?S.get(T):{x:x.x+(m.x-x.x)*T||0,y:x.y+(m.y-x.y)*T||0};r.linkDirectionalParticleCanvasObject?r.linkDirectionalParticleCanvasObject(q.x,q.y,g,d,r.globalScale):(d.beginPath(),d.arc(q.x,q.y,_,0,2*Math.PI,!1),d.fill())}),z&&(g.__photons=g.__photons.filter(function(I){return!I.__singleHop||I.__progressRatio<=1}))}}}),d.restore()}},emitParticle:function(r,n){return n&&(!n.__photons&&(n.__photons=[]),n.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:Ln().force("link",Dn()).force("charge",$n()).force("center",zn()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(r,n){n.ctx=r},update:function(r,n){r.engineRunning=!1,r.onUpdate(),r.nodeAutoColorBy!==null&&el(r.graphData.nodes,F(r.nodeAutoColorBy),r.nodeColor),r.linkAutoColorBy!==null&&el(r.graphData.links,F(r.linkAutoColorBy),r.linkColor),r.graphData.links.forEach(function(p){p.source=p[r.linkSource],p.target=p[r.linkTarget]}),r.forceLayout.stop().alpha(1).nodes(r.graphData.nodes);var i=r.forceLayout.force("link");i&&i.id(function(p){return p[r.nodeId]}).links(r.graphData.links);var o=r.dagMode&&ap(r.graphData,function(p){return p[r.nodeId]},{nodeFilter:r.dagNodeFilter,onLoopError:r.onDagError||void 0}),a=Math.max.apply(Math,pe(Object.values(o||[]))),s=r.dagLevelDistance||r.graphData.nodes.length/(a||1)*sp*(["radialin","radialout"].indexOf(r.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(n.dagMode)){var l=["lr","rl"].includes(n.dagMode)?"fx":"fy";r.graphData.nodes.filter(r.dagNodeFilter).forEach(function(p){return delete p[l]})}if(["lr","rl","td","bu"].includes(r.dagMode)){var u=["rl","bu"].includes(r.dagMode),f=function(d){return(o[d[r.nodeId]]-a/2)*s*(u?-1:1)},h=["lr","rl"].includes(r.dagMode)?"fx":"fy";r.graphData.nodes.filter(r.dagNodeFilter).forEach(function(p){return p[h]=f(p)})}r.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(r.dagMode)!==-1?Un(function(p){var d=o[p[r.nodeId]]||-1;return(r.dagMode==="radialin"?a-d:d)*s}).strength(function(p){return r.dagNodeFilter(p)?1:0}):null);for(var c=0;c<r.warmupTicks&&!(r.d3AlphaMin>0&&r.forceLayout.alpha()<r.d3AlphaMin);c++)r.forceLayout.tick();this.resetCountdown(),r.onFinishUpdate()}});function ol(e,r){var n=e instanceof Array?e:[e],i=new r;return i._destructor&&i._destructor(),{linkProp:function(a){return{default:i[a](),onChange:function(l,u){n.forEach(function(f){return u[f][a](l)})},triggerUpdate:!1}},linkMethod:function(a){return function(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];var h=[];return n.forEach(function(c){var p=s[c],d=p[a].apply(p,u);d!==p&&h.push(d)}),h.length?h[0]:this}}}}var lp=800,up=4,fp=5,al=ol("forceGraph",Wr),cp=ol(["forceGraph","shadowGraph"],Wr),hp=Object.assign.apply(Object,pe(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return ir({},e,al.linkProp(e))})).concat(pe(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return ir({},e,cp.linkProp(e))})))),pp=Object.assign.apply(Object,pe(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return ir({},e,al.linkMethod(e))})));function Vn(e){if(e.canvas){var r=e.canvas.width,n=e.canvas.height;r===300&&n===150&&(r=n=0);var i=window.devicePixelRatio;r/=i,n/=i,[e.canvas,e.shadowCanvas].forEach(function(a){a.style.width="".concat(e.width,"px"),a.style.height="".concat(e.height,"px"),a.width=e.width*i,a.height=e.height*i,!r&&!n&&a.getContext("2d").scale(i,i)});var o=ae(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-r)/2/o,(e.height-n)/2/o),e.needsRedraw=!0}}function sl(e){var r=window.devicePixelRatio;e.setTransform(r,0,0,r,0,0)}function rl(e,r,n){e.save(),sl(e),e.clearRect(0,0,r,n),e.restore()}var ll=Bt({props:ft({width:{default:window.innerWidth,onChange:function(r,n){return Vn(n)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(r,n){return Vn(n)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(r,n){[r.nodes,r.links].every(function(o){return(o||[]).every(function(a){return!a.hasOwnProperty("__indexColor")})})&&n.colorTracker.reset(),[{type:"Node",objs:r.nodes},{type:"Link",objs:r.links}].forEach(i),n.forceGraph.graphData(r),n.shadowGraph.graphData(r);function i(o){var a=o.type,s=o.objs;s.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var u=n.colorTracker.lookup(l.__indexColor);return!u||!u.hasOwnProperty("d")||u.d!==l}).forEach(function(l){l.__indexColor=n.colorTracker.register({type:a,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(r,n){n.canvas&&r&&(n.canvas.style.background=r)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(r,n){n.shadowGraph.nodeCanvasObject(r?function(i,o,a){return r(i,i.__indexColor,o,a)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(r,n){n.shadowGraph.linkCanvasObject(r?function(i,o,a){return r(i,i.__indexColor,o,a)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(r,n){n.zoom.scaleExtent([r,n.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(r,n){n.zoom.scaleExtent([n.zoom.scaleExtent()[0],r])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(r,n){n.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},hp),aliases:{stopAnimation:"pauseAnimation"},methods:ft({graph2ScreenCoords:function(r,n,i){var o=ae(r.canvas);return{x:n*o.k+o.x,y:i*o.k+o.y}},screen2GraphCoords:function(r,n,i){var o=ae(r.canvas);return{x:(n-o.x)/o.k,y:(i-o.y)/o.k}},centerAt:function(r,n,i,o){if(!r.canvas)return null;if(n!==void 0||i!==void 0){var a=Object.assign({},n!==void 0?{x:n}:{},i!==void 0?{y:i}:{});return o?r.tweenGroup.add(new vn(s()).to(a,o).easing($e.Quadratic.Out).onUpdate(l).start()):l(a),this}return s();function s(){var u=ae(r.canvas);return{x:(r.width/2-u.x)/u.k,y:(r.height/2-u.y)/u.k}}function l(u){var f=u.x,h=u.y;r.zoom.translateTo(r.zoom.__baseElem,f===void 0?s().x:f,h===void 0?s().y:h),r.needsRedraw=!0}},zoom:function(r,n,i){if(!r.canvas)return null;if(n!==void 0)return i?r.tweenGroup.add(new vn({k:o()}).to({k:n},i).easing($e.Quadratic.Out).onUpdate(function(s){var l=s.k;return a(l)}).start()):a(n),this;return o();function o(){return ae(r.canvas).k}function a(s){r.zoom.scaleTo(r.zoom.__baseElem,s),r.needsRedraw=!0}},zoomToFit:function(r){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];var l=this.getGraphBbox.apply(this,a);if(l){var u={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},f=Math.max(1e-12,Math.min(1e12,(r.width-i*2)/(l.x[1]-l.x[0]),(r.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(u.x,u.y,n),this.zoom(f,n)}return this},getGraphBbox:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=F(r.nodeVal),o=function(l){return Math.sqrt(Math.max(0,i(l)||1))*r.nodeRelSize},a=r.graphData.nodes.filter(n).map(function(s){return{x:s.x,y:s.y,r:o(s)}});return a.length?{x:[Ut(a,function(s){return s.x-s.r}),$t(a,function(s){return s.x+s.r})],y:[Ut(a,function(s){return s.y-s.r}),$t(a,function(s){return s.y+s.r})]}:null},pauseAnimation:function(r){return r.animationFrameRequestId&&(cancelAnimationFrame(r.animationFrameRequestId),r.animationFrameRequestId=null),this},resumeAnimation:function(r){return r.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},pp),stateInit:function(){return{lastSetZoom:1,zoom:dn(),forceGraph:new Wr,shadowGraph:new Wr().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new _a,tweenGroup:new yn}},init:function(r,n){var i=this;r.innerHTML="";var o=document.createElement("div");o.classList.add("force-graph-container"),o.style.position="relative",r.appendChild(o),n.canvas=document.createElement("canvas"),n.backgroundColor&&(n.canvas.style.background=n.backgroundColor),o.appendChild(n.canvas),n.shadowCanvas=document.createElement("canvas");var a=n.canvas.getContext("2d"),s=n.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},u=function(){var c=null,p=window.devicePixelRatio,d=l.x>0&&l.y>0?s.getImageData(l.x*p,l.y*p,1,1):null;return d&&(c=n.colorTracker.lookup(d.data)),c};X(n.canvas).call(Jr().subject(function(){if(!n.enableNodeDrag)return null;var h=u();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var c=h.subject;c.__initialDragPos={x:c.x,y:c.y,fx:c.fx,fy:c.fy},h.active||(c.fx=c.x,c.fy=c.y),n.canvas.classList.add("grabbable")}).on("drag",function(h){var c=h.subject,p=c.__initialDragPos,d=h,g=ae(n.canvas).k,y={x:p.x+(d.x-p.x)/g-c.x,y:p.y+(d.y-p.y)/g-c.y};["x","y"].forEach(function(x){return c["f".concat(x)]=c[x]=p[x]+(d[x]-p[x])/g}),!(!c.__dragged&&fp>=Math.sqrt(Tr(["x","y"].map(function(x){return Math.pow(h[x]-p[x],2)}))))&&(n.forceGraph.d3AlphaTarget(.3).resetCountdown(),n.isPointerDragging=!0,c.__dragged=!0,n.onNodeDrag(c,y))}).on("end",function(h){var c=h.subject,p=c.__initialDragPos,d={x:c.x-p.x,y:c.y-p.y};p.fx===void 0&&(c.fx=void 0),p.fy===void 0&&(c.fy=void 0),delete c.__initialDragPos,n.forceGraph.d3AlphaTarget()&&n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.canvas.classList.remove("grabbable"),n.isPointerDragging=!1,c.__dragged&&(delete c.__dragged,n.onNodeDragEnd(c,d))})),n.zoom(n.zoom.__baseElem=X(n.canvas)),n.zoom.__baseElem.on("dblclick.zoom",null),n.zoom.filter(function(h){return!h.button&&n.enableZoomPanInteraction&&(h.type!=="wheel"||F(n.enableZoomInteraction)(h))&&(h.type==="wheel"||F(n.enablePanInteraction)(h))}).on("zoom",function(h){var c=h.transform;[a,s].forEach(function(p){sl(p),p.translate(c.x,c.y),p.scale(c.k,c.k)}),n.isPointerDragging=!0,n.onZoom&&n.onZoom(ft(ft({},c),i.centerAt())),n.needsRedraw=!0}).on("end",function(h){n.isPointerDragging=!1,n.onZoomEnd&&n.onZoomEnd(ft(ft({},h.transform),i.centerAt()))}),Vn(n),n.forceGraph.onNeedsRedraw(function(){return n.needsRedraw=!0}).onFinishUpdate(function(){ae(n.canvas).k===n.lastSetZoom&&n.graphData.nodes.length&&(n.zoom.scaleTo(n.zoom.__baseElem,n.lastSetZoom=up/Math.cbrt(n.graphData.nodes.length)),n.needsRedraw=!0)}),n.tooltip=new $a(o),["pointermove","pointerdown"].forEach(function(h){return o.addEventListener(h,function(c){h==="pointerdown"&&(n.isPointerPressed=!0,n.pointerDownEvent=c),!n.isPointerDragging&&c.type==="pointermove"&&n.onBackgroundClick&&(c.pressure>0||n.isPointerPressed)&&(c.pointerType==="mouse"||c.movementX===void 0||[c.movementX,c.movementY].some(function(g){return Math.abs(g)>1}))&&(n.isPointerDragging=!0);var p=d(o);l.x=c.pageX-p.left,l.y=c.pageY-p.top;function d(g){var y=g.getBoundingClientRect(),x=window.pageXOffset||document.documentElement.scrollLeft,m=window.pageYOffset||document.documentElement.scrollTop;return{top:y.top+m,left:y.left+x}}},{passive:!0})}),o.addEventListener("pointerup",function(h){if(n.isPointerPressed){if(n.isPointerPressed=!1,n.isPointerDragging){n.isPointerDragging=!1;return}var c=[h,n.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(n.hoverObj){var p=n["on".concat(n.hoverObj.type,"Click")];p&&p.apply(void 0,[n.hoverObj.d].concat(c))}else n.onBackgroundClick&&n.onBackgroundClick.apply(n,c);if(h.button===2)if(n.hoverObj){var d=n["on".concat(n.hoverObj.type,"RightClick")];d&&d.apply(void 0,[n.hoverObj.d].concat(c))}else n.onBackgroundRightClick&&n.onBackgroundRightClick.apply(n,c)})}},{passive:!0}),o.addEventListener("contextmenu",function(h){return!n.onBackgroundRightClick&&!n.onNodeRightClick&&!n.onLinkRightClick?!0:(h.preventDefault(),!1)}),n.forceGraph(a),n.shadowGraph(s);var f=gn(function(){rl(s,n.width,n.height),n.shadowGraph.linkWidth(function(c){return F(n.linkWidth)(c)+n.linkHoverPrecision});var h=ae(n.canvas);n.shadowGraph.globalScale(h.k).tickFrame()},lp);n.flushShadowCanvas=f.flush,(this._animationCycle=function h(){var c=!n.autoPauseRedraw||!!n.needsRedraw||n.forceGraph.isEngineRunning()||n.graphData.links.some(function(A){return A.__photons&&A.__photons.length});if(n.needsRedraw=!1,n.enablePointerInteraction){var p=n.isPointerDragging?null:u();if(p!==n.hoverObj){var d=n.hoverObj,g=d?d.type:null,y=p?p.type:null;if(g&&g!==y){var x=n["on".concat(g,"Hover")];x&&x(null,d.d)}if(y){var m=n["on".concat(y,"Hover")];m&&m(p.d,g===y?d.d:null)}n.tooltip.content(p&&F(n["".concat(p.type.toLowerCase(),"Label")])(p.d)||null),n.canvas.classList[(p&&n["on".concat(y,"Click")]||!p&&n.onBackgroundClick)&&F(n.showPointerCursor)(p?.d)?"add":"remove"]("clickable"),n.hoverObj=p}c&&f()}if(c){rl(a,n.width,n.height);var b=ae(n.canvas).k;n.onRenderFramePre&&n.onRenderFramePre(a,b),n.forceGraph.globalScale(b).tickFrame(),n.onRenderFramePost&&n.onRenderFramePost(a,b)}n.tweenGroup.update(),n.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(r){}});var or=class{constructor(r,n){this.bus=r,this.log=n,this.graph=null,this.nodes=[],this.links=[],this.layout={},this.bgImage=null,this.highlight={nodes:[],links:[]},this.createdAt=new Date().valueOf(),this.colorsCache={},this.colors={},this.bus.tap("zigbee-coordinator",i=>this.#a(this.nodes,i)),this.bus.tap("options-show-link-particles",i=>this.#e(i)),this.bus.tap("options-node-repulsion-force",i=>this.#r(i)),this.bus.tap("options-persist-dragged-nodes",i=>this.#n(i)),this.bus.tap("options-bg-image-url",i=>this.#t(i)),this.bus.tap("query-device-lqi-request",i=>this.#o(i,!0,!1)),this.bus.tap("query-device-lqi-response",i=>this.#o(i.ieeeAddr,!1,!1)),this.bus.tap("query-device-lqi-error",i=>this.#o(i,!1,!0)),this.bus.tap("add-graph-links",i=>this.#f(i)),this.bus.tap("zoom-on-node",i=>this.#h(i))}init(r){if(this.graph!==null)return!1;let n=getComputedStyle(r);return this.colors={BgColor:n.getPropertyValue("--primary-background-color"),TextColor:n.getPropertyValue("--primary-text-color"),Yellow:n.getPropertyValue("--Yellow"),Orange:n.getPropertyValue("--Orange"),Red:n.getPropertyValue("--Red"),Magenta:n.getPropertyValue("--Magenta"),Violet:n.getPropertyValue("--Violet"),Blue:n.getPropertyValue("--Blue"),Cyan:n.getPropertyValue("--Cyan"),Green:n.getPropertyValue("--Green")},this.graph=new ll(r).width(r.clientWidth).height(r.clientHeight).nodeId("addr").nodeLabel("name").nodeCanvasObject((i,o)=>this.#p(i,o)).linkSource("srcAddr").linkTarget("dstAddr").linkColor(i=>this.#g(i)).linkDirectionalParticles(i=>this.highlight.links.length===0||this.highlight.links.includes(i)?1:0).linkCurvature("curvature").linkCanvasObject((i,o)=>this.#m(i,o)).linkCanvasObjectMode(()=>"after").cooldownTime(5e3).autoPauseRedraw(!1).onNodeDragEnd(i=>{i.fx=i.x,i.fy=i.y,this.highlight={nodes:[],links:[]},this.highlight.nodes.push(i),this.graph.graphData().links.forEach(o=>{o.source===i?(this.highlight.nodes.push(o.target),this.highlight.links.push(o)):i.type==="EndDevice"&&o.target===i&&(this.highlight.nodes.push(o.source),this.highlight.links.push(o))}),this.#s(),this.bus.relay("fix-node-position",i),i.error&&this.bus.relay("retry-device-query",i.addr)}).onNodeClick(i=>{i.fx=void 0,i.fy=void 0,this.#i(),this.bus.relay("clear-node-position",i)}).onBackgroundClick(()=>this.#i()).onRenderFramePre((i,o)=>{if(!this.bgImage)return;let a=this.bgImage.width,s=this.bgImage.height;!a||!s||(a>512&&(s=Math.round(s/(a/512)),a=512),i.drawImage(this.bgImage,0-a/2,0-s/2,a,s))}),this.graph.d3Force("charge").strength(()=>-100),this.#s(),r.addEventListener("dblclick",()=>this.#c()),this.bus.relay("zigbee-graph-ready"),setTimeout(()=>this.graph.zoom(1.5,300),500),!0}#e(r){this.graph!==null&&(r?(this.graph.linkDirectionalParticles(1),this.graph.linkDirectionalArrowLength(0)):(this.graph.linkDirectionalParticles(0),this.graph.linkDirectionalArrowLength(3),this.graph.linkDirectionalArrowRelPos(1)))}#r(r){if(this.graph===null)return;let n=this.graph.d3Force("charge").strength()(),i=-1*r*r*50;n!==i&&(this.graph.d3Force("charge").strength(()=>i),this.#s())}#n({enabled:r,layout:n}){this.layout=n,r?this.graph.graphData().nodes.forEach(i=>{this.layout[i.addr]&&(i.fx=i.x=this.layout[i.addr].x,i.fy=i.y=this.layout[i.addr].y)}):this.graph.graphData().nodes.forEach(i=>{i.fx=void 0,i.fy=void 0})}async#t(r){await this.log.record("Applying background image",n=>{if(!r){n.done("none"),this.bgImage=null;return}this.bgImage=new Image,this.bgImage.onload=()=>{n.done(`${r} (${this.bgImage.width}x${this.bgImage.height})`)},this.bgImage.onerror=()=>{throw new Error(`Invalid image: ${r}`)},this.bgImage.src=r})}#i(){this.highlight.links.length!==0&&(this.highlight={nodes:[],links:[]},this.graph.graphData(this.graph.graphData()))}#o(r,n,i){let o=this.nodes.find(a=>a.addr===r);o&&(!n&&!o.talking||Object.assign(o,{talking:n,error:i}))}#f(r){r.forEach(n=>this.#l(this.nodes,this.links,n)),this.#s()}#l(r,n,i){return this.#a(r,{addr:i.srcAddr,name:i.srcName,type:i.srcType}),this.#a(r,{addr:i.dstAddr,name:i.dstName,type:i.dstType}),n.find(a=>a.srcAddr===i.srcAddr&&a.dstAddr===i.dstAddr)?!1:(n.push({srcAddr:i.srcAddr,dstAddr:i.dstAddr,lqi:i.lqi}),!0)}#a(r,n){return r.find(o=>o.addr===n.addr)?!1:(this.layout[n.addr]&&(n.fx=n.x=this.layout[n.addr].x,n.fy=n.y=this.layout[n.addr].y),r.push(n),!0)}#s(){let{nodes:r,links:n}=this.graph.graphData(),i={nodes:[...r],links:[...n]};this.nodes.forEach(o=>this.#a(i.nodes,o)),this.links.forEach(o=>this.#l(i.nodes,i.links,o)),i.links.forEach(o=>{if(o.curvature!==void 0)return;let a=i.links.find(s=>s.srcAddr===o.dstAddr&&s.dstAddr===o.srcAddr);if(a===void 0){o.curvature=0;return}o.curvature=.2,a.curvature=.2}),this.graph.graphData(i)}#c(){this.graph.zoomToFit(500,10)}#h(r){let n=this.log.start(`Zooming on node ${r}`),i=this.nodes.find(o=>o.addr===r);if(!i)return n.fail("device not discovered");this.graph.zoomToFit(350,10),setTimeout(()=>{this.graph.centerAt(i.x,i.y,1500),this.graph.zoom(12,2e3),n.done(`x:${i.x} \u2014 y:${i.y}`)},350)}#p(r,n){let o=0;r.talking&&(o=(+new Date-this.createdAt)%1e3/1e3,o<.1?o=o*10:o=1-(o-.1)*1.1111);let a=this.#d(r);n.fillStyle=a,n.beginPath(),n.arc(r.x,r.y,3+2*o,0,2*Math.PI,!1),n.fill(),n.lineWidth=.2,n.strokeStyle=this.#u(n.fillStyle,-30),n.stroke(),(r.talking===!0||r.talking===!1)&&(n.fillStyle=this.#u(n.fillStyle,40),n.beginPath(),n.arc(r.x,r.y,1+2*o,0,2*Math.PI,!1),n.fill()),n.fillStyle=this.colors.TextColor+(a.length===7?"":a.substring(7)),n.font="3px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(r.name,r.x,r.y+5)}#d(r){let n=this.highlight.links.length===0||this.highlight.nodes.includes(r)?"":"33";return r.error===!0?this.colors.Magenta+n:{Repeater:this.colors.Blue+n,EndDevice:this.colors.Green+n,Coordinator:this.colors.Orange+n}[r.type]||this.colors.Magenta+n}#m(r,n){if(!this.highlight.links.includes(r))return;let i=3,o=this.graph.nodeRelSize()*1.5,a=r.source,s=r.target;if(typeof a!="object"||typeof s!="object")return;let l={x:a.x+(s.x-a.x)/2+(s.y-a.y)*r.curvature/2,y:a.y+(s.y-a.y)/2-(s.x-a.x)*r.curvature/2},u={x:s.x-a.x,y:s.y-a.y},f=Math.sqrt(Math.pow(u.x,2)+Math.pow(u.y,2))-o*2,h=Math.atan2(u.y,u.x);h>Math.PI/2&&(h=-(Math.PI-h)),h<-Math.PI/2&&(h=-(-Math.PI-h));let c=`${r.lqi}`;n.font="3px sans-serif";let d=[n.measureText(c).width+1,3].map(g=>g+.7);n.save(),n.translate(l.x,l.y),n.rotate(h),n.fillStyle=this.colors.BgColor,n.beginPath(),n.roundRect(-d[0]/2,-d[1]/2,...d,1),n.fill(),n.textAlign="center",n.textBaseline="middle",n.fillStyle=this.colors.TextColor,n.fillText(c,0,.2),n.restore()}#g(r){let n=this.highlight.links.length===0||this.highlight.links.includes(r)?"":"33";return r.lqi>=220?this.colors.Green+n:r.lqi>=200?this.colors.Cyan+n:r.lqi>=130?this.colors.Blue+n:r.lqi>=50?this.colors.Violet+n:this.colors.Red+n}#u(r,n){let i=`_${r}-${n}`;if(Object.hasOwn(this.colorsCache,i))return this.colorsCache[i];if(r.startsWith("rgba(")){let a="rgba("+r.substring(5,r.length-1).split(",").map(s=>s.trim()).map((s,l)=>l===3?s:Math.min(255,Number.parseInt(s)+n)).join(", ")+")";return this.colorsCache[i]=a,a}let o="#"+r.replace(/^#/,"").replace(/../g,a=>("0"+Math.min(255,Math.max(0,Number.parseInt(a,16)+n)).toString(16)).substr(-2));return this.colorsCache[i]=o,o}};var Xn=Object.getPrototypeOf(customElements.get("ha-panel-lovelace")),Re=Xn.prototype.html,dp=Xn.prototype.css,Yn=class extends Xn{static get properties(){return{hass:{type:Object},bus:{type:Object},_logEntries:{type:Array}}}constructor(){super(),this._logEntries=[],this._consoleElm=null}firstUpdated(r){super.firstUpdated(r),this._consoleElm=this.renderRoot.querySelector("ul"),this.bus.tap("log-entries",n=>this._updateLogEntries(n))}render(){return Re`
            <ul>
                ${this._logEntries.map(r=>Re`
                        <li>
                            ${this._renderStatusIcon(r.status)}
                            ${r.message}${r.feedback?Re` <span class="feedback"> # ${r.feedback}</span>`:""}
                        </li>
                    `)}
            </ul>
        `}_updateLogEntries(r){this._logEntries=[...r],queueMicrotask(()=>this._consoleElm.scrollIntoView({behavior:"smooth",block:"end"}))}_renderStatusIcon(r){switch(r){case"pending":return Re`<span class="st pending">[ .... ]</span>`;case"ok":return Re`<span class="st ok">[ DONE ]<span></span></span>`;case"fail":return Re`<span class="st fail">[ FAIL ]</span>`;case"info":return Re`<span class="st info">[ INFO ]</span>`;case"warn":return Re`<span class="st warn">[ WARN ]</span>`;default:return Re`<span class="st">[ ???? ]</span>`}}static get styles(){return dp`
            :host {
                display: block;
                height: 100%;
            }

            ul {
                display: block;
                list-style-type: none;
                padding: 10px;
                margin: 0;
                font-family: monospace;
                font-size: smaller;
            }
            li {
                white-space: nowrap;
            }
            .st {
                white-space: pre;
            }
            .st.pending {
                color: #839496;
            }
            .st.ok {
                color: var(--Green);
            }
            .st.fail {
                color: var(--Red);
            }
            .st.info {
                color: var(--Blue);
            }
            .st.warn {
                color: var(--Orange);
            }
            .feedback {
                opacity: 0.5;
            }
        `}};customElements.get("console-list")||customElements.define("console-list",Yn);var Jn=Object.getPrototypeOf(customElements.get("ha-panel-lovelace")),Qn=Jn.prototype.html,mp=Jn.prototype.css,gp=[{value:"1",label:"Low (default)"},{value:"2",label:"Medium"},{value:"3",label:"High"}];var Kn=class extends Jn{static get properties(){return{hass:{type:Object},bus:{type:Object},_showLinkParticles:{type:Boolean},_nodeRepulsionForce:{type:String},_persistDraggedNodes:{type:Boolean},_bgImageUrl:{type:String},_bgImageError:{type:String}}}constructor(){super(),this._showLinkParticles=localStorage.getItem("zigbee-map.showLinkParticles")!=="false",this._nodeRepulsionForce=localStorage.getItem("zigbee-map.nodeRepulsionForce")||"1",this._persistDraggedNodes=localStorage.getItem("zigbee-map.persistDraggedNodes")==="true",this._bgImageUrl=localStorage.getItem("zigbee-map.bgImageUrl")||"",this._bgImageError=null;try{this._nodeLayout=JSON.parse(localStorage.getItem("zigbee-map.nodeLayout"))||{}}catch{this._nodeLayout={},localStorage.setItem("zigbee-map.nodeLayout",JSON.stringify(this._nodeLayout))}queueMicrotask(()=>{this.bus.tap("options-apply",()=>{this.bus.relay("options-show-link-particles",this._showLinkParticles),this.bus.relay("options-node-repulsion-force",this._nodeRepulsionForce),this.bus.relay("options-persist-dragged-nodes",{enabled:this._persistDraggedNodes,layout:this._nodeLayout}),this.bus.relay("options-bg-image-url",this._bgImageUrl)}),this.bus.tap("fix-node-position",r=>{this._nodeLayout[r.addr]={x:r.x,y:r.y},this._persistDraggedNodes&&localStorage.setItem("zigbee-map.nodeLayout",JSON.stringify(this._nodeLayout))}),this.bus.tap("clear-node-position",r=>{delete this._nodeLayout[r.addr],this._persistDraggedNodes&&localStorage.setItem("zigbee-map.nodeLayout",JSON.stringify(this._nodeLayout))})})}render(){return Qn`
            <ha-card outlined>
                <div class="card-content">
                    <ha-settings-row>
                        <span slot="heading" data-for="show-link-particles">Show link particles</span>
                        <span slot="description" data-for="show-link-particles">Render the directional link particles</span>
                        <ha-switch
                            @change=${this.#e}
                            .checked=${this._showLinkParticles}
                            .disabled=${!1}
                            name="show-link-particles"
                        ></ha-switch>
                    </ha-settings-row>

                    <ha-select
                        .label=${"Node repulsion force"}
                        .value=${this._nodeRepulsionForce}
                        .required=${!1}
                        .disabled=${!1}
                        @change=${this.#r}
                        @closed=${r=>r.stopPropagation()}
                        fixedMenuPosition
                        naturalMenuWidth
                    >
                        ${gp.map(r=>Qn` <ha-list-item .value=${r.value}>${r.label}</ha-list-item> `)}
                    </ha-select>
                    <ha-settings-row>
                        <span slot="heading" data-for="persist-dragged-nodes">Persist dragged nodes</span>
                        <span slot="description" data-for="persist-dragged-nodes">Remember dragged nodes position</span>
                        <ha-switch
                            @change=${this.#n}
                            .checked=${this._persistDraggedNodes}
                            .disabled=${!1}
                            name="persist-dragged-nodes"
                        ></ha-switch>
                    </ha-settings-row>

                    <ha-textfield label="Background image URL" .value=${this._bgImageUrl} id="bg-image-url" name="bg-image-url" .iconTrailing=${!0}>
                        <ha-button slot="trailingIcon" appearance="plain" @click=${this.#t}>Save</ha-button>
                    </ha-textfield>
                    ${this._bgImageError?Qn`<p class="error"><b>Error</b>: ${this._bgImageError}</p>`:""}
                </div>
            </ha-card>
        `}#e(r){let n=r.target.checked;n!=this._showLinkParticles&&(this._showLinkParticles=n,localStorage.setItem("zigbee-map.showLinkParticles",n),this.bus.relay("options-show-link-particles",n),this.dispatchEvent(new CustomEvent("options-changed",{bubbles:!0,composed:!0,detail:{showLinkParticles:n}})))}#r(r){let n=r.target.value;n!=this._nodeRepulsionForce&&(this._nodeRepulsionForce=n,localStorage.setItem("zigbee-map.nodeRepulsionForce",n),this.bus.relay("options-node-repulsion-force",Number.parseInt(n)),this.dispatchEvent(new CustomEvent("options-changed",{bubbles:!0,composed:!0,detail:{nodeRepulsionForce:n}})))}#n(r){let n=r.target.checked;n!=this._persistDraggedNodes&&(this._persistDraggedNodes=n,localStorage.setItem("zigbee-map.persistDraggedNodes",n),n===!1&&(this._nodeLayout={}),localStorage.setItem("zigbee-map.nodeLayout",JSON.stringify(this._nodeLayout)),this.bus.relay("options-persist-dragged-nodes",{enabled:this._persistDraggedNodes,layout:this._nodeLayout}),this.dispatchEvent(new CustomEvent("options-changed",{bubbles:!0,composed:!0,detail:{persistDraggedNodes:n}})))}async#t(){let r=this.renderRoot.querySelector("#bg-image-url").value?.trim()||"";this._bgImageError=await this._validateImageUrl(r),!this._bgImageError&&(this._bgImageUrl=r,localStorage.setItem("zigbee-map.bgImageUrl",r),this.bus.relay("options-bg-image-url",r),this.dispatchEvent(new CustomEvent("options-changed",{bubbles:!0,composed:!0,detail:{bgImageUrl:r}})))}_validateImageUrl(r){return new Promise(n=>{r||n(null);try{let i=new URL(r,window.location.origin),o=new Image;o.onload=()=>n(null),o.onerror=()=>n("URL does not point to a valid image"),o.src=i}catch{n("Invalid URL format")}})}static get styles(){return mp`
            :host {
                display: block;
            }
            ha-select,
            ha-textfield {
                width: 100%;
            }
            ha-card {
                max-width: 600px;
                margin: 0 auto 16px auto;
            }
            .error {
                color: var(--Red);
            }

            @media (max-width: 600px) {
                ha-card {
                    border-width: 1px 0px;
                    border-radius: var(--ha-border-radius-square);
                    box-shadow: unset;
                }
            }
        `}};customElements.get("zigbee-map-options")||customElements.define("zigbee-map-options",Kn);var ti=Object.getPrototypeOf(customElements.get("ha-panel-lovelace")),ct=ti.prototype.html,xp=ti.prototype.css,ei="Zigbee Map",ul="2.5.0",fl="https://codeberg.org/dan-danache/ha-zigbee-map",yp="/src/branch/master/CHANGELOG.md",vp="https://www.buymeacoffee.com/dandanache",cl={Coordinator:{icon:"mdi:memory",color:"var(--Orange)"},Repeater:{icon:"mdi:access-point",color:"var(--Blue) "},EndDevice:{icon:"mdi:battery-high",color:"var(--Green)"}},ht=class extends ti{static get properties(){return{hass:{type:Object},narrow:{type:Boolean},route:{type:Object},panel:{type:Object},_ready:{type:Boolean},_page:{type:String},_devices:{type:Array},_progress:{type:String}}}constructor(){super(),this._ready=!1,this._page="console",this._devices=[],this._progress=null;let r=n=>n.lqi?n.type==="EndDevice"?n.lqi.min:`${n.lqi.min} - ${n.lqi.max}`:"\u2014";this._columns=ni(n=>({icon:{title:"Type",type:"icon",main:!0,template:i=>ct`<ha-icon
                            .icon=${cl[i.type]?.icon}
                            style="margin:0; color:${i.status==="found"?cl[i.type]?.color:"var(--Orange)"}"
                        ></ha-icon>`},name:{title:"Friendly Name",main:!0,sortable:!0,filterable:!0,flex:2,template:i=>ct`${i.name}${n?ct`<span style="color: var(--secondary-text-color)"> | ${r(i)}</span>
                                  <div class="secondary">${i.summary||""}</div>`:""}`},type:{title:"Type (hidden)",hidden:!0,filterable:!0,template:i=>i.type},status:{title:"Status",hidden:!0,filterable:!0,template:i=>i.status||"\u2014"},lqi:{title:"LQI",hidden:n,sortable:!1,filterable:!1,template:i=>r(i)},vendor:{title:"Vendor",hidden:n,filterable:!0,sortable:!0,template:i=>i.vendor||"\u2014"},description:{title:"Description",hidden:n,filterable:!0,sortable:!0,flex:2,template:i=>i.description||"\u2014"},model:{title:"Model",hidden:n,filterable:!0,sortable:!0,template:i=>i.model||"\u2014"}})),this.bus=new pt,this.log=new ge(this.bus),this.bootstrap=new dt(this.bus,this.log),this.graph=new or(this.bus,this.log),this.cartographer=new yt(this.bus,this.log),this.websocket=new xt(this.bus,this.log,"zigbee-map-extension"),this.bus.tap("ui-ready",()=>this._ready=!0),this.bus.tap("device-list",n=>this.#n(n)),this.bus.tap("add-graph-links",n=>this.#t(n)),this.bus.tap("mapping-queue-started",()=>{this.log.info("Interface rerouted to graphical feed","user engaged with visual decoy"),this._page="map",setTimeout(()=>this.graph.init(this.renderRoot.querySelector("#map-page")),100)}),this.bus.tap("mapping-queue-finished",()=>{this._progress="Mapping complete",setTimeout(()=>this._progress=null,2e3)}),this.bus.tap("mapping-queue-progress",n=>this._progress=`Mapping... ${n} device${n!==1?"s":""} to go`),this.bus.tap("zigbee-graph-ready",()=>this.bus.relay("options-apply"))}disconnectedCallback(){super.disconnectedCallback(),this.websocket.stop()}firstUpdated(r){super.firstUpdated(r),setTimeout(()=>this.bootstrap.start(this.panel?.config,this.hass,"ZIGBEE-MAP-PANEL",ul),1e3)}render(){return this.hass?this._ready?ct`
            <ha-top-app-bar-fixed>
                <ha-menu-button slot="navigationIcon" .hass=${this.hass} .narrow=${this.narrow}></ha-menu-button>
                <div slot="title" class="header">${ei}</div>
                <ha-icon-button slot="actionItems" label="Start again" @click=${()=>document.location.reload()}>
                    <ha-icon class="icon" icon="mdi:refresh"></ha-icon>
                </ha-icon-button>
            </ha-top-app-bar-fixed>

            <div id="toolbar">
                <ha-tab-group @wa-tab-show=${this.#e}>
                    <ha-tab-group-tab slot="nav" panel="map" .active=${this._page==="map"}>Map</ha-tab-group-tab>
                    <ha-tab-group-tab slot="nav" panel="devices" .active=${this._page==="devices"}>Devices</ha-tab-group-tab>
                    <ha-tab-group-tab slot="nav" panel="options" .active=${this._page==="options"}>Options</ha-tab-group-tab>
                    <ha-tab-group-tab slot="nav" panel="about" .active=${this._page==="about"}>About</ha-tab-group-tab>
                    <ha-tab-group-tab slot="nav" panel="console" .active=${this._page==="console"}>Console</ha-tab-group-tab>
                </ha-tab-group>
            </div>

            <section id="console-page" ?hidden=${this._page!=="console"}>
                <console-list .bus=${this.bus}></console-list>
            </section>

            <section id="devices-page" ?hidden=${this._page!=="devices"}>
                <ha-data-table
                    .hass=${this.hass}
                    .narrow=${this.narrow}
                    .columns=${this._columns(this.narrow)}
                    .data=${this._devices}
                    .noDataText=${"Loading... please wait."}
                    .searchLabel=${`Search ${this._devices.length} devices`}
                    id="addr"
                    clickable
                    @row-click=${this.#r}
                ></ha-data-table>
            </section>

            <section id="map-page" ?hidden=${this._page!=="map"}></section>

            <section id="options-page" ?hidden=${this._page!=="options"}>
                <zigbee-map-options .hass=${this.hass} .bus=${this.bus} @options-changed=${()=>this._page="map"}></zigbee-map-options>
            </section>

            <section id="about-page" ?hidden=${this._page!=="about"}>
                <ha-card id="about-logo" outlined>
                    <div class="card-content">
                        <div id="about-icon">
                            <ha-icon icon="mdi:hub"></ha-icon>
                        </div>
                        <div id="about-name">
                            ${ei} <small>v${ul}</small>
                            <aside>Visualize. Understand. Optimize.</aside>
                        </div>

                        <ha-md-list id="about-links">
                            <ha-md-list-item type="link" href="${fl}" target="_blank" rel="noopener noreferrer">
                                <div slot="start" class="icon-background" style="background-color: var(--Blue)">
                                    <ha-icon icon="mdi:git"></ha-icon>
                                </div>
                                <span slot="headline">Source code</span>
                                <span slot="supporting-text">Unravel the magic within</span>
                                <ha-icon slot="end" icon="mdi:open-in-new"></ha-icon>
                            </ha-md-list-item>
                            <ha-md-list-item type="link" href="${fl}${yp}" target="_blank" rel="noopener noreferrer">
                                <div slot="start" class="icon-background" style="background-color: var(--Orange)">
                                    <ha-icon icon="mdi:newspaper-variant"></ha-icon>
                                </div>
                                <span slot="headline">Changelog</span>
                                <span slot="supporting-text">View the latest improvements</span>
                                <ha-icon slot="end" icon="mdi:open-in-new"></ha-icon>
                            </ha-md-list-item>
                            <ha-md-list-item type="link" href="${vp}" target="_blank" rel="noopener noreferrer">
                                <div slot="start" class="icon-background" style="background-color: var(--Green)">
                                    <ha-icon icon="mdi:coffee"></ha-icon>
                                </div>
                                <span slot="headline">Buy me a coffee</span>
                                <span slot="supporting-text">Never required, always appreciated</span>
                                <ha-icon slot="end" icon="mdi:open-in-new"></ha-icon>
                            </ha-md-list-item>
                        </ha-md-list>
                    </div>
                </ha-card>

                <ha-card header="How it works" id="how-it-works" outlined>
                    <div class="card-content">
                        <p>
                            ${ei} is a custom panel for Home Assistant that provides a dynamic, real-time visualization of your Zigbee mesh
                            network by actively querying connected devices.
                        </p>
                        <p>The app begins by retrieving the full list of Zigbee devices, including the coordinator, repeaters and end-devices.</p>
                        <p>It then queries the Zigbee coordinator device for Link Quality Indicator (LQI) data, which includes:</p>
                        <ul>
                            <li>The list of neighbors (repeaters) and children (end-devices).</li>
                            <li>Each entry includes its LQI value (range: 0-255).</li>
                        </ul>
                        <p>
                            All repeater devices are added to a processing queue, where each repeater is queried for its own neighbor data,
                            recursively expanding the network map.
                        </p>
                        <p>End-devices are skipped, as they are likely sleeping and unable to respond to queries.</p>
                        <p>As data is collected, a visual graph is built:</p>
                        <ul>
                            <li>
                                Nodes represent devices:
                                <ul>
                                    <li><b style="color:var(--Blue)">Blue</b> nodes = Repeaters, usually mains-powered.</li>
                                    <li><b style="color:var(--Green)">Green</b> nodes = End-devices, usually battery-powered.</li>
                                    <li>
                                        <b style="color:var(--Magenta)">Magenta</b> = Repeaters that might be out of range, powered off, or not
                                        responding to LQI queries.
                                    </li>
                                </ul>
                            </li>
                            <li>
                                Links represent radio connections between devices; link colors indicate signal quality (LQI) between devices:
                                <ul>
                                    <li>
                                        <b style="color:var(--Green)">Green</b> and <b style="color:var(--Cyan)">Cyan</b> links = strong connections.
                                    </li>
                                    <li>
                                        <b style="color:var(--Red)">Red</b> and <b style="color:var(--Violet)">Violet</b> links = weaker connections;
                                        consider adding more repeaters.
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <p>The mapping process completes once all repeaters have been queried and the processing queue is empty.</p>
                    </div>
                </ha-card>

                <ha-card header="Usage" outlined>
                    <div class="card-content">
                        <p>The app offers an intuitive interface to explore the topology of your Zigbee network.</p>

                        <h3>Map tab</h3>
                        <ul>
                            <li>Zoom in and out using the mouse scroll wheel or pinch gesture.</li>
                            <li>Double-click or double-tap the background to automatically zoom to fit the entire graph in view.</li>
                            <li>Drag nodes to manually fix their position. LQI values are shown when the node is fixed.</li>
                            <li>Click or tap a fixed node to reset its position.</li>
                            <li>Dragging magenta-colored nodes (failed LQI queries) also triggers a new query.</li>
                        </ul>

                        <h3>Devices tab</h3>
                        <ul>
                            <li>View all Zigbee devices, categorized as repeaters or end-devices.</li>
                            <li>Click a device to switch to the Map tab and zoom in on it.</li>
                        </ul>
                        <p>
                            Devices that are not discovered during the mapping process are colored red in the device list. These devices are not
                            included in the interactive network graph.
                        </p>
                        <p>Meaning of the <b>LQI</b> column:</p>
                        <ul>
                            <li><b>end-devices:</b> Displays the link quality value as reported by the parent repeater.</li>
                            <li>
                                <b>repeaters:</b> Shows the range of link quality values (minimum and maximum) that this repeater reports for its
                                reachable neighboring devices (including its child end-devices).
                            </li>
                        </ul>
                        <p>To filter the device list:</p>
                        <ul>
                            <li>Type "missing" in the search field to list only devices not found during discovery.</li>
                            <li>Type "found" to list only devices discovered and included in the graph.</li>
                            <li>Type "repeater" to list only Zigbee repeaters.</li>
                            <li>Type "enddevice" to list only Zigbee end-devices.</li>
                        </ul>
                    </div>
                </ha-card>

                <ha-card header="Interpreting LQI Values" outlined>
                    <div class="card-content">
                        <p>
                            LQI (Link Quality Index) values are often unreliable for troubleshooting Zigbee communication issues. Although they are
                            presented as positive numbers (ranging from 0 to 255), with higher values generally indicating better link quality, the
                            lack of standardization across Zigbee stacks and device manufacturers makes them difficult to interpret consistently.
                        </p>
                        <p>
                            Different vendors calculate LQI in different ways, which may not be relevant to the overall network performance. For
                            example, Silicon Labs and Texas Instruments use different scaling methods, and environmental interference can skew the
                            results, making them less meaningful for assessing overall network health.
                        </p>
                        <p>
                            That said, while comparing LQI values across different devices is generally not useful, you can still use the values
                            reported by the same device to evaluate relative signal quality toward its neighboring devices. This approach can help
                            identify weak links or potential routing issues within that device's local mesh.
                        </p>
                    </div>
                </ha-card>
            </section>
            <aside id="progress-toast" role="status" aria-live="polite" style="opacity: ${this._progress===null?"0":"0.75"}">
                ${this._progress||"Mapping complete"}
            </aside>
        `:ct`<div class="spinner"></div>`:ct`<p>&nbsp;Oh snap... I did it again!</p>`}#e(r){this._page=r.detail.name}#r(r){this._page="map",this.bus.relay("zoom-on-node",r.detail.id)}#n(r){let n=[...this._devices];r.forEach(s=>{n.find(l=>l.addr===s.addr)||n.push({...s,status:"missing"})}),this._devices=n.filter(s=>s.type!=="Coordinator");let i=this._devices.filter(s=>s.type==="Coordinator").length,o=this._devices.filter(s=>s.type==="Repeater").length,a=this._devices.filter(s=>s.type==="EndDevice").length;this.log.info("Mesh topology refreshed",`detected: 1 coordinator, ${o} repeaters, and ${a} end-devices`)}#t(r){let n=[...this._devices];r.forEach(i=>{n.filter(o=>o.addr===i.srcAddr||o.addr===i.dstAddr).forEach(o=>{o.status="found",i.dstType==="EndDevice"&&o.addr===i.dstAddr&&(o.lqi={min:i.lqi,max:i.lqi}),o.addr===i.srcAddr&&(o.lqi={min:Math.min(o.lqi?.min||256,i.lqi),max:Math.max(o.lqi?.max||0,i.lqi)})})}),this._devices=n.filter(i=>i.type!=="Coordinator")}static get styles(){return xp`
            :host {
                display: flex;
                flex-flow: column;
                height: 100%;
                font-family: var(--ha-font-family-body);
                font-size: var(--ha-font-size-m);
                font-weight: var(--ha-font-weight-normal);
                line-height: var(--ha-line-height-normal);

                --Yellow: #b58900;
                --Orange: #cb4b16;
                --Red: #dc322f;
                --Magenta: #d33682;
                --Violet: #6c71c4;
                --Blue: #268bd2;
                --Cyan: #2aa198;
                --Green: #859900;
            }

            .spinner {
                position: absolute;
                top: calc(50% - 32px);
                left: calc(50% + (var(--mdc-drawer-width, 0px) / 2) - 32px);

                content: ' ';
                display: block;
                width: 64px;
                height: 64px;
                border-radius: 50%;
                border: 1px solid var(--primary-text-color);
                border-color: var(--primary-text-color) transparent var(--primary-text-color) transparent;
                animation: spinner 1.2s linear infinite;
            }
            @keyframes spinner {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }
            ha-top-app-bar-fixed {
                flex: 0 1 auto;
            }
            pre {
                font-size: smaller;
            }
            a {
                color: var(--primary-text-color);
                text-decoration: none;
            }
            ha-tab-group {
                --ha-tab-active-text-color: var(--app-header-text-color, white);
                --ha-tab-indicator-color: var(--app-header-text-color, white);
                --ha-tab-track-color: transparent;
                color: var(--app-header-text-color);
                background-color: var(--app-header-background-color);
                border-bottom: var(--app-header-border-bottom, none);
                -webkit-backdrop-filter: var(--app-header-backdrop-filter, none);
                backdrop-filter: var(--app-header-backdrop-filter, none);
            }
            .card-content *:last-child {
                margin-bottom: 0 !important;
            }
            #toolbar {
                flex: 0 1 auto;
            }

            section {
                flex: 1 1 auto;
                box-sizing: border-box;
                padding: 10px;
                overflow: auto;
            }
            #map-page,
            #console-page {
                padding: 0;
            }

            #devices {
                background-color: var(--data-table-background-color);
                border-collapse: collapse;
                width: 100%;
            }

            #about-page ha-card {
                max-width: 600px;
                margin: 0 auto 16px auto;
            }
            #about-page ha-card:last-child {
                margin-bottom: 0;
            }
            #about-logo .card-content {
                padding: 0;
            }
            #about-icon {
                --mdc-icon-size: 80px;
                color: var(--Magenta);
                text-align: center;
                margin-top: 32px;
            }
            #about-name {
                color: var(--primary-text-color);
                font-size: var(--ha-font-size-xl);
                font-weight: var(--ha-font-weight-normal);
                line-height: var(--ha-line-height-condensed);
                text-align: center;
                margin: 24px;
            }
            #about-name small {
                opacity: 0.8;
            }
            #about-name aside {
                display: block;
                margin-top: 8px;
                font-size: var(--ha-font-size-m);
                opacity: 0.8;
            }
            #about-links {
                background-color: transparent;
                border-top: 1px solid var(--divider-color);
            }
            #about-links ha-icon[slot='end'] {
                --mdc-icon-size: 20px;
            }
            .icon-background {
                --mdc-icon-size: 24px;
                border-radius: 50%;
                padding: 8px;
            }
            .icon-background ha-icon {
                color: #fff;
            }
            #how-it-works {
                margin-bottom: 15px;
            }
            #about-page ul {
                padding: 0 1.5em;
            }
            #about-page [header='Usage'] ul {
                list-style-type: '';
            }
            #about-page [header='Usage'] ul li {
                margin-bottom: 4px;
                padding-left: 0.5em;
            }

            #progress-toast {
                position: absolute;
                bottom: 10px;
                left: calc(50% + (var(--mdc-drawer-width, 0px) / 2));
                transform: translate(-50%, 0);
                white-space: nowrap;
                display: block;
                font-size: var(--ha-font-size-s);
                color: var(--primary-background-color);
                background-color: var(--primary-text-color);
                border-radius: 4px;
                padding: 0.7em 1em;
                pointer-events: none;
                transition: opacity 0.75s ease-in-out;
            }

            .float-tooltip-kap {
                position: absolute;
                opacity: 0;
            }

            @media (max-width: 600px) {
                section {
                    padding: 0;
                }
                ha-card {
                    border-width: 1px 0px;
                    border-radius: var(--ha-border-radius-square);
                    box-shadow: unset;
                }
                ha-data-table {
                    --data-table-border-width: 0;
                    --ha-border-radius-sm: var(--ha-border-radius-square);
                    border-top: 1px solid var(--divider-color);
                }
            }
        `}};if(!customElements.get("zigbee-map-panel")){customElements.define("zigbee-map-panel",ht);class e extends ht{}customElements.define("zigbee-map-panel-1",e);class r extends ht{}customElements.define("zigbee-map-panel-2",r);class n extends ht{}customElements.define("zigbee-map-panel-3",n)}
